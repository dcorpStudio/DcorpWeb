window.__require=function e(t,o,n){function i(a,c){if(!o[a]){if(!t[a]){var l=a.split("/");if(l=l[l.length-1],!t[l]){var r="function"==typeof __require&&__require;if(!c&&r)return r(l,!0);if(s)return s(l,!0);throw new Error("Cannot find module '"+a+"'")}a=l}var h=o[a]={exports:{}};t[a][0].call(h.exports,function(e){return i(t[a][1][e]||e)},h,h.exports,e,t,o,n)}return o[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({Ball:[function(e,t){"use strict";cc._RF.push(t,"8accdTiCitNN7s2tf6jXaE7","Ball"),cc.Class({extends:cc.Component,properties:{speed:10},onLoad:function(){this.physicBody=this.getComponent(cc.RigidBody),this.physicBody.linearVelocity=cc.v2(0,0),this.rebounce=!1,this.rebounceEnabled=!1,this.devided=!1,this.leftWallColision=!1,this.righWallColision=!1},start:function(){},setLinearVelocity:function(e){this.physicBody.linearVelocity=e.mul(this.speed)},applyLineerVelocity:function(e){this.physicBody.linearVelocity=e},setRebounceEnable:function(){this.rebounce||(this.rebounce=!0,this.rebounceEnabled=!0,this.node.color=cc.color(255,8,107),this.node.parent.getComponent("BoardGame").playHitGameItemSoundEffect())},markAsDevidedBall:function(){this.devided||(this.devided=!0)},onBeginContact:function(e,t,o){if("1"==o.body.name)this.rebounce&&this.rebounceEnabled?this.rebounceEnabled=!1:this.schedule(this.inActiveBall,0);else if("4"==o.body.name)this.setRebounceEnable();else if("5"==o.body.name&&!this.devided){this.markAsDevidedBall();var n=Math.atan2(this.physicBody.linearVelocity.y,this.physicBody.linearVelocity.x);n||(n=Math.PI/4);var i=this.physicBody.linearVelocity.mag(),s=o.node.getComponent("DevideBallItem").randomAngle,a=n+s,c=cc.v2(Math.cos(a),Math.sin(a)).mul(i);this.applyLineerVelocity(c);var l=n-s,r=cc.v2(Math.cos(l),Math.sin(l)).mul(i);this.node.parent.getComponent("BoardGame").spawnNewDevideBall(this.node.getPosition(),r),this.node.parent.getComponent("BoardGame").playHitGameItemSoundEffect()}},inActiveBall:function(){this.unschedule(this.inActiveBall),this.physicBody.type=cc.RigidBodyType.Static,this.physicBody.active=!1,this.physicBody.enable=!1,this.physicBody.linearVelocity=cc.v2(0,0),this.node.parent.getComponent("BoardGame").ballCollisionWithBottomWall(this.node)},makeBallInActive:function(){this.unschedule(this.inActiveBall),this.physicBody.type=cc.RigidBodyType.Static,this.physicBody.active=!1,this.physicBody.enable=!1,this.physicBody.linearVelocity=cc.v2(0,0),this.rebounce=!1,this.rebounceEnabled=!1,this.devided=!1,this.leftWallColision=!1,this.righWallColision=!1},reActiveBall:function(){this.physicBody.type=cc.RigidBodyType.Dynamic,this.physicBody.active=!0,this.physicBody.enable=!0,this.physicBody.linearVelocity=cc.v2(0,0),this.node.color=cc.Color.WHITE,this.physicBody.enabledContactListener=!0,this.rebounce=!1,this.rebounceEnabled=!1,this.devided=!1,this.leftWallColision=!1,this.righWallColision=!1,this.node.active=!0},onEndContact:function(e,t,o){if("2"==o.body.name){if(this.righWallColision=!0,this.leftWallColision&&(a=Math.atan2(this.physicBody.linearVelocity.y,this.physicBody.linearVelocity.x))){var n=null;if((c=180*a/Math.PI)>=180&&c<=181||c>=-180&&c<=-179?n=(c+=.5)*Math.PI/180:(c>=179&&c<180||c>=-181&&c<-180)&&(n=(c-=.5)*Math.PI/180),n){var i=this.physicBody.linearVelocity.mag(),s=cc.v2(Math.cos(n),Math.sin(n)).mul(i);this.applyLineerVelocity(s)}}}else if("3"==o.body.name){var a,c;if(this.leftWallColision=!0,this.righWallColision&&(a=Math.atan2(this.physicBody.linearVelocity.y,this.physicBody.linearVelocity.x)))n=null,(c=180*a/Math.PI)>-1&&c<=0?n=(c-=.5)*Math.PI/180:c>0&&c<1&&(n=(c+=.5)*Math.PI/180),n&&(i=this.physicBody.linearVelocity.mag(),s=cc.v2(Math.cos(n),Math.sin(n)).mul(i),this.applyLineerVelocity(s))}else this.leftWallColision=!1,this.righWallColision=!1}}),cc._RF.pop()},{}],BlockItem:[function(e,t){"use strict";cc._RF.push(t,"205544ohzNErI6xKLtd30YQ","BlockItem");var o=e("GameUtils");cc.Class({extends:cc.Component,properties:{labelCounter:{default:null,type:cc.Label},labelCounterNode:cc.Node,displayNode:cc.Node},onLoad:function(){this.labelCounter.string="22";var e=cc.scaleTo(.03,1.1),t=cc.scaleTo(.03,.9),o=cc.scaleTo(.03,1);this.sequence=cc.sequence(e,t,o),this.sequence.setTag(1)},start:function(){},setInitValue:function(e,t,n){this.itemId=e,this.rowId=t,this.curValue=n,this.labelCounter.string=n,this.originalColor=o.getBrickColorByHP(this.curValue),this.displayNode.color=this.originalColor;var i=this.node.parent.parent.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.labelCounterNode.getPosition()));this.node.removeChild(this.labelCounterNode),this.node.parent.parent.addChild(this.labelCounterNode),this.labelCounterNode.setPosition(i),this.labelCounterNode.active=!0},moveDownALine:function(e,t){this.node.runAction(cc.moveBy(e,t)),this.labelCounterNode.runAction(cc.moveBy(e,t))},playEffectNewArrive:function(){this.node.scale=0,this.node.runAction(cc.scaleTo(.3,1)),this.labelCounterNode.scale=0,this.labelCounterNode.runAction(cc.scaleTo(.3,1))},destroyBMFont:function(){null!=this.labelCounterNode&&(this.labelCounterNode.destroy(),this.labelCounterNode=null)},isBrick:function(){return!0},onBeginContact:function(){this.curValue--,this.curValue>0?(this.labelCounter.string=this.curValue,this.displayNode.color=o.getBrickColorByHP(this.curValue),this.displayNode.stopActionByTag(1),this.displayNode.setScale(1),this.displayNode.runAction(this.sequence),this.node.parent.getComponent("BoardGame").playHitBrickSoundEffect()):0==this.curValue&&(this.getComponent(cc.RigidBody).enabledContactListener=!1,this.node.parent.getComponent("BoardGame").destroyBrick(this.node),this.labelCounter.string="",this.schedule(this.scheduleForDestroy,0),this.node.parent.getComponent("BoardGame").playBrickBrokenSoundEffect())},scheduleForDestroy:function(){this.unschedule(this.scheduleForDestroy),this.destroyBMFont(),this.node.destroy()},onEndContact:function(){},decreaseAhalfPoints:function(){var e=Math.round(this.curValue/2);this.curValue-=e,this.curValue>0?(this.labelCounter.string=this.curValue,this.displayNode.color=o.getBrickColorByHP(this.curValue)):this.schedule(this.scheduleForDestroyAndAlertToBoardGame,0)},scheduleForDestroyAndAlertToBoardGame:function(){this.unschedule(this.scheduleForDestroyAndAlertToBoardGame),this.getComponent(cc.RigidBody).enabledContactListener=!1,this.node.parent.getComponent("BoardGame").destroyBrick(this.node,!0),this.destroyBMFont(),this.node.destroy()}}),cc._RF.pop()},{GameUtils:"GameUtils"}],BoardGame:[function(e,t){"use strict";cc._RF.push(t,"dad3dpc6+VDPq/BlbelsZ2D","BoardGame");var o=e("GameUtils");cc.Class({extends:cc.Component,properties:{rootBallPrefab:{default:null,type:cc.Prefab},blockItemPrefab:{default:null,type:cc.Prefab},triangle_0_ItemPrefab:{default:null,type:cc.Prefab},triangle_90_ItemPrefab:{default:null,type:cc.Prefab},triangle_180_ItemPrefab:{default:null,type:cc.Prefab},triangle_270_ItemPrefab:{default:null,type:cc.Prefab},bonusBallItemPrefab:{default:null,type:cc.Prefab},rebounceBallItemPrefab:{default:null,type:cc.Prefab},devideBallItemPrefab:{default:null,type:cc.Prefab},ballPrefab:{default:null,type:cc.Prefab},brokenNodePrefab:{default:null,type:cc.Prefab},getScoreFont:{default:null,type:cc.BitmapFont},hintLineNode:cc.Node,hintLineReflect:cc.Node,sfxHitBrick:cc.AudioClip,sfxBrickBroken:cc.AudioClip,sfxHitGameItem:cc.AudioClip},onLoad:function(){this.ctx=this.getComponent(cc.Graphics),this.startPos=cc.v2(0,0),this.endPos=this.startPos,this.center=cc.v2(this.node.width/2,this.node.height/2),this.shootingBallCounter=0,this.totalBall=0,this.MIN_ANGLE=15,this.shootingSpeedVecNormalize=null,this.bonusBallByBooster=0,this.bonusBallByHitItem=0,this.isShooting=!1,this.listFlyingBall=[],this.listRebounceBall=[],this.nextTurnPosX=null,this.startTurnPosX=null,this.listShowingGameItemNodes=[],this.listRemainGameItems=[],this.listEffectNodes=[],this.totalScore=0,this.comboBrick=0,this.totalScoreInTurn=0,this.hintLineNode.active=!1,this.hintLineReflect.active=!1,this.listItemPrefabs=[this.blockItemPrefab,this.triangle_0_ItemPrefab,this.triangle_90_ItemPrefab,this.triangle_180_ItemPrefab,this.triangle_270_ItemPrefab,this.bonusBallItemPrefab,this.rebounceBallItemPrefab,this.devideBallItemPrefab],this.listItemScripts=["BlockItem","TriangleItem","BonusBallItem","RebounceBallItem","DevideBallItem"],this.initPhysics(),this.creatTouchLister(),this.listPlayingBallPool=[],this.listBrokenBrickEffectPool=[],this.curPlayingBallPoolIndex=0},spawnBallForPlayingPools:function(){if(this.listPlayingBallPool.length<Math.max(100,this.totalBall)){var e=cc.instantiate(this.ballPrefab);e.setPosition(this.rootBall.getPosition()),this.node.addChild(e),this.listPlayingBallPool.push(e),e.active=!1}else cc.log("Finish create playing ball pools"),this.unschedule(this.spawnBallForPlayingPools)},spawnBrokenEffectPools:function(){if(0==this.listBrokenBrickEffectPool.length)for(var e=0;e<10;e++){var t=cc.instantiate(this.brokenNodePrefab);t.active=!1,this.node.addChild(t),this.listBrokenBrickEffectPool.push(t)}},getNextAvailableBall:function(){for(var e=this.curPlayingBallPoolIndex;e<this.listPlayingBallPool.length;e++)if(0==this.listPlayingBallPool[e].active)return this.listPlayingBallPool[e].active=!0,this.listPlayingBallPool[e];var t=cc.instantiate(this.ballPrefab);return this.node.addChild(t),this.listPlayingBallPool.push(t),this.curPlayingBallPoolIndex++,cc.log("add new ball if not found available balls"),t},getNextAvailableBrokenEffect:function(){for(var e=0;e<this.listBrokenBrickEffectPool.length;e++)if(0==this.listBrokenBrickEffectPool[e].active)return this.listBrokenBrickEffectPool[e].active=!0,this.listBrokenBrickEffectPool[e];cc.log("not available --\x3e create new broken effect");var t=cc.instantiate(this.brokenNodePrefab);return this.node.addChild(t),this.listBrokenBrickEffectPool.push(t),t},setPause:function(e){if(this.isPause=e,e){this.node.pauseAllActions();for(var t=this.node.children,o=0;o<t.length;o++)t[o].pauseAllActions();cc.director.getPhysicsManager().enabled=!1}else{for(this.node.resumeAllActions(),t=this.node.children,o=0;o<t.length;o++)t[o].resumeAllActions();cc.director.getPhysicsManager().enabled=!0}},clearAllData:function(){this.node.stopAllActions(),this.unschedule(this.spawnNewBall);for(var e=0;e<this.listShowingGameItemNodes.length;e++)this.listShowingGameItemNodes[e].parent=null,this.listShowingGameItemNodes[e].scriptComponent.destroyBMFont(),this.listShowingGameItemNodes[e].destroy();for(this.listShowingGameItemNodes=[],this.listRemainGameItems=[],this.shootingBallCounter=0,this.totalBall=0,this.startPos=cc.v2(0,0),this.endPos=this.startPos,this.shootingSpeedVecNormalize=null,this.isShooting=!1,this.listFlyingBall=[],this.listRebounceBall=[],this.rootBall&&(this.rootBall.parent=null,this.rootBall.destroy(),this.rootBall=null),this.comboBrick=0,this.totalScore=0,this.isStoppingBall=!1,this.bonusBallByBooster=0,this.bonusBallByHitItem=0,e=0;e<this.listEffectNodes.length;e++)this.listEffectNodes[e].destroy();for(this.listEffectNodes=[],this.usedSaveLife=!1,this.isPause=!1,e=0;e<this.listBrokenBrickEffectPool.length;e++)this.listBrokenBrickEffectPool[e].stopAllActions(),this.listBrokenBrickEffectPool[e].active=!1;for(e=0;e<this.listPlayingBallPool.length;e++)this.listPlayingBallPool[e].stopAllActions(),this.listPlayingBallPool[e].getComponent("Ball").makeBallInActive(),this.listPlayingBallPool[e].active=!1;this.curPlayingBallPoolIndex=0},setCutRows:function(e){this.cutRows=e},creatTouchLister:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(t){if(!e.isShooting){var o=t.getTouches()[0].getLocation(),n=e.node.convertToNodeSpaceAR(o);e.startPos=n.add(e.center)}},this.node),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(!e.isShooting){var o=t.getTouches()[0].getLocation(),n=e.node.convertToNodeSpaceAR(o);e.endPos=n.add(e.center),e.ctx.clear(),e.ctx.moveTo(e.startPos.x,e.startPos.y),e.ctx.lineTo(e.endPos.x,e.endPos.y),e.ctx.stroke();var i=e.getShootingAngle(e.startPos,e.endPos);if(i){var s=e.node.convertToWorldSpaceAR(e.rootBall.position),a=cc.v2(Math.cos(i),Math.sin(i)).mul(2e3).add(s);e.rayCast(s,a)}else e.ctx.clear(),e.hintLineNode.active=!1,e.hintLineReflect.active=!1}},this.node),this.node.on(cc.Node.EventType.TOUCH_END,function(t){if(!e.isShooting){e.ctx.clear(),e.hintLineNode.active=!1,e.hintLineReflect.active=!1;var o=t.getTouches()[0].getLocation(),n=e.node.convertToNodeSpaceAR(o);e.endPos=n.add(e.center);var i=e.getShootingAngle(e.startPos,e.endPos);i&&(e.isShooting=!0,Math.PI,e.startTurnPosX=e.rootBall.getPosition().x,e.shootingSpeedVecNormalize=cc.v2(Math.cos(i),Math.sin(i)),e.schedule(e.spawnNewBall,.1),e.node.parent.getComponent("GameLayer").setStopBallButtonVisible(!0))}},this.node),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){e.isShooting||(e.ctx.clear(),e.hintLineNode.active=!1,e.hintLineReflect.active=!1)},this.node)},getShootingAngle:function(e,t){var o=Math.atan2(t.y-e.y,t.x-e.x);if(o){var n=180*o/Math.PI;return n>=180-this.MIN_ANGLE||n<=-90?n=180-this.MIN_ANGLE:n>=-90&&n<=this.MIN_ANGLE&&(n=this.MIN_ANGLE),n*Math.PI/180}return null},rayCast:function(e,t,o){for(var n,i,s=cc.director.getPhysicsManager().rayCast(e,t,cc.RayCastType.AllClosest),a=null,c=Number.MAX_SAFE_INTEGER,l=0;l<s.length;l++)if(!s[l].collider.sensor){var r=e.sub(s[l].point).mag();r<c&&(c=r,a=s[l])}if(a){n=this.node.convertToNodeSpaceAR(a.point);var h=Math.atan2(t.y-e.y,t.x-e.x);if(h){var u=cc.v2(Math.cos(h),Math.sin(h)).mul(15);i=n.sub(u)}else i=n;var d=this.node.convertToNodeSpaceAR(e);d.addSelf(cc.v2(this.node.width/2,this.node.height/2)),this.ctx.moveTo(d.x,d.y);var m=-180*h/Math.PI,p=d.sub(this.center);o?(this.hintLineReflect.setPosition(p),this.hintLineReflect.angle=-m,this.hintLineReflect.getComponent(cc.ProgressBar).progress=2e3/this.hintLineReflect.getContentSize().width):(this.hintLineNode.active=!0,this.hintLineNode.setPosition(p),this.hintLineNode.angle=-m,this.hintLineNode.getComponent(cc.ProgressBar).progress=2e3/this.hintLineNode.getContentSize().width)}if(a&&!o){var g=cc.v2(t.x-e.x,t.y-e.y),f=a.normal.mul(-2*g.dot(a.normal)).add(g),B=i.add(cc.v2(-this.center.x,-this.center.y));B=this.node.convertToWorldSpaceAR(B);var y=f.normalizeSelf().mul(1e3).add(B);this.rayCast(B,y,!0)}},initPhysics:function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().enabledAccumulator=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,0)},createNewBrick:function(e){var t=cc.instantiate(this.listItemPrefabs[e.itemId-1]);this.node.addChild(t);var o=cc.v2(80*(e.columnId+.5),80*(e.rowId+.5)).add(cc.v2(-this.center.x,-this.center.y));return t.setPosition(o),1==e.itemId?t.name="0":e.itemId>=2&&e.itemId<=5?t.name="1":6==e.itemId?t.name="2":7==e.itemId?t.name="3":8==e.itemId&&(t.name="4"),t.scriptComponent=t.getComponent(this.listItemScripts[t.name]),t.scriptComponent.setInitValue(e.itemId,e.rowId,e.initValue),t},loadInitGameItemOnTheBoard:function(e){this.clearAllData(),this.level=e.level,this.reward=e.reward,this.rootBall=this.createNewRootBall(0),this.totalBall=e.initBalls,this.shootingBallCounter=0,this.rootBall.getComponent("RootBall").setRemainBallNumber(this.totalBall,null);for(var t=0;t<e.listItems.length;t++){var o=e.listItems[t];if(o.rowId<10-this.cutRows){var n=this.createNewBrick(o);this.listShowingGameItemNodes.push(n)}else this.listRemainGameItems.push(o)}this.schedule(this.spawnBallForPlayingPools,1/60),this.spawnBrokenEffectPools()},createNewRootBall:function(e){var t=cc.instantiate(this.rootBallPrefab);return this.node.addChild(t),t.setPosition(cc.v2(e,-this.node.getContentSize().height/2+t.getContentSize().height/2)),t},spawnNewBall:function(){if(!this.isPause)if(this.shootingBallCounter<this.totalBall){var e=this.getNextAvailableBall();e.getComponent("Ball").reActiveBall(),e.setPosition(this.rootBall.getPosition()),e.getComponent("Ball").setLinearVelocity(this.shootingSpeedVecNormalize),this.shootingBallCounter++;var t=this.totalBall-this.shootingBallCounter;this.rootBall.getComponent("RootBall").setRemainBallNumber(t),t<=0&&(this.rootBall.destroy(),this.rootBall=null),this.listFlyingBall.push(e)}else this.unschedule(this.spawnNewBall)},spawnNewDevideBall:function(e,t){var o=this.getNextAvailableBall();o.getComponent("Ball").reActiveBall(),o.setPosition(e),o.getComponent("Ball").applyLineerVelocity(t),o.getComponent("Ball").markAsDevidedBall(),o.color=cc.color(27,214,118,255),this.listFlyingBall.push(o)},ballCollisionWithBottomWall:function(e){!this.isStoppingBall&&this.isShooting&&(this.nextTurnPosX||(this.nextTurnPosX=e.getPosition().x),this.correctBallPosition(e))},correctBallPosition:function(e){e.y=-this.node.getContentSize().height/2+e.getContentSize().height/2;var t=Math.abs(e.getPosition().x-this.nextTurnPosX)/1e3,o=cc.moveTo(t,cc.v2(this.nextTurnPosX,e.getPosition().y)),n=cc.callFunc(this.finishRebounceBall,this,e);e.runAction(cc.sequence(o,n))},finishRebounceBall:function(e){for(var t=0;t<this.listFlyingBall.length;t++)if(e===this.listFlyingBall[t]){e.getComponent("Ball").makeBallInActive(),this.listFlyingBall.splice(t,1),this.listRebounceBall.push(e),this.listRebounceBall.length>1&&(e.active=!1);break}if(0==this.listFlyingBall.length){for(null!=this.rootBall&&(this.rootBall.destroy(),this.rootBall=null),this.bonusBallByBooster>0&&(this.totalBall-=this.bonusBallByBooster,this.bonusBallByBooster=0),this.bonusBallByHitItem>0&&(this.totalBall+=this.bonusBallByHitItem,this.bonusBallByHitItem=0),this.rootBall=this.createNewRootBall(this.nextTurnPosX),this.rootBall.getComponent("RootBall").setRemainBallNumber(this.totalBall,null),this.listRebounceBall=[],t=0;t<this.listPlayingBallPool.length;t++){var o=this.listPlayingBallPool[t];o.color=cc.Color.WHITE,o.active=!1,this.listPlayingBallPool[t].setPosition(this.rootBall.getPosition())}this.curPlayingBallPoolIndex=0,this.comboBrick=0,this.isShooting=!1,this.nextTurnPosX=null,this.startTurnPosX=null,this.shootingBallCounter=0,this.checkForWin()?(cc.log("Go to win scene"),this.clearAllData(),this.node.parent.getComponent("GameLayer").gameScene.getComponent("BounceBall").showWinLayer(this.level,this.node.parent.getComponent("GameLayer").getStar(),this.reward)):(this.playingNextTurnEffect(),this.isStoppingBall=!1,this.node.parent.getComponent("GameLayer").setStopBallButtonVisible(!1),this.schedule(this.spawnBallForPlayingPools,1/60))}},checkForWin:function(){if(this.listShowingGameItemNodes.length+this.listRemainGameItems.length==0)return!0;for(var e=0;e<this.listShowingGameItemNodes.length;e++)if(this.listShowingGameItemNodes[e].scriptComponent.isBrick())return!1;for(e=0;e<this.listRemainGameItems.length;e++)if(this.listRemainGameItems[e].itemId<=5)return!1;return!0},destroyBrick:function(e,t){for(var o=!1,n=0;n<this.listShowingGameItemNodes.length;n++)if(this.listShowingGameItemNodes[n]===e){this.listShowingGameItemNodes.splice(n,1),o=!0;break}if(o)if(t)e.scriptComponent.destroyBMFont(),this.playEffectDestroyGameItem(e),this.checkForWin()&&(this.node.parent.getComponent("GameLayer").disableBoosters(),this.schedule(this.gotoWinScene,1));else{this.comboBrick++;var i=10+10*(this.comboBrick-1);this.totalScore+=i,this.node.parent.getComponent("GameLayer").updateTotalScore(this.totalScore),this.comboBrick>=2?this.playEffectDestroyGameItem(e,i,this.comboBrick):this.playEffectDestroyGameItem(e,i)}else cc.error("not found brick "+e)},removeGameItemFromListShowingGameItem:function(e){for(var t=!1,o=0;o<this.listShowingGameItemNodes.length;o++)if(this.listShowingGameItemNodes[o]===e){this.listShowingGameItemNodes.splice(o,1),t=!0;break}t||cc.error("not found gameItemNode "+e)},destroyBonusBall:function(e,t){for(var o=!1,n=0;n<this.listShowingGameItemNodes.length;n++)if(this.listShowingGameItemNodes[n]===e){this.listShowingGameItemNodes.splice(n,1),o=!0;break}if(o){if(t)this.playEffectDestroyGameItem(e);else{this.bonusBallByHitItem++;var i=10+10*(this.bonusBallByHitItem-1);this.totalScore+=i,this.bonusBallByHitItem>=2?this.playEffectDestroyGameItem(e,i,this.bonusBallByHitItem):this.playEffectDestroyGameItem(e,i)}this.node.parent.getComponent("GameLayer").updateTotalScore(this.totalScore)}else cc.error("not found bonusBall "+e)},playingNextTurnEffect:function(){for(var e=!1,t=0;t<this.listShowingGameItemNodes.length;t++){var o=this.listShowingGameItemNodes[t];o.scriptComponent.rowId--,o.scriptComponent.itemId<=5?o.scriptComponent.moveDownALine(.3,cc.v2(0,-80)):o.runAction(cc.moveBy(.3,cc.v2(0,-80))),0==o.scriptComponent.rowId&&(e=!0)}if(e)cc.log("show game over"),this.usedSaveLife?(this.node.parent.getComponent("GameLayer").gameScene.getComponent("BounceBall").showLoseLayer(this.level),this.clearAllData()):(this.usedSaveLife=!0,this.node.parent.getComponent("GameLayer").gameScene.getComponent("BounceBall").showSaveLife(this.level));else{var n=cc.delayTime(.3),i=cc.callFunc(this.checkForShowNewLineBrick,this);this.node.runAction(cc.sequence(n,i))}},checkForShowNewLineBrick:function(){for(var e=[],t=0;t<this.listRemainGameItems.length;t++){var o=this.listRemainGameItems[t];if(o.rowId--,o.rowId<10-this.cutRows){var n=this.createNewBrick(o);this.listShowingGameItemNodes.push(n),n.scriptComponent.playEffectNewArrive(),e.push(o)}}if(e.length>0){for(t=0;t<e.length;t++)for(var i=0;i<this.listRemainGameItems.length;i++)if(e[t]===this.listRemainGameItems[i]){this.listRemainGameItems.splice(i,1);break}this.node.parent.getComponent("GameLayer").updateRemainRows()}this.checkForDestroyFiredGameItem()},checkForDestroyFiredGameItem:function(){for(var e=0;e<this.listShowingGameItemNodes.length;e++){var t=this.listShowingGameItemNodes[e];7!=t.scriptComponent.itemId&&8!=t.scriptComponent.itemId||t.scriptComponent.destroyIfFired()}},getRemainRows:function(){for(var e=0,t=0;t<this.listRemainGameItems.length;t++)this.listRemainGameItems[t].rowId>e&&(e=this.listRemainGameItems[t].rowId);return e>9-this.cutRows?e-9+this.cutRows:0},stopBallMoving:function(){if(!this.isStoppingBall){var e;this.isStoppingBall=!0,this.unschedule(this.spawnNewBall),null!=this.nextTurnPosX?this.listFlyingBall.length>0&&(e=cc.v2(this.nextTurnPosX,-this.node.getContentSize().height/2+this.listFlyingBall[0].getContentSize().height/2)):e=this.rootBall?this.rootBall.getPosition():cc.v2(this.startTurnPosX,-this.node.getContentSize().height/2+this.listFlyingBall[0].getContentSize().height/2);for(var t=0;t<this.listFlyingBall.length;t++){var o=this.listFlyingBall[t];o.getComponent("Ball").makeBallInActive(),o.stopAllActions(),this.listRebounceBall.push(o),o.runAction(cc.moveTo(.3,e))}this.listFlyingBall=[],this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(.3),cc.callFunc(this.finishRebounceBall,this)))}},usingBoosterAddMoreBalls:function(){this.bonusBallByBooster=50,this.totalBall+=this.bonusBallByBooster,this.rootBall.getComponent("RootBall").setRemainBallNumber(this.totalBall),this.schedule(this.spawnBallForPlayingPools,1/60)},usingBoosterFlash:function(){for(var e=0;e<this.listShowingGameItemNodes.length;e++)this.listShowingGameItemNodes[e].scriptComponent.decreaseAhalfPoints();var t=new cc.Node;t.opacity=0,t.scale=2,t.addComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName("effect_flash_icon"),t.setPosition(cc.v2(.25*this.node.getContentSize().width,this.node.getContentSize().height/2)),this.node.addChild(t,-1);var n=cc.spawn(cc.fadeIn(.1),cc.scaleTo(.3,2),cc.moveTo(.3,cc.v2(t.getBoundingBox().width/2,t.getBoundingBox().height/2)));t.runAction(cc.sequence(n,cc.fadeOut(.05),cc.callFunc(this.removeNodeWhenFinish)));var i=new cc.Node;i.opacity=0,i.scale=0,i.addComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName("effect_flash"),this.node.addChild(i,-1),i.runAction(cc.sequence(cc.delayTime(.3),cc.spawn(cc.fadeIn(.1),cc.scaleTo(.3,3)),cc.fadeOut(.1),cc.callFunc(this.removeNodeWhenFinish)))},gotoWinScene:function(){this.unschedule(this.gotoWinScene),cc.log("Go to win scene"),this.clearAllData(),this.node.parent.getComponent("GameLayer").gameScene.getComponent("BounceBall").showWinLayer(this.level,this.node.parent.getComponent("GameLayer").getStar(),this.reward)},removeNodeWhenFinish:function(e){e.parent=null},playEffectDestroyGameItem:function(e,t){var o=e.getPosition(),n=e.getContentSize();if(this.playEffectBrokenBrick(e),t){var i=new cc.Node;i.color=cc.color(250,188,41,255);var s=i.addComponent(cc.Label);s.string="+"+t,s.fontSize=30,s.font=this.getScoreFont,i.setPosition(o),this.node.addChild(i,1);var a=cc.moveBy(1,cc.v2(0,1*n.height)),c=cc.fadeOut(.1),l=cc.callFunc(this.destroyScoreWhenFinish,this);i.runAction(cc.sequence(a,c,l)),this.listEffectNodes.push(i)}},destroyScoreWhenFinish:function(e){for(var t=0;t<this.listEffectNodes.length;t++)if(e===this.listEffectNodes[t]){this.listEffectNodes.splice(t,1),e.destroy();break}},playEffectBrokenBrick:function(e){var t=e.getPosition(),n=e.getContentSize(),i=(t.y+this.center.y)/1280,s=this.getNextAvailableBrokenEffect();s.setPosition(t),e.scriptComponent.isBrick()?(s.color=cc.color(255,205,85,255),s.scale=1):(s.color=cc.Color.WHITE,s.scale=.8),s.getComponent(cc.Animation).play("BrokenAnimationClip");var a=i+.2*Math.random(),c=t.y+o.getRandomNumber(-n.height/2,n.height/2),l=cc.moveBy(a,cc.v2(0,-(c+this.center.y+n.height/2))),r=cc.callFunc(this.removeEffectNodeWhenFinish,this);s.runAction(cc.sequence(l,r))},playEffectBrokenBrick1:function(e){for(var t=e.getPosition(),n=e.getContentSize(),i=(t.y+this.center.y)/1280,s=0;s<20;s++){var a=this.getNextAvailabelBrokenBonusStar(),c=t.x+o.getRandomNumber(-n.width/2,n.width/2),l=t.y+o.getRandomNumber(-n.height/2,n.height/2);a.setPosition(cc.v2(c,l));var r=i+.2*Math.random(),h=cc.moveBy(r,cc.v2(0,-(l+this.center.y+n.height/2))),u=cc.callFunc(this.removeEffectNodeWhenFinish,this);a.runAction(cc.sequence(h,u))}},playEffectBrokenBrick2:function(e){for(var t=e.getPosition(),n=e.getContentSize(),i=(t.y+this.center.y)/1280,s=0;s<40;s++){var a=this.getNextAvailabelBrokenBrick();a.scale=1+.5*Math.random(),a.angle=-o.getRandomNumber(0,180);var c=t.x+o.getRandomNumber(-n.width,n.width),l=t.y+o.getRandomNumber(-n.height,n.height);a.setPosition(cc.v2(c,l));var r=i+.2*Math.random(),h=cc.rotateBy(r,o.getRandomNumber(-90,90));a.runAction(h);var u=o.getRandomNumber(-10,10)*n.width/10,d=[cc.p(0,0),cc.p(u,(1+Math.random())*n.height),cc.p(2*u,-(l+this.center.y+n.height/2))],m=cc.bezierBy(r,d),p=cc.callFunc(this.removeEffectNodeWhenFinish,this);a.runAction(cc.sequence(m,p))}},removeEffectNodeWhenFinish:function(e){e.active=!1},destroyFailedLines:function(){this.checkForShowNewLineBrick();for(var e=[],t=0;t<this.listShowingGameItemNodes.length;t++)(o=this.listShowingGameItemNodes[t]).scriptComponent.rowId<3&&e.push(o);for(t=0;t<e.length;t++){var o;(o=e[t]).scriptComponent.itemId<=5?(o.scriptComponent.destroyBMFont(),this.destroyBrick(o,!0)):6==o.scriptComponent.itemId?this.destroyBonusBall(o,!0):this.removeGameItemFromListShowingGameItem(o),o.removeFromParent(!0),o.destroy()}},playHitBrickSoundEffect:function(){o.isSoundOn()&&cc.audioEngine.play(this.sfxHitBrick,!1)},playBrickBrokenSoundEffect:function(){o.isSoundOn()&&cc.audioEngine.play(this.sfxBrickBroken,!1)},playHitGameItemSoundEffect:function(){o.isSoundOn()&&cc.audioEngine.play(this.sfxHitGameItem,!1)},start:function(){}}),cc._RF.pop()},{GameUtils:"GameUtils"}],BonusBallItem:[function(e,t){"use strict";cc._RF.push(t,"7c9a3FzGMhAsLLs5aG81tuy","BonusBallItem"),cc.Class({extends:cc.Component,properties:{ballCircle:cc.Node},start:function(){var e=cc.scaleTo(.5,1.1),t=cc.scaleTo(.5,.9),o=cc.sequence(e,t);o.setTag(1),this.ballCircle.runAction(cc.repeatForever(o)),this.isFallDown=!1},setInitValue:function(e,t){this.itemId=e,this.rowId=t,this.originalColor=cc.color(255,228,0,255)},playEffectNewArrive:function(){this.node.scale=0,this.node.runAction(cc.scaleTo(.3,1))},destroyBMFont:function(){},isBrick:function(){return!1},onBeginContact:function(){this.isFallDown||(this.isFallDown=!0,this.getComponent(cc.RigidBody).enabledContactListener=!1,this.node.parent.getComponent("BoardGame").destroyBonusBall(this.node),this.schedule(this.scheduleForDestroy,0),this.node.parent.getComponent("BoardGame").playBrickBrokenSoundEffect())},scheduleForDestroy:function(){this.unschedule(this.scheduleForDestroy),this.node.destroy()},decreaseAhalfPoints:function(){}}),cc._RF.pop()},{}],BounceBall:[function(e,t){"use strict";cc._RF.push(t,"097d5NoNS1CyLtflwJre8gu","BounceBall");var o=e("GameUtils");cc.Class({extends:cc.Component,properties:{gameAtlas:cc.SpriteAtlas,titledMap:cc.TiledMap,mainMenuLayer:cc.Node,levelMapLayer:cc.Node,playLayer:cc.Node,winLayer:cc.Node,loseLayer:cc.Node,saveLifeLayer:cc.Node,pauseLayer:cc.Node,shopLayer:cc.Node,sfxBackgroundMusic:cc.AudioClip,sfxHitBrick:cc.AudioClip,sfxStarStamp:cc.AudioClip},onLoad:function(){cc.director.setClearColor(cc.color(36,51,106,0)),o.loadAllGlobalConstant(this.gameAtlas,this.titledMap),this.titledMap.node.parent=null,this.listLayers=[this.mainMenuLayer,this.levelMapLayer,this.playLayer,this.winLayer,this.loseLayer],this.pauseLayer.active=!1,this.saveLifeLayer.active=!1,this.shopLayer.active=!1,this.backgroundMusicRef=-1},start:function(){this.activeLayerAndReloadData(this.mainMenuLayer)},activeLayerAndReloadData:function(e){for(var t=0;t<this.listLayers.length;t++)this.listLayers[t]===e?e.active=!0:this.listLayers[t].active=!1},showLevelMapLayer:function(){this.activeLayerAndReloadData(this.levelMapLayer),this.levelMapLayer.getComponent("LevelMap").refreshData()},showMainMenuLayer:function(){this.activeLayerAndReloadData(this.mainMenuLayer)},showGameLayer:function(e){this.activeLayerAndReloadData(this.playLayer),this.playLayer.getComponent("GameLayer").loadData(e)},showWinLayer:function(e,t,o){this.activeLayerAndReloadData(this.winLayer),this.winLayer.getComponent("WinLayer").loadData(e,t,o)},showLoseLayer:function(e){this.activeLayerAndReloadData(this.loseLayer),this.loseLayer.getComponent("LoseLayer").loadData(e)},showSaveLife:function(e){this.saveLifeLayer.active=!0,this.saveLifeLayer.getComponent("SaveLifeLayer").startCountDown(e)},showPauseLayer:function(e){this.pauseLayer.active=!0,this.pauseLayer.getComponent("PauseLayer").loadData(e)},showShopLayer:function(){this.shopLayer.active=!0,this.shopLayer.getComponent("ShopLayer").loadData()},updateDisplayMoney:function(){this.levelMapLayer.active&&this.levelMapLayer.getComponent("LevelMap").updateDisplayMoney(),this.playLayer.active&&this.playLayer.getComponent("GameLayer").updateDisplayMoney()},playMusicBackgroundEffect:function(e){e?this.backgroundMusicRef<0&&(this.backgroundMusicRef=cc.audioEngine.play(this.sfxBackgroundMusic,!0)):this.backgroundMusicRef>=0&&(cc.audioEngine.stop(this.backgroundMusicRef),this.backgroundMusicRef=-1)},playButtonClickSoundEffect:function(){o.isSoundOn()&&cc.audioEngine.play(this.sfxHitBrick,!1)},playStarStampSoundEffect:function(){o.isSoundOn()&&cc.audioEngine.play(this.sfxStarStamp,!1)}}),cc._RF.pop()},{GameUtils:"GameUtils"}],DevideBallItem:[function(e,t){"use strict";cc._RF.push(t,"1c07d98i7ZGz6gB9gbql259","DevideBallItem");var o=e("GameUtils");cc.Class({extends:cc.Component,properties:{displayNode:cc.Node},onLoad:function(){this.node.getComponent(cc.RigidBody).name="5",this.randomAngle=o.getRandomNumber(30,60)*Math.PI/180},start:function(){var e=cc.scaleTo(.5,1.1),t=cc.scaleTo(.5,.9),o=cc.sequence(e,t);o.setTag(1),this.displayNode.runAction(cc.repeatForever(o))},setInitValue:function(e,t){this.itemId=e,this.rowId=t,this.isFired=!1},playEffectNewArrive:function(){this.node.scale=0,this.node.runAction(cc.scaleTo(.3,1))},destroyBMFont:function(){},isBrick:function(){return!1},destroyIfFired:function(){this.isFired&&(this.getComponent(cc.RigidBody).enabledContactListener=!1,this.schedule(this.scheduleForDestroy,0))},onBeginContact:function(){this.isFired=!0,this.getComponent(cc.RigidBody).enabledContactListener=!1},scheduleForDestroy:function(){this.unschedule(this.scheduleForDestroy),this.node.parent.getComponent("BoardGame").removeGameItemFromListShowingGameItem(this.node),this.node.destroy()},decreaseAhalfPoints:function(){}}),cc._RF.pop()},{GameUtils:"GameUtils"}],GameLayer:[function(e,t){"use strict";cc._RF.push(t,"fc9ef6zBVZBbLoYb/ja4Qn3","GameLayer");var o=e("GameUtils");cc.Class({extends:cc.Component,properties:{gameScene:cc.Node,labelDiamonds:cc.Label,labelLevel:cc.Label,labelRemainRows:cc.Label,labelScore:cc.Label,progressScore:cc.ProgressBar,boardGameNode:cc.Node,buttonStopBall:cc.Node,buttonBoosterFlash:cc.Node,buttonMoreBalls:cc.Node},onLoad:function(){var e,t=720/(e=cc.winSize).width*e.height,o=t-208,n=Math.min(o-88,880),i=Math.ceil((880-n)/80),s=880-80*i;this.boardGameNode.setContentSize(cc.size(720,s)),this.boardGameNode.y=o-s/2-t/2;var a=this.boardGameNode.y-s/2-44;this.buttonStopBall.y=a,this.buttonBoosterFlash.y=a,this.buttonMoreBalls.y=a,this.boardGameNode.getComponent("BoardGame").setCutRows(i)},start:function(){},loadData:function(e){var t=o.loadLevelConfig(e);this.boardGameNode.getComponent("BoardGame").loadInitGameItemOnTheBoard(t),this.level=t.level,this.labelLevel.string=t.level,this.updateRemainRows(),this.labelScore.string=0,this.progressScore.getComponent("ProgressScore").initData(t.star2,t.star3),this.buttonStopBall.active=!1,this.buttonBoosterFlash.active=!0,this.buttonMoreBalls.active=!0,this.buttonBoosterFlash.getComponent(cc.Button).enabled=!0,this.buttonMoreBalls.getComponent(cc.Button).enabled=!0,this.labelDiamonds.getComponent(cc.Label).string=o.getTotalDiamond()},updateDisplayMoney:function(){this.labelDiamonds.getComponent(cc.Label).string=o.getTotalDiamond()},clearAllData:function(){this.boardGameNode.getComponent("BoardGame").clearAllData()},updateTotalDiamond:function(){this.labelDiamonds.string=o.getTotalDiamond()},updateRemainRows:function(){var e=this.boardGameNode.getComponent("BoardGame").getRemainRows();e>0?(this.labelRemainRows.node.parent.active=!0,this.labelRemainRows.string=e):this.labelRemainRows.node.parent.active=!1},updateTotalScore:function(e){this.labelScore.string=e,this.progressScore.getComponent("ProgressScore").updateScore(e)},getStar:function(){return this.progressScore.getComponent("ProgressScore").getStar()},resumeToPlay:function(){this.boardGameNode.getComponent("BoardGame").setPause(!1)},buttonPauseClick:function(){cc.log("buttonPauseClick"),this.boardGameNode.getComponent("BoardGame").setPause(!0),this.gameScene.getComponent("BounceBall").showPauseLayer(this.level),this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},buttonShopClick:function(){cc.log("buttonShopClick"),this.gameScene.getComponent("BounceBall").showShopLayer(),this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},setStopBallButtonVisible:function(e){this.buttonStopBall.active=e,this.buttonBoosterFlash.active=!e,this.buttonMoreBalls.active=!e,this.buttonStopBall.getComponent(cc.Button).enabled=!0,this.buttonBoosterFlash.getComponent(cc.Button).enabled=!0,this.buttonMoreBalls.getComponent(cc.Button).enabled=!0,o.applyColorForAllChildrenNode(this.buttonMoreBalls,cc.Color.WHITE)},disableBoosters:function(){this.buttonBoosterFlash.getComponent(cc.Button).enabled=!1,this.buttonMoreBalls.getComponent(cc.Button).enabled=!1},buttonStopBallClick:function(){cc.log("buttonStopBallClick"),this.buttonStopBall.getComponent(cc.Button).enabled=!1,this.boardGameNode.getComponent("BoardGame").stopBallMoving(),this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},buttonBoosterFlashClick:function(){cc.log("buttonBoosterFlashClick"),o.getTotalDiamond()>=o.BOOSTER_FLASH_PRICE&&(o.updateChangeDiamond(-o.BOOSTER_FLASH_PRICE),this.boardGameNode.getComponent("BoardGame").usingBoosterFlash(),this.labelDiamonds.getComponent(cc.Label).string=o.getTotalDiamond(),this.playEffectMinusDiamond(this.buttonBoosterFlash.getPosition(),-o.BOOSTER_FLASH_PRICE)),this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},buttonMoreBallsClick:function(){cc.log("buttonMoreBallsClick"),this.buttonMoreBalls.getComponent(cc.Button).enabled=!1,o.applyColorForAllChildrenNode(this.buttonMoreBalls,cc.color(124,124,124,255)),o.getTotalDiamond()>=o.BOOSTER_ADD_BALL_PRICE&&(o.updateChangeDiamond(-o.BOOSTER_ADD_BALL_PRICE),this.boardGameNode.getComponent("BoardGame").usingBoosterAddMoreBalls(),this.labelDiamonds.getComponent(cc.Label).string=o.getTotalDiamond(),this.playEffectMinusDiamond(this.buttonMoreBalls.getPosition(),-o.BOOSTER_ADD_BALL_PRICE)),this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},playEffectMinusDiamond:function(e,t){var n=new cc.Node,i=n.addComponent(cc.Label);i.fontSize=28,i.string=t,n.setPosition(e),this.node.addChild(n);var s=new cc.Node;s.addComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName("icon_diamond"),s.scale=.5,s.setPosition(cc.v2(n.getBoundingBox().width/2+s.getBoundingBox().width/2,5)),n.addChild(s);var a=cc.moveBy(.5,cc.v2(0,100)),c=cc.sequence(cc.delayTime(.5),cc.fadeOut(.5),cc.callFunc(this.removeNodeWhenFinish,this));n.runAction(cc.spawn(a,c))},removeNodeWhenFinish:function(e){e.parent=null},watchAdClicked:function(){this.boardGameNode.getComponent("BoardGame").destroyFailedLines()}}),cc._RF.pop()},{GameUtils:"GameUtils"}],GameUtils:[function(e,t){"use strict";cc._RF.push(t,"063c0tCZWpCmKcWcY3lRoah","GameUtils");var o,n=null,i=80,s=80,a=!0,c=!0,l=null,r=0,h=[],u=[cc.color(250,188,41),cc.color(254,132,47),cc.color(239,74,46),cc.color(235,76,96),cc.color(254,28,98),cc.color(0,238,118),cc.color(129,108,247),cc.color(168,84,125),cc.color(79,176,228)];function d(e,t){var o=Math.floor(t/s),n=Math.floor(e/i);return cc.v2(o,n)}function m(e,t,o,n){this.itemId=e,this.initValue=t,this.rowId=o,this.columnId=n}function p(e,t){cc.log("group NAME: "+t.getGroupName()),this.level=e,this.initBalls=parseInt(t._properties.INIT_BALLS),this.star2=parseInt(t._properties.STAR_2),this.star3=parseInt(t._properties.STAR_3),this.reward=parseInt(t._properties.REWARD),this.listItems=[];for(var o=t.getObjects(),n=0;n<o.length;n++){var i=o[n];cc.log("objectData = ",i);var s=i.gid,a=i.VALUE,c=i.x,l=i.y,r=i.width,h=i.height,u=d(c+r/2,t.node.getContentSize().height-l+h/2),p=new m(s,a,u.x,u.y);this.listItems.push(p)}}function g(e,t){try{if(null!=e&&e.length>0){var o=cc.sys.localStorage.getItem(e);if(null!=o)return o;if(null!=t)return t}}catch(n){cc.log(n.getMessage())}return null}function f(e,t){cc.sys.localStorage.setItem(e,t)}function B(e){return e>9?e.toString():"0"+e}var y=function(e){if(null==e)return!1;if("boolean"==typeof e)return!0===e;if("string"==typeof e){if(""==e)return!1;if("true"==(e=e.replace(/^\s+|\s+$/g,"")).toLowerCase()||"yes"==e.toLowerCase())return!0;e=(e=e.replace(/,/g,".")).replace(/^\s*\-\s*/g,"-")}return!isNaN(e)&&0!=parseFloat(e)};t.exports={getTotalLevel:function(){var e=0;return n&&(e=n.getObjectGroups().length,cc.log("totalLevel = "+e)),e},loadLevelConfig:function(e){if(n){var t=n.getObjectGroups();cc.log("listGroups = ",t);for(var o="Level_"+e,i=0;i<t.length;i++)if(t[i],t[i].getGroupName(),o===t[i].getGroupName())return cc.log("listGroups[i="+i+"] = ",t[i]),new p(e,t[i])}return null},getBrickColorByHP:function(e){return e<10?u[0]:e<20?u[1]:e<40?u[2]:e<60?u[3]:e<80?u[4]:e<100?u[5]:e<150?u[6]:e<300?u[8]:u[9]},getValueForSettingKey:g,setValueForSettingKey:f,isMusicOn:function(){return y(a)},setMusic:function(e){a=e,f("isMusicOn",e)},isSoundOn:function(){return y(c)},setSound:function(e){c=e,f("isSoundOn",e)},loadAllGlobalConstant:function(e,t){c=g("isSoundOn",!0),a=g("isMusicOn",!0),r=parseInt(g("diamonds",500)),h=JSON.parse(g("achievements",JSON.stringify([]))),o=g("lastTimeGetReward",0),l=e,n=t},getSpriteFrameByName:function(e){return l.getSpriteFrame(e)},getTotalDiamond:function(){return r},updateChangeDiamond:function(e){return f("diamonds",r+=e),r},getListAchievements:function(){return h},setNewAchievement:function(e,t){e-1<h.length?t>h[e-1]&&(h[e-1]=t,f("achievements",JSON.stringify(h))):e-1==h.length?(h.push(t),f("achievements",JSON.stringify(h))):cc.error("Wrong data")},getTimeToGetBonusReward:function(){var e=Date.now()/1e3-o;return e>=10800?0:10800-e},updateTimeGetBonusReward:function(){f("lastTimeGetReward",o=Date.now()/1e3)},getTimeString:function(e){var t=Math.floor(e/3600),o=e-3600*t,n=Math.floor(o/60);o-=60*n;var i=Math.floor(o);return B(t)+":"+B(n)+":"+B(i)},getRandomNumber:function(e,t){return e==t?e:Math.floor(Math.random()*(t-e+1))+e},applyColorForAllChildrenNode:function(e,t){if(e&&t){var o=e.children;if(o)for(var n=0;n<o.length;n++)o[n].color=t}},BONUS_REWARD_DIAMOND:10,BONUS_REWARD_INTERVAL:10800,BOOSTER_ADD_BALL_PRICE:30,BOOSTER_FLASH_PRICE:30,SKIP_LEVEL_PRICE:100},cc._RF.pop()},{}],GlobalConstant:[function(e,t){"use strict";cc._RF.push(t,"1928eP2C2hCiJdXZKwTDVEt","GlobalConstant"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],LevelMap:[function(e,t){"use strict";cc._RF.push(t,"ac8b6tkhl5ELLfjXHCKV6e9","LevelMap");var o=e("GameUtils"),n=cc.Class({name:"LevelStage",properties:{level:0,itemStars:0,isUnlock:!1}});cc.Class({extends:cc.Component,properties:{gameScene:cc.Node,items:{default:[],type:n},levelStagePrefab:cc.Prefab,scrollView:{default:null,type:cc.ScrollView},labelTotalDiamond:cc.Node,labelProgress:cc.Node},onLoad:function(){var e=cc.instantiate(this.levelStagePrefab);this.listLevelStageNodes=[];var t=o.getTotalLevel(),n=t%4==0?t/4:Math.floor(t/4)+1,i=(720-4*e.width)/5;this.scrollView.content.height=n*(e.height+i)+i;for(var s=-1.5*(i+e.width),a=o.getListAchievements(),c=0;c<t;c++){var l=Math.floor(c/4),r=c%4,h=cc.instantiate(this.levelStagePrefab);h.setPosition(s+r*(i+e.width),-e.height*(.5+l)-i*(l+1)),this.scrollView.content.addChild(h),c<a.length?h.getComponent("LevelStageTemplate").loadLevelStage(c+1,a[c]):c==a.length?h.getComponent("LevelStageTemplate").loadLevelStage(c+1,0):h.getComponent("LevelStageTemplate").loadLevelStage(c+1,-1);var u=new cc.Component.EventHandler;u.target=this,u.component="LevelMap",u.handler="onLevelClick",u.customEventData=c+1,h.getComponent(cc.Button).clickEvents.push(u),this.listLevelStageNodes.push(h)}this.labelTotalDiamond.getComponent(cc.Label).string=o.getTotalDiamond();var d=o.getTotalLevel(),m=Math.min(o.getListAchievements().length,d);this.labelProgress.getComponent(cc.Label).string="Stage:"+m+"/"+d},updateDisplayMoney:function(){this.labelTotalDiamond.getComponent(cc.Label).string=o.getTotalDiamond()},refreshData:function(){for(var e=o.getListAchievements(),t=0;t<this.listLevelStageNodes.length;t++){var n=this.listLevelStageNodes[t];t<e.length?n.getComponent("LevelStageTemplate").loadLevelStage(t+1,e[t]):t==e.length?n.getComponent("LevelStageTemplate").loadLevelStage(t+1,0):n.getComponent("LevelStageTemplate").loadLevelStage(t+1,-1)}this.labelTotalDiamond.getComponent(cc.Label).string=o.getTotalDiamond();var i=o.getTotalLevel(),s=Math.min(o.getListAchievements().length,i);this.labelProgress.getComponent(cc.Label).string="Stage:"+s+"/"+i},onLevelClick:function(e,t){cc.log("onLevelClick: "+t),this.gameScene.getComponent("BounceBall").showGameLayer(t),this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},onBackClick:function(){this.gameScene.getComponent("BounceBall").showMainMenuLayer(),this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},onBtnShopClick:function(){this.gameScene.getComponent("BounceBall").showShopLayer(),this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},start:function(){}}),cc._RF.pop()},{GameUtils:"GameUtils"}],LevelStageTemplate:[function(e,t){"use strict";cc._RF.push(t,"354adHIfldLT5FhUGNqAXnO","LevelStageTemplate");var o=e("GameUtils");cc.Class({extends:cc.Component,properties:{level:0,levelUnlockNode:cc.Node,levelLockNode:cc.Node,labelLevel:cc.Label,listStars:{default:[],type:cc.Sprite}},loadLevelStage:function(e,t){if(this.level=e,this.star=t,t>=0){this.getComponent(cc.Button).interactable=!0,this.levelLockNode.active=!1,this.levelUnlockNode.active=!0,this.labelLevel.string=e;for(var n=0;n<t;n++)this.listStars[n].spriteFrame=o.getSpriteFrameByName("star_orange")}else this.getComponent(cc.Button).interactable=!1,this.levelLockNode.active=!0,this.levelUnlockNode.active=!1},onClickButton:function(){cc.log("onClickButton")},start:function(){}}),cc._RF.pop()},{GameUtils:"GameUtils"}],Loading:[function(e,t){"use strict";cc._RF.push(t,"d18c1Kaaa5DrbeGgHdv0Osd","Loading");var o=e("GameUtils");cc.Class({extends:cc.Component,properties:{gameAtlas:cc.SpriteAtlas},onLoad:function(){cc.director.setClearColor(cc.color(36,51,106,0)),o.loadAllGlobalConstant(this.gameAtlas)},start:function(){o.getTotalLevel(function(e){cc.log("total level: "+e),cc.director.loadScene("MainMenu")})},onLoadTileMap:function(e){var t=this;cc.loader.loadRes(e,cc.TiledMapAsset,function(e,o){e?cc.error(e):t.onCreateTileMap(o)})},onCreateTileMap:function(e){var t=(new cc.Node).addComponent(cc.TiledMap);t.tmxAsset=e;for(var o=t.getObjectGroups(),n=0;n<o.length;++n)cc.log("groups: "+o[n]),this.readLayerValue(t,o[n])},readLayerValue:function(e,t){cc.log("---------------------"),cc.log("group NAME: "+t.getGroupName()),cc.log("init balls: "+t._properties.INIT_BALLS);var o=t.getObjects();cc.log("list titles"+o.length);for(var n=0;n<o.length;n++){var i=o[n];cc.log("object "+n+" "+i._properties.VALUE);var s=i._properties.gid;cc.log("object gid: "+s);var a=e.getPropertiesForGID(s).ITEM;cc.log("object gid ITEM : "+a)}}}),cc._RF.pop()},{GameUtils:"GameUtils"}],LoseLayer:[function(e,t){"use strict";cc._RF.push(t,"fd0daF9e9dIKa24pV5gubU0","LoseLayer");var o=e("GameUtils");cc.Class({extends:cc.Component,properties:{gameScene:cc.Node,buttonSound:cc.Button,buttonMusic:cc.Button,buttonSkipLevel:cc.Button},loadData:function(e){o.isSoundOn()||(this.buttonSound.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName("btn_sound_off")),o.isMusicOn()||(this.buttonMusic.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName("btn_music_off")),this.level=e,this.level<o.getTotalLevel()?(this.buttonSkipLevel.getComponent(cc.Button).enabled=!0,o.applyColorForAllChildrenNode(this.buttonSkipLevel,cc.Color.WHITE)):(this.buttonSkipLevel.getComponent(cc.Button).enabled=!1,o.applyColorForAllChildrenNode(this.buttonSkipLevel,cc.color(124,124,124,255)))},start:function(){},onBtnSoundClicked:function(){var e=!o.isSoundOn();o.setSound(e),this.buttonSound.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName(e?"btn_sound_on":"btn_sound_off"),e&&this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},onBtnMusicClicked:function(){var e=!o.isMusicOn();o.setMusic(e),this.buttonMusic.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName(e?"btn_music_on":"btn_music_off"),this.gameScene.getComponent("BounceBall").playMusicBackgroundEffect(e)},onBtnRestart:function(){cc.log("onBtnRestart"),this.gameScene.getComponent("BounceBall").showGameLayer(this.level),this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},onBtnHomeClick:function(){cc.log("onBtnHomeClick"),this.gameScene.getComponent("BounceBall").showLevelMapLayer(),this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},onBtnSkipLevelClick:function(){if(cc.log("onBtnRestart"),o.getTotalDiamond()>=o.SKIP_LEVEL_PRICE){o.updateChangeDiamond(-o.SKIP_LEVEL_PRICE);var e=o.getListAchievements();this.level<e.length||o.setNewAchievement(this.level,0),this.gameScene.getComponent("BounceBall").showGameLayer(this.level+1)}this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()}}),cc._RF.pop()},{GameUtils:"GameUtils"}],MainMenu:[function(e,t){"use strict";cc._RF.push(t,"83a4cksrFxHDb772Kodjal2","MainMenu");var o=e("GameUtils");cc.Class({extends:cc.Component,properties:{gameScene:cc.Node,buttonPlay:cc.Button,buttonSound:cc.Button,buttonMusic:cc.Button,buttonRateApp:cc.Button,buttonShop:cc.Button},onLoad:function(){o.isSoundOn()||(this.buttonSound.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName("btn_sound_off")),o.isMusicOn()?this.gameScene.getComponent("BounceBall").playMusicBackgroundEffect(!0):this.buttonMusic.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName("btn_music_off")},start:function(){},onBtnPlayClicked:function(){console.log("onBtnPlayClicked"),this.gameScene.getComponent("BounceBall").showLevelMapLayer(),this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},onBtnSoundClicked:function(){var e=!o.isSoundOn();o.setSound(e),this.buttonSound.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName(e?"btn_sound_on":"btn_sound_off"),this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},onBtnMusicClicked:function(){var e=!o.isMusicOn();o.setMusic(e),this.buttonMusic.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName(e?"btn_music_on":"btn_music_off"),this.gameScene.getComponent("BounceBall").playMusicBackgroundEffect(e)},onBtnRateAppClicked:function(){console.log("onBtnRateAppClicked"),this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},onBtnShopClicked:function(){console.log("onBtnShopClicked"),this.gameScene.getComponent("BounceBall").showShopLayer(),this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()}}),cc._RF.pop()},{GameUtils:"GameUtils"}],PauseLayer:[function(e,t){"use strict";cc._RF.push(t,"11cdeAPcshCobX9w577A3LP","PauseLayer");var o=e("GameUtils");cc.Class({extends:cc.Component,properties:{gameScene:cc.Node,gameLayer:cc.Node,buttonSound:cc.Button,buttonMusic:cc.Button},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(){return!0},this.node)},start:function(){},loadData:function(e){this.level=e,o.isSoundOn()||(this.buttonSound.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName("btn_sound_off")),o.isMusicOn()||(this.buttonMusic.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName("btn_music_off"))},onBtnSoundClicked:function(){var e=!o.isSoundOn();o.setSound(e),this.buttonSound.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName(e?"btn_sound_on":"btn_sound_off"),e&&this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},onBtnMusicClicked:function(){var e=!o.isMusicOn();o.setMusic(e),this.buttonMusic.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName(e?"btn_music_on":"btn_music_off"),this.gameScene.getComponent("BounceBall").playMusicBackgroundEffect(e)},onBtnRestartClick:function(){cc.log("onBtnRestart"),this.gameLayer.getComponent("GameLayer").resumeToPlay(),this.gameLayer.getComponent("GameLayer").clearAllData(),this.gameScene.getComponent("BounceBall").showGameLayer(this.level),this.node.active=!1,this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},onBtnHomeClick:function(){cc.log("onBtnHomeClick"),this.gameLayer.getComponent("GameLayer").resumeToPlay(),this.gameLayer.getComponent("GameLayer").clearAllData(),this.gameScene.getComponent("BounceBall").showLevelMapLayer(),this.node.active=!1,this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},onBtnContinueClick:function(){cc.log("onBtnContinueClick"),this.node.active=!1,this.gameLayer.getComponent("GameLayer").resumeToPlay(),this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()}}),cc._RF.pop()},{GameUtils:"GameUtils"}],ProgressScore:[function(e,t){"use strict";cc._RF.push(t,"44af93DbctEB6+xLq9vfad5","ProgressScore");var o=e("GameUtils");cc.Class({extends:cc.Component,properties:{star2Sprite:cc.Sprite,star3Sprite:cc.Sprite},start:function(){},initData:function(e,t){this.star2Score=e,this.star3Score=t,this.star=1,this.node.getComponent(cc.ProgressBar).progress=0,this.star2Sprite.spriteFrame=o.getSpriteFrameByName("star_blue_small"),this.star3Sprite.spriteFrame=o.getSpriteFrameByName("star_blue_small")},updateScore:function(e){var t=0;e<this.star2Score?(this.node.getComponent(cc.ProgressBar).progress=e/this.star2Score*.5,t=1):e>=this.star3Score?(this.node.getComponent(cc.ProgressBar).progress=1,t=3):(t=2,this.node.getComponent(cc.ProgressBar).progress=(e-this.star2Score)/(this.star3Score-this.star2Score)*.5+.5),t>this.star&&(this.star=t,t>=2&&(this.star2Sprite.spriteFrame=o.getSpriteFrameByName("star_orange_small")),3==t&&(this.star3Sprite.spriteFrame=o.getSpriteFrameByName("star_orange_small")))},getStar:function(){return this.star}}),cc._RF.pop()},{GameUtils:"GameUtils"}],RebounceBallItem:[function(e,t){"use strict";cc._RF.push(t,"d3f67ewGTpE1a+1E3WGcfV/","RebounceBallItem"),cc.Class({extends:cc.Component,properties:{displayNode:cc.Node},onLoad:function(){this.node.getComponent(cc.RigidBody).name="4"},start:function(){var e=cc.scaleTo(.5,1.1),t=cc.scaleTo(.5,.9),o=cc.sequence(e,t);o.setTag(1),this.displayNode.runAction(cc.repeatForever(o))},setInitValue:function(e,t){this.itemId=e,this.rowId=t,this.isFired=!1},playEffectNewArrive:function(){this.node.scale=0,this.node.runAction(cc.scaleTo(.3,1))},destroyBMFont:function(){},isBrick:function(){return!1},destroyIfFired:function(){this.isFired&&(this.getComponent(cc.RigidBody).enabledContactListener=!1,this.schedule(this.scheduleForDestroy,0))},onBeginContact:function(){this.isFired=!0,this.getComponent(cc.RigidBody).enabledContactListener=!1},scheduleForDestroy:function(){this.unschedule(this.scheduleForDestroy),this.node.parent.getComponent("BoardGame").removeGameItemFromListShowingGameItem(this.node),this.node.destroy()},decreaseAhalfPoints:function(){}}),cc._RF.pop()},{}],RootBall:[function(e,t){"use strict";cc._RF.push(t,"70a9dIzcW9CQ6AAO5nu5tLe","RootBall"),cc.Class({extends:cc.Component,properties:{remainBallDisplay:{default:null,type:cc.Label}},start:function(){},setRemainBallNumber:function(e){this.remainBallDisplay.string="X"+e,e<=0&&this.node.destroy()}}),cc._RF.pop()},{}],SaveLifeLayer:[function(e,t){"use strict";cc._RF.push(t,"3cdb5QgDepEcYcBbFlk5OFS","SaveLifeLayer"),cc.Class({extends:cc.Component,properties:{gameScene:cc.Node,gameLayer:cc.Node,labelTimeCountDown:cc.Label,progressTimer:cc.ProgressBar},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(){return!0},this.node)},start:function(){},startCountDown:function(e){this.level=e,this.progressTimer.progress=1,this.startTime=5,this.labelTimeCountDown.string=this.startTime},buttonWatchAdClick:function(){this.gameLayer.getComponent("GameLayer").watchAdClicked(),this.node.active=!1,this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},update:function(e){this.startTime-=e,this.startTime>0?(this.labelTimeCountDown.string=Math.floor(this.startTime)+1,this.progressTimer.progress=this.startTime/5):(cc.log("close dialog"),this.node.active=!1,this.level&&this.gameScene.getComponent("BounceBall").showLoseLayer(this.level))}}),cc._RF.pop()},{}],ShopLayer:[function(e,t){"use strict";cc._RF.push(t,"6af5000P4tCZqRNvN5TL0f9","ShopLayer");var o=e("GameUtils");cc.Class({extends:cc.Component,properties:{gameScene:cc.Node,backgroundNode:cc.Node,labelCountDown:cc.Label,labelBonusReward:cc.Label,progressTimer:cc.ProgressBar,buttonWatchAd:cc.Node},onLoad:function(){this.labelBonusReward.string="+"+o.BONUS_REWARD_DIAMOND;var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(t){var o=t.getTouches()[0].getLocation(),n=e.node.convertToNodeSpaceAR(o);return e.backgroundNode.getBoundingBox().contains(n)||(e.node.active=!1),!0},this.node)},loadData:function(){},start:function(){this.countDownTime=o.getTimeToGetBonusReward(),this.labelBonusReward.string="+"+o.BONUS_REWARD_DIAMOND},update:function(){var e=o.getTimeToGetBonusReward();if(e!=this.countDownTime){this.countDownTime=e,this.labelCountDown.string=o.getTimeString(this.countDownTime);var t=0==this.countDownTime;this.buttonWatchAd.getComponent(cc.Button).interactable=t,t?(this.buttonWatchAd.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName("btn_blue"),this.buttonWatchAd.color=cc.Color.WHITE):(this.buttonWatchAd.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName("btn_play"),this.buttonWatchAd.color=cc.color(115,115,115)),this.progressTimer.getComponent(cc.ProgressBar).progress=this.countDownTime/o.BONUS_REWARD_INTERVAL}},buttonWatchAdClick:function(){o.updateTimeGetBonusReward(),o.updateChangeDiamond(o.BONUS_REWARD_DIAMOND),this.gameScene.getComponent("BounceBall").updateDisplayMoney(),this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect(),this.node.active=!1}}),cc._RF.pop()},{GameUtils:"GameUtils"}],TriangleItem:[function(e,t){"use strict";cc._RF.push(t,"ea026iOOyRCeoKPIanT9MFG","TriangleItem");var o=e("GameUtils");cc.Class({extends:cc.Component,properties:{labelCounter:{default:null,type:cc.Label},labelCounterNode:cc.Node,displayNode:cc.Node},onLoad:function(){this.labelCounter.string="22";var e=cc.scaleTo(.03,1.1),t=cc.scaleTo(.03,.9),o=cc.scaleTo(.03,1);this.sequence=cc.sequence(e,t,o),this.sequence.setTag(1)},setInitValue:function(e,t,n){this.itemId=e,this.rowId=t,this.curValue=n,this.labelCounter.string=n,this.originalColor=o.getBrickColorByHP(this.curValue),this.displayNode.color=this.originalColor;var i=this.node.parent.parent.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.labelCounterNode.getPosition()));this.node.removeChild(this.labelCounterNode),this.node.parent.parent.addChild(this.labelCounterNode),this.labelCounterNode.setPosition(i),this.labelCounterNode.active=!0},moveDownALine:function(e,t){this.node.runAction(cc.moveBy(e,t)),this.labelCounterNode.runAction(cc.moveBy(e,t))},playEffectNewArrive:function(){this.node.scale=0,this.node.runAction(cc.scaleTo(.3,1)),this.labelCounterNode.scale=0,this.labelCounterNode.runAction(cc.scaleTo(.3,1))},destroyBMFont:function(){null!=this.labelCounterNode&&(this.labelCounterNode.destroy(),this.labelCounterNode=null)},isBrick:function(){return!0},onBeginContact:function(){this.curValue--,this.curValue>0?(this.labelCounter.string=this.curValue,this.displayNode.color=o.getBrickColorByHP(this.curValue),this.displayNode.stopActionByTag(1),this.displayNode.setScale(1),this.displayNode.runAction(this.sequence),this.node.parent.getComponent("BoardGame").playHitBrickSoundEffect()):0==this.curValue&&(this.getComponent(cc.RigidBody).enabledContactListener=!1,this.node.parent.getComponent("BoardGame").destroyBrick(this.node),this.labelCounter.string="",this.schedule(this.scheduleForDestroy,0),this.node.parent.getComponent("BoardGame").playBrickBrokenSoundEffect())},scheduleForDestroy:function(){this.unschedule(this.scheduleForDestroy),this.destroyBMFont(),this.node.destroy()},onEndContact:function(){},start:function(){},decreaseAhalfPoints:function(){var e=Math.round(this.curValue/2);this.curValue-=e,this.curValue>0?(this.labelCounter.string=this.curValue,this.displayNode.color=o.getBrickColorByHP(this.curValue)):this.schedule(this.scheduleForDestroyAndAlertToBoardGame,0)},scheduleForDestroyAndAlertToBoardGame:function(){this.unschedule(this.scheduleForDestroyAndAlertToBoardGame),this.getComponent(cc.RigidBody).enabledContactListener=!1,this.node.parent.getComponent("BoardGame").destroyBrick(this.node,!0),this.destroyBMFont(),this.node.destroy()}}),cc._RF.pop()},{GameUtils:"GameUtils"}],WinLayer:[function(e,t){"use strict";cc._RF.push(t,"fb28cMDJKhJ3Z2NUqW4KnzG","WinLayer");var o=e("GameUtils");cc.Class({extends:cc.Component,properties:{gameScene:cc.Node,labelRewardPrice:cc.Label,listStars:{default:[],type:cc.Sprite},buttonSound:cc.Button,buttonMusic:cc.Button,buttonNext:cc.Button,buttonDoubleReward:cc.Button},onLoad:function(){this.listEffectStars=[]},start:function(){},loadData:function(e,t,n){o.isSoundOn()||(this.buttonSound.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName("btn_sound_off")),o.isMusicOn()||(this.buttonMusic.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName("btn_music_off")),this.labelRewardPrice.string="+ "+n+" diamonds",this.level=e,this.reward=n,this.star=t;for(var i=0;i<this.listStars.length;i++)this.listStars[i].spriteFrame=o.getSpriteFrameByName("star_gray");for(i=0;i<this.listEffectStars.length;i++)this.listEffectStars[i].destroy();this.listEffectStars=[],o.setNewAchievement(e,t),o.updateChangeDiamond(n),this.buttonNext.enabled=e<o.getTotalLevel(),o.applyColorForAllChildrenNode(this.buttonNext,this.buttonNext.enabled?cc.Color.WHITE:cc.color(124,124,124,255)),this.buttonDoubleReward.enabled=n>0,this.playStarEffect()},playStarEffect:function(){for(var e=.25,t=0;t<this.star;t++){e+=.6;for(var n=this.listStars[t],i=0;i<1;i++){var s=new cc.Node;s.addComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName("star_orange"),s.opacity=0,s.scale=3,s.setPosition(n.node.getPosition()),s.name=t+"",this.node.addChild(s,1);var a=cc.delayTime(e),c=cc.callFunc(this.playGetStarSound,this),l=cc.fadeIn(.15),r=cc.callFunc(this.showStarArrivedEffect,this),h=cc.fadeOut(.06),u=cc.sequence(a,c,l,r,h),d=cc.delayTime(e),m=cc.scaleTo(.15,1),p=cc.scaleTo(.06,1.2),g=cc.sequence(d,m,p);s.runAction(u),s.runAction(g),this.listEffectStars.push(s)}}},playGetStarSound:function(){this.gameScene.getComponent("BounceBall").playStarStampSoundEffect()},showStarArrivedEffect:function(e){this.listStars[e.name].spriteFrame=o.getSpriteFrameByName("star_orange")},onBtnSoundClicked:function(){var e=!o.isSoundOn();o.setSound(e),this.buttonSound.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName(e?"btn_sound_on":"btn_sound_off"),e&&this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},onBtnMusicClicked:function(){var e=!o.isMusicOn();o.setMusic(e),this.buttonMusic.getComponent(cc.Sprite).spriteFrame=o.getSpriteFrameByName(e?"btn_music_on":"btn_music_off"),this.gameScene.getComponent("BounceBall").playMusicBackgroundEffect(e)},onBtnRestart:function(){cc.log("onBtnRestart"),this.gameScene.getComponent("BounceBall").showGameLayer(this.level),this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},onBtnHomeClick:function(){cc.log("onBtnHomeClick"),this.gameScene.getComponent("BounceBall").showLevelMapLayer(),this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},onBtnNextClick:function(){cc.log("onBtnNextClick"),this.gameScene.getComponent("BounceBall").showGameLayer(this.level+1),this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()},onBtnDoubleRewardClick:function(){cc.log("onBtnDoubleRewardClick"),this.buttonDoubleReward.getComponent(cc.Button).enabled=!1,o.applyColorForAllChildrenNode(this.buttonDoubleReward,cc.color(124,124,124,255)),this.gameScene.getComponent("BounceBall").playButtonClickSoundEffect()}}),cc._RF.pop()},{GameUtils:"GameUtils"}],"physics-bound":[function(e,t){"use strict";cc._RF.push(t,"f27542etPZBvpc1q40tY798","physics-bound"),cc.Class({extends:cc.Component,properties:{size:cc.size(0,0),mouseJoint:!0},onLoad:function(){this.createPhysicBound()},start:function(){},createPhysicBound:function(){this.unschedule(this.createPhysicBound);var e=this.size.width||this.node.width,t=this.size.height||this.node.height,o=new cc.Node;o.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static,this._addBound(o,0,t/2+10,e,20),this.node.addChild(o);var n=new cc.Node,i=n.addComponent(cc.RigidBody);i.name="2",i.type=cc.RigidBodyType.Static,this._addBound(n,e/2+10,0,20,t),this.node.addChild(n);var s=new cc.Node,a=s.addComponent(cc.RigidBody);a.name="3",a.type=cc.RigidBodyType.Static,this._addBound(s,-e/2-10,0,20,t),this.node.addChild(s);var c=new cc.Node,l=c.addComponent(cc.RigidBody);l.name="1",l.type=cc.RigidBodyType.Static,this._addBound(c,0,-t/2-10-1,e,20,!0),this.node.addChild(c)},_addBound:function(e,t,o,n,i){var s=e.addComponent(cc.PhysicsBoxCollider);s.offset.x=t,s.offset.y=o,s.size.width=n,s.size.height=i}}),cc._RF.pop()},{}],"use_v2.0.x_cc.Toggle_event":[function(e,t){"use strict";cc._RF.push(t,"f2f325Y9VdEBr4/PB72zqOy","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["BounceBall","Ball","BlockItem","BoardGame","BonusBallItem","DevideBallItem","GameUtils","GlobalConstant","LevelStageTemplate","ProgressScore","RebounceBallItem","RootBall","SaveLifeLayer","TriangleItem","physics-bound","GameLayer","LevelMap","Loading","LoseLayer","MainMenu","PauseLayer","ShopLayer","WinLayer","use_v2.0.x_cc.Toggle_event"]);