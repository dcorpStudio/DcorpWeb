window.__require=function e(t,i,a){function n(l,s){if(!i[l]){if(!t[l]){var r=l.split("/");if(r=r[r.length-1],!t[r]){var c="function"==typeof __require&&__require;if(!s&&c)return c(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+l+"'")}l=r}var u=i[l]={exports:{}};t[l][0].call(u.exports,function(e){return n(t[l][1][e]||e)},u,u.exports,e,t,i,a)}return i[l].exports}for(var o="function"==typeof __require&&__require,l=0;l<a.length;l++)n(a[l]);return n}({all_modules:[function(e,t,i){"use strict";cc._RF.push(t,"3b1500RQvVAq5p6RyqHgg83","all_modules");var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||a(t,e,i)};Object.defineProperty(i,"__esModule",{value:!0}),n(e("./utils/instant_utils"),i),n(e("./map_part_generator"),i),n(e("./configs"),i),n(e("./utils/utils"),i),n(e("./utils/utils_facebook"),i),n(e("./utils/audio"),i),n(e("./data"),i),n(e("./login"),i),n(e("./node_factory"),i),n(e("./video-ads/video"),i),n(e("./video-ads/inter_ad"),i),n(e("./ui-fx/ui"),i),n(e("./ui-fx/fx"),i),n(e("./social/social"),i),n(e("./tut"),i),n(e("./map_config"),i),n(e("./brick_styles"),i),n(e("./core_game"),i),n(e("./game_flow"),i),n(e("./control"),i),n(e("./map_render"),i),n(e("./user"),i),n(e("./rank"),i),n(e("./shop"),i),n(e("./analytic"),i),n(e("./leaderboard"),i),n(e("./load_optimize"),i),cc._RF.pop()},{"./analytic":"analytic","./brick_styles":"brick_styles","./configs":"configs","./control":"control","./core_game":"core_game","./data":"data","./game_flow":"game_flow","./leaderboard":"leaderboard","./load_optimize":"load_optimize","./login":"login","./map_config":"map_config","./map_part_generator":"map_part_generator","./map_render":"map_render","./node_factory":"node_factory","./rank":"rank","./shop":"shop","./social/social":"social","./tut":"tut","./ui-fx/fx":"fx","./ui-fx/ui":"ui","./user":"user","./utils/audio":"audio","./utils/instant_utils":"instant_utils","./utils/utils":"utils","./utils/utils_facebook":"utils_facebook","./video-ads/inter_ad":"inter_ad","./video-ads/video":"video"}],analytic:[function(e,t,i){"use strict";cc._RF.push(t,"9583a92HkZKyra6KmwxeBtd","analytic"),Object.defineProperty(i,"__esModule",{value:!0}),i.analytic=void 0;const a=e("./all_modules");a._,i.analytic={isPausedFromClick:!1,mapFallDownCount:0,lastFxNewRankTime:0,init(){window.FBInstant&&FBInstant.player.getSignedPlayerInfoAsync().then(e=>{const t=new XMLHttpRequest;t.open("POST","https://b4239.playfabapi.com/Client/LoginWithFacebookInstantGamesId",!0),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify({FacebookInstantGamesSignature:e.getSignature(),TitleId:"b4239",CreateAccount:!0})),t.onload=function(){const e=JSON.parse(this.responseText);a.user.playfabId=e.data.PlayFabId}})},onResetMap(){this.mapFallDownCount=0},onFallDown1Row(){this.mapFallDownCount++},logGameOver(){a.utilsFB.log("ev_game_over",1,{rankIndex:a.rank.currentRankIndex,lineNumber:this.mapFallDownCount,isBossShowing:a.coreGame.isBossShowing}),a.utilsFB.log(`ev_game_over_at_rank_${a.rank.currentRankIndex}`,1,{lineNumber:this.mapFallDownCount,isBossShowing:a.coreGame.isBossShowing})},logGetNewRank(){a.utilsFB.log("ev_get_new_rank",1,{rankIndex:a.rank.currentRankIndex})}},cc._RF.pop()},{"./all_modules":"all_modules"}],audio:[function(e,t,i){"use strict";cc._RF.push(t,"29639UtmkRKuLS5Eu9Fzh+X","audio"),Object.defineProperty(i,"__esModule",{value:!0}),i.audio=void 0;const a=e("../all_modules"),n=a._;i.audio={audioList:{},playingIdList:{},isSoundOff:!1,init(){a.utils.setTimeout(()=>this.loadAudios(),2e3),a.login.addLoginDataField("isSoundOff"),a.login.addCallback(e=>{this.isSoundOff=e.isSoundOff,this.initButtonSounds(),this.renderBtnSounds()})},initButtonSounds(){const e=()=>{this.isSoundOff=!1,this.renderBtnSounds(),a.data.saveData({isSoundOff:0}),this.playMusic()},t=()=>{this.isSoundOff=!0,this.renderBtnSounds(),a.data.saveData({isSoundOff:1}),this.stopMusic()};a.utils.addButtonComp(cc.find("Canvas/layer_pause/bg_pause_small/button_sound"),t),a.utils.addButtonComp(cc.find("Canvas/layer_game_over/button_sound"),t),a.utils.addButtonComp(cc.find("Canvas/layer_pause/bg_pause_small/button_sound/button_sound_off"),e),a.utils.addButtonComp(cc.find("Canvas/layer_game_over/button_sound/button_sound_off"),e)},renderBtnSounds(){cc.find("Canvas/layer_pause/bg_pause_small/button_sound/button_sound_off").active=this.isSoundOff,cc.find("Canvas/layer_game_over/button_sound/button_sound_off").active=this.isSoundOff},loadAudios(){cc.resources.loadDir("audios",cc.AudioClip,(e,t)=>{if(e)return n.log(e);for(let i of t)this.audioList[i.name]=i;this.playMusic()})},playSound(e,t=1){if(!this.isSoundOff&&this.audioList[e])try{this.playingIdList[e]=cc.audioEngine.play(this.audioList[e],!1,t)}catch(i){}},stopSound(e){(this.playingIdList[e]||0==this.playingIdList[e])&&cc.audioEngine.stopEffect(this.playingIdList[e])},playMusic(){this.isSoundOff||cc.audioEngine.isMusicPlaying()||(this.playingIdList.bgmusic=cc.audioEngine.play(this.audioList.bgmusic,!0,.5))},stopMusic(){this.stopSound("bgmusic")},playSoundClickButton(){this.isSoundOff||this.playSound("click",3)},soundConnectedPointIndex:0,resetContinuousSoundForPoint(){this.soundConnectedPointIndex=1,this.playSound("1")},playSoundConnectPoint(){this.soundConnectedPointIndex++,this.playSound(""+this.soundConnectedPointIndex)}},cc._RF.pop()},{"../all_modules":"all_modules"}],ball_component:[function(e,t){"use strict";cc._RF.push(t,"8accdTiCitNN7s2tf6jXaE7","ball_component"),cc.Class({extends:cc.Component,properties:{speed:10},onLoad:function(){this.physicBody=this.getComponent(cc.RigidBody),this.physicBody.linearVelocity=cc.v2(0,0),this.leftWallColision=!1,this.righWallColision=!1},setLinearVelocity:function(e){this.physicBody.linearVelocity=e.mul(this.speed)},applyLineerVelocity:function(e){this.physicBody.linearVelocity=e},onBeginContact:function(e,t,i){1==i.body.tagName&&this.schedule(this.inActiveBall,0)},inActiveBall:function(){this.unschedule(this.inActiveBall),this.physicBody.type=cc.RigidBodyType.Static,this.physicBody.active=!1,this.physicBody.enable=!1,this.physicBody.linearVelocity=cc.v2(0,0),_G.nodeFactory.setOldBall(this.node)},makeBallInActive:function(){this.unschedule(this.inActiveBall),this.physicBody&&(this.physicBody.type=cc.RigidBodyType.Static,this.physicBody.active=!1,this.physicBody.enable=!1,this.physicBody.linearVelocity=cc.v2(0,0)),this.leftWallColision=!1,this.righWallColision=!1,this.unschedule(this.checkBallStopped),this.isCheckingBallStopped=!0},reActiveBall:function(){this.physicBody.type=cc.RigidBodyType.Dynamic,this.physicBody.active=!0,this.physicBody.enable=!0,this.physicBody.linearVelocity=cc.v2(0,0),this.physicBody.enabledContactListener=!0,this.leftWallColision=!1,this.righWallColision=!1,this.node.active=!0,this.isCheckingBallStopped||(this.isCheckingBallStopped=!0,this.schedule(this.checkBallStopped,6))},checkBallStopped:function(){this.physicBody.linearVelocity.mag()>30||(this.makeBallInActive(),this.node.active=!1)},onEndContact:function(e,t,i){if(2==i.body.tagName){if(this.righWallColision=!0,this.leftWallColision){var a=Math.atan2(this.physicBody.linearVelocity.y,this.physicBody.linearVelocity.x);if(a){var n=180*a/Math.PI,o=null;if(n>=180&&n<=181||n>=-180&&n<=-179?o=(n+=.5)*Math.PI/180:(n>=179&&n<180||n>=-181&&n<-180)&&(o=(n-=.5)*Math.PI/180),o){var l=this.physicBody.linearVelocity.mag(),s=cc.v2(Math.cos(o),Math.sin(o)).mul(l);this.applyLineerVelocity(s)}}}}else if(3==i.body.tagName){if(this.leftWallColision=!0,this.righWallColision){var r=Math.atan2(this.physicBody.linearVelocity.y,this.physicBody.linearVelocity.x);if(r){var c=180*r/Math.PI,u=null;if(c>-1&&c<=0?u=(c-=.5)*Math.PI/180:c>0&&c<1&&(u=(c+=.5)*Math.PI/180),u){var d=this.physicBody.linearVelocity.mag(),p=cc.v2(Math.cos(u),Math.sin(u)).mul(d);this.applyLineerVelocity(p)}}}}else this.leftWallColision=!1,this.righWallColision=!1}}),cc._RF.pop()},{}],big_promo:[function(e,t,i){"use strict";cc._RF.push(t,"9ebafM5R7lOxLB9zSW2q5PA","big_promo"),Object.defineProperty(i,"__esModule",{value:!0}),i.bigPromo=void 0;const a=e("../all_modules");a._,i.bigPromo={bigPromoShownTime:0,startInit(){},initButtons(){a.utils.addButtonComp(cc.find("Canvas/layer_big_promo/exitButton"),()=>{a.ui.hideLayer("layer_big_promo"),a.utilsFB.log("ev_big_promo_action",1,{action:"hide"})}),a.utils.addButtonComp(cc.find("Canvas/layer_big_promo/playnowButton"),()=>{this.onClickPlayBut(),a.utilsFB.log("ev_big_promo_action",1,{action:"play"})}),a.utils.addButtonComp(cc.find("Canvas/layer_big_promo/promoBigImage"),()=>{this.onClickPlayBut(),a.utilsFB.log("ev_big_promo_action",1,{action:"play"})})},onClickPlayBut(){a.ui.hideLayer("layer_big_promo"),a.ui.showLoading(),a.promo.switchPromoGame("784969582314706",()=>{console.log("switchPromoGame >> fail callback calling..."),a.ui.hideLoading(),a.utilsFB.log("ev_big_promo_action",1,{action:"cancel_switch"})})}},cc._RF.pop()},{"../all_modules":"all_modules"}],brick_component:[function(e,t){"use strict";cc._RF.push(t,"205544ohzNErI6xKLtd30YQ","brick_component");var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(void 0);if(t&&t.has(e))return t.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=n?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(i,o,l):i[o]=e[o]}return i.default=e,t&&t.set(e,i),i}(e("../all_modules"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(a=function(e){return e?i:t})(e)}i._,cc.Class({extends:cc.Component,onLoad:function(){var e=this;this.node.brickComp=this,this.labelNode=cc.find("label",this.node),this.labelComp=this.labelNode.getComponent(cc.Label),this.bgNode=cc.find("bg",this.node),this.bgHilight=cc.find("highlight",this.bgNode),this.borderNode=cc.find("bg/border",this.node),this.onHitActionSequence=cc.sequence(cc.callFunc(function(){return e.bgHilight.active=!0}),cc.scaleTo(.03,1.1),cc.scaleTo(.03,.9),cc.scaleTo(.03,1),cc.callFunc(function(){return e.bgHilight.active=!1}))},onBeginContact:function(e){if(this.isGoldBrick)return this.node.opacity?i.coreGame.onGoldBrickHitBall(this.node):e.disabled=!1;this.curValue-=i.user.ballDamage,this.curValue>0?(i.mapRender.renderBrick(this.node),i.audio.playSound("hit_brick",.3),this.bgNode.stopAllActions(),this.bgNode.scale=1,this.bgNode.runAction(this.onHitActionSequence)):(i.audio.playSound("brick_broken",.8),i.coreGame.onBrickBroken(this.node))}}),cc._RF.pop()},{"../all_modules":"all_modules"}],brick_styles:[function(e,t,i){"use strict";cc._RF.push(t,"6baf5r2EZdBpqAVSVIbVJ37","brick_styles"),Object.defineProperty(i,"__esModule",{value:!0}),i.brickStyles=void 0;const a=e("./all_modules")._,n=[{value:0,output:1},{value:50,output:1.25},{value:100,output:1.5},{value:150,output:1.75},{value:200,output:2},{value:250,output:2.15},{value:300,output:2.4},{value:350,output:2.65},{value:400,output:2.8},{value:450,output:2.9},{value:500,output:3},{value:9999,output:4.2}],o=[{value:0,output:cc.color("#FFF8E6")},{value:2,output:cc.color("#FFBFBF")},{value:3,output:cc.color("#ffffbf")},{value:4,output:cc.color("#bfffbf")},{value:5,output:cc.color("#73ffff")},{value:6,output:cc.color("#bfbfff")},{value:8,output:cc.color("#ffbfff")},{value:10,output:cc.color("#ff7373")},{value:12,output:cc.color("#ffdc73")},{value:15,output:cc.color("#4dff4d")},{value:18,output:cc.color("#26c9ff")},{value:20,output:cc.color("#9673ff")},{value:22,output:cc.color("#ff73ff")},{value:26,output:cc.color("#ff4d4d")},{value:30,output:cc.color("#ffbf00")},{value:40,output:cc.color("#00d900")},{value:50,output:cc.color("#4d4dff")},{value:60,output:cc.color("#6A6AFF")},{value:70,output:cc.color("#aaaaaa")},{value:80,output:cc.color("#FF04FF")},{value:90,output:cc.color("#FF6464")},{value:100,output:cc.color("#FF8000")},{value:110,output:cc.color("#00B72E")},{value:120,output:cc.color("#6060FF")},{value:130,output:cc.color("#D044FF")},{value:140,output:cc.color("#FD0BC7")},{value:150,output:cc.color("#CBD237")},{value:160,output:cc.color("#00A3D9")},{value:170,output:cc.color("#ffffff")}],l=[{value:0,output:"brick_decors-backgrounds-brick_bg_0"},{value:40,output:"brick_decors-backgrounds-brick_bg_1"},{value:80,output:"brick_decors-backgrounds-brick_bg_2"},{value:120,output:"brick_decors-backgrounds-brick_bg_3"},{value:160,output:"brick_decors-backgrounds-brick_bg_4"},{value:200,output:"brick_decors-backgrounds-brick_bg_5"},{value:240,output:"brick_decors-backgrounds-brick_bg_6"},{value:280,output:"brick_decors-backgrounds-brick_bg_0"}],s=[{value:0,output:null},{value:20,output:"brick_decors-borders-brick_border_0"},{value:40,output:"brick_decors-borders-brick_border_1"},{value:130,output:"brick_decors-borders-brick_border_2"},{value:220,output:"brick_decors-borders-brick_border_3"},{value:350,output:null}],r=[{value:0,output:null},{value:20,output:cc.color("#000000")},{value:30,output:cc.color("#cc0000")},{value:40,output:cc.color("#000000")},{value:50,output:cc.color("#666666")},{value:60,output:cc.color("#BDF8F9")},{value:70,output:cc.color("#333333")},{value:80,output:cc.color("#AC00AC")},{value:90,output:cc.color("#444444")},{value:100,output:cc.color("#dddddd")},{value:110,output:cc.color("#fffe37")},{value:120,output:cc.color("#ffffff")},{value:140,output:cc.color("#cccccc")},{value:150,output:cc.color("#DCFF73")},{value:160,output:cc.color("#ff8600")},{value:170,output:cc.color("#8c00fc")},{value:180,output:cc.color("#3500ff")},{value:190,output:cc.color("#01fe01")},{value:200,output:cc.color("#fffe37")},{value:210,output:cc.color("#ffffff")},{value:220,output:cc.color("#000000")},{value:230,output:cc.color("#cccccc")},{value:240,output:cc.color("#ed0003")},{value:250,output:cc.color("#ff8600")},{value:260,output:cc.color("#8c00fc")},{value:270,output:cc.color("#3500ff")},{value:280,output:cc.color("#01fe01")},{value:290,output:cc.color("#fffe37")},{value:300,output:cc.color("#ffffff")},{value:310,output:null}],c=[{value:0,output:!1},{value:20,output:!0},{value:9999,output:!0}],u=[{value:0,output:.8},{value:10,output:.85},{value:20,output:.9},{value:40,output:.95},{value:60,output:1},{value:80,output:1.05},{value:100,output:1.1},{value:120,output:1.15},{value:9999,output:!0}];i.brickStyles={brickBackgroundSprites:{},brickBorderSprites:{},init(){const e=cc.find("Canvas").getComponent("canvas_init");["brickBackgroundSprites","brickBorderSprites"].map(t=>{e[t].map(e=>{e&&(this[t][e.name]=e)})})},getValueFromRange(e,t){const i=e%a.max(...t.map(e=>e.value)),n=t.findIndex(e=>e.value>i);return-1!=n?t[n-(n?1:0)].output:t[t.length-1].output},value2Scale(e){return this.getValueFromRange(e,n)},value2BackgroundStyle(e){const t=this.getValueFromRange(e,o),i=this.getValueFromRange(e,l);if(t&&i)return{color:t,textureName:i}},value2BorderStyle(e){const t=this.getValueFromRange(e,r),i=this.getValueFromRange(e,s);if(t&&i)return{color:t,textureName:i}},value2LabelStyle(e){return{isBold:this.getValueFromRange(e,c),scale:this.getValueFromRange(e,u)}}},cc._RF.pop()},{"./all_modules":"all_modules"}],canvas_init:[function(e,t,i){"use strict";cc._RF.push(t,"d4912eG/71CZqFCOmHfivg1","canvas_init"),Object.defineProperty(i,"__esModule",{value:!0});const a=e("./all_modules");a._,cc.Class({extends:cc.Component,properties:{rankSprite:{default:[],type:cc.SpriteFrame},brickBackgroundSprites:{default:[],type:cc.SpriteFrame},brickBorderSprites:{default:[],type:cc.SpriteFrame}},onLoad(){window.FBInstant&&setTimeout(()=>FBInstant.startGameAsync(),0),window._G=a,cc.winSize.width/cc.winSize.height>.5625&&(cc.find("Canvas").getComponent(cc.Canvas).fitHeight=!0,a.coreGame.isDesktop=!0);for(let i in a)a[i].init&&a[i].init();const e=performance.now();a.utilsFB.log("ev_game_load_time",e),a.utils.setTimeout(()=>{a.social.askBotSubscribe(()=>{})},0);const t=document.getElementById("htmlLoadingBackground");if(t&&(t.style.display="none"),window.FBInstant){const e=FBInstant.getEntryPointData()||{x:"nothing"};e&&e.data&&1232==e.data&&(cc.find("Canvas/layer_noti").active=!0,a.utils.addButtonComp(cc.find("Canvas/layer_noti/container/button_ok"),()=>{cc.find("Canvas/layer_noti").active=!1,cc.find("Canvas/rewarded_background").active=!0})),e&&e.isFromBotMsg&&a.utilsFB.log("ev_play_from_bot_message"),e&&e.isPlayedFromMessage&&a.utilsFB.log("ev_play_from_friend_message"),e&&e.isFromSharedPos&&(console.log(` Logged event user entered game from shared post. Position = ${e.shareCode}`),FBInstant.logEvent("ev_user_click_shared_post",1,{shareCode:e.shareCode||"null"}))}}}),cc._RF.pop()},{"./all_modules":"all_modules"}],challenge:[function(e,t,i){"use strict";cc._RF.push(t,"42406FdjKhMs5jhVAZmWyHj","challenge"),Object.defineProperty(i,"__esModule",{value:!0}),i.challenge=void 0;const a=e("../all_modules"),n=a._;i.challenge={friendArr:[],selectedFriend:{id:0,score:0,name:0,photo:0},challengedFriendArr:[],lastTimeResetChallengedFriendArr:[],challengeCancelTimeArr:[],init(){},entriesToArr(e){const t=[];for(let i=0;i<e.length;i++){const n=e[i],o={id:n.getID(),photo:n.getPhoto(),name:n.getName(),score:0,rank:0};t.push(o),o.id==a.user.id&&(a.user.bestScore=o.score||a.user.bestScore,a.ui.updateScore())}return t},check2GetFriendAndRender(){const e=this.challengeCancelTimeArr.length>=a.configs.maxChallengeAskTimeIn1Day,t=this.challengeCancelTimeArr.some(e=>n.time()-e>864e5);if(e&&!t)return;const i=this.friendArr.filter(e=>e.id!=a.user.id&&!this.challengedFriendArr.find(t=>t.id==e.id)),o=a.utils.randomArrItem(i);return n.log(" newFriendInfo = ",o,"availableFriendArr=",i),n.log("this.friendArr=",this.friendArr),n.log("this.challengedFriendArr=",this.challengedFriendArr),o?(this.selectedFriend=o,this.selectedFriend.score=this.selectedFriend.score||0,this.render(),!0):void 0},renderUserNameAndAva(){a.utils.setLabelText(cc.find("Canvas/layer_challenge_friend/content_bg/players/Image_ButtonBase_player1/label_user_name"),a.user.name),a.utils.waitToRun(()=>{cc.find("Canvas/layer_challenge_friend/content_bg/players/Image_ButtonBase_player1/avatar/real_avatar").getComponent(cc.Sprite).spriteFrame=a.user.avatarSpriteFrame},"avatarSpriteFrame",a.user)},render(){a.language.setLabelDataAndRender(cc.find("Canvas/layer_challenge_friend/content_bg/label_score"),a.utils.localizeNumber(a.user.score)),cc.assetManager.loadRemote(this.selectedFriend.photo,(e,t)=>{e||(cc.find("Canvas/layer_challenge_friend/content_bg/players/Image_ButtonBase_player2/avatar/real_avatar").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t))}),a.utils.setLabelText(cc.find("Canvas/layer_challenge_friend/content_bg/players/Image_ButtonBase_player2/label_user_name"),this.selectedFriend.name),a.utils.setLabelText(cc.find("Canvas/layer_challenge_friend/content_bg/players/Image_ButtonBase_player1/label_score"),a.utils.localizeNumber(a.user.score)),a.utils.setLabelText(cc.find("Canvas/layer_challenge_friend/content_bg/players/Image_ButtonBase_player2/label_score"),a.utils.localizeNumber(this.selectedFriend.score))},onbtnPlayChallenge(){a.social.createContext(this.selectedFriend.id,()=>{a.social.playerIdSendMessage=this.selectedFriend.id,a.ui.hideLayer("layer_challenge_friend"),a.gameOver.replay(),this.challengedFriendArr.push(this.selectedFriend),a.data.saveData({challengedFriendArr:this.challengedFriendArr}),n.log(" onbtnPlayChallenge >> _G.challenge.resetChallengCancelTimeArr(); "),a.challenge.resetChallengCancelTimeArr()})},onBtnPlayWithAnother(){a.social.invite(e=>{a.social.playerIdSendMessage=e,a.ui.hideLayer("layer_challenge_friend"),a.gameOver.replay(),n.log(" onBtnPlayWithAnother >> _G.challenge.resetChallengCancelTimeArr(); "),a.challenge.resetChallengCancelTimeArr()},!0)},resetChallengCancelTimeArr(){this.challengeCancelTimeArr=[],a.data.saveData({challengeCancelTimeArr:this.challengeCancelTimeArr})},onBtnCancelClicked(){this.challengeCancelTimeArr.push(n.time()),this.challengeCancelTimeArr.length>a.configs.maxChallengeAskTimeIn1Day&&this.challengeCancelTimeArr.shift(),a.data.saveData({challengeCancelTimeArr:this.challengeCancelTimeArr}),n.log(" onBtnCancelClicked >> this.challengeCancelTimeArr = ",this.challengeCancelTimeArr),a.utilsFB.log("ev_click_button_cancel_challenge"),a.ui.hideLayer("layer_challenge_friend"),a.gameOver.replay()}},cc._RF.pop()},{"../all_modules":"all_modules"}],configs:[function(e,t,i){"use strict";cc._RF.push(t,"87ef5cuD0VGfLXZQN/Sp+Yo","configs"),Object.defineProperty(i,"__esModule",{value:!0}),i.configs=void 0;const a=e("./all_modules")._;i.configs={newUserGold:600,newUserShootRate:10,newUserBallDamage:1,fallDownInterval:3.9,bossFallDownSpeed:12,init(){},rankIndexByScore:[],rowNumberVideoContinuePushUp:5,brickValue2Score:e=>20*e,levelUpRewardGoldArr:[0,400,800,1200,1600,2e3,2400,2800,3200,3600,4e3,4400,4800,5200,5600,6e3,6400,6800,7200,7600,8e3,8400,8800,9200,9600,1e4,10400,10800,11200,11600,12e3,12400,12800,13200,13600,14e3,14400,14800,15200,15600],ballDamageUpgradeRatio:1.1,ballDamageUpgradePrice:[1e3,2e3,3e3,4e3,5e3,6e3,7e3,8e3,9e3,1e4,11e3,12e3,13e3,14e3,15e3,16e3,17e3,18e3,19e3,2e4,21e3,22e3,23e3,24e3,25e3,26e3,1e9],ballColorByDamageLevel:["#ffffff","#FFAFAF","#FE9CFF","#8D7EFF","#86EBFE","#FF94D5","#91FF9F","#E9F392","#FDB58F","#FE7575","#FD5EFF","#604BFB","#45DDFB","#FB48B5","#4CFD63","#E3F449","#FF894B","#FB3636","#FD1AFF","#391EFD","#00D5FF","#FF039D","#00FF21","#E6FF03","#FF5A03","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff"],shootRateUpgradeRatio:1.1,shootRateUpgradePrice:[1e3,2e3,3e3,4e3,5e3,6e3,7e3,8e3,9e3,1e4,11e3,12e3,13e3,14e3,15e3,16e3,17e3,18e3,19e3,2e4,21e3,22e3,23e3,24e3,25e3,26e3,1e9],rowsToRemoveAfterVideo:6,timeToResetChallengedFriendArr:864e5,maxChallengeAskTimeIn1Day:3,interAdId:"781191195854136_816360389003883",interAdRatio:{gameOverReplay:1},showInterAdAfterEveryReplayTime:2,videoRewardId:"781191195854136_786039928702596",videoContinueTime:1,moreLifeWaitTime:60,inflateBrickValueEachRepeat:e=>a.ceil(1.1*e)},cc._RF.pop()},{"./all_modules":"all_modules"}],control:[function(e,t,i){"use strict";cc._RF.push(t,"9c459wwxQ1NwJnEP/aNipCp","control"),Object.defineProperty(i,"__esModule",{value:!0}),i.control=void 0;const a=e("./all_modules"),n=a._,o=15*n.PI/180,l=165*n.PI/180;i.control={currentAngle:1.17,init(){this.initControl()},initControl(){const e=cc.find("Canvas/layer_control"),t=a.coreGame.rootBallNode,i=a.utils.getGlobalPosition(t);a.coreGame.isDesktop&&(i.y+=a.coreGame.node.height/2-80);const s=cc.find("Canvas/layer_play_area/game_board/focus"),r=e=>{const t=e.sub(i);this.currentAngle=n.abs(n.atan2(t.y,t.x)),this.currentAngle=n.max(n.min(this.currentAngle,l),o),a.coreGame.rootBallNode.angle=180*this.currentAngle/n.PI-90,a.utils.setGlobalPosition(s,e),s.zIndex=cc.macro.MAX_ZINDEX};a.utils.singleTouchSet(e,e=>{r(e),a.tut.handleTut()},e=>{r(e)},()=>{})}},cc._RF.pop()},{"./all_modules":"all_modules"}],core_game:[function(e,t,i){"use strict";cc._RF.push(t,"c559d6lC1xIYIvzpkcX5M7e","core_game"),Object.defineProperty(i,"__esModule",{value:!0}),i.coreGame=void 0;const a=e("./all_modules"),n=a._;i.coreGame={node:null,rootBallNode:null,currentScore:0,isPaused:!0,isBossShowing:!1,isShowingEarthWarning:!1,shootIntervalVar:null,fallDownIntervalVar:null,isDesktop:!1,init(){this.node=cc.find("Canvas/layer_play_area/game_board"),this.node.height=cc.winSize.height-300,this.rootBallNode=cc.find("Canvas/layer_play_area/game_board/root_ball"),this.rootBallNode.y=100-a.utils.getGlobalPosition(this.node).y+40,this.isDesktop&&(this.rootBallNode.y=-440),cc.find("Canvas/layer_play_area/game_board/particle_attracting").y=this.rootBallNode.y,this.rootBallNode.zIndex=9999,a.fx.bubbleForever(cc.find("circle_glow",this.rootBallNode),1),cc.find("ball_gun",this.rootBallNode).runAction(cc.repeatForever(cc.sequence(cc.tintBy(.5,-60,-60,0),cc.tintBy(.5,60,60,0),cc.delayTime(1)))),cc.find("ball_gun/gun_highlight",this.rootBallNode).runAction(cc.repeatForever(cc.sequence(cc.scaleBy(.05,.5),cc.scaleBy(.05,2)))),this.initPhysics(),e("physics_bound").createPhysicBound(),a.login.addLoginDataField("shootRateLevel"),a.login.addLoginDataField("ballDamageLevel"),a.login.addCallback(e=>{a.user.shootRateLevel=e.shootRateLevel||0,a.user.ballDamageLevel=e.ballDamageLevel||0,this.resetBallShooter()}),a.utils.waitToRun(()=>this.resetFallDownTimer(),"isTutDone_EndlessBrickBall",a.tut),this.startTrackEarthWarning()},resetFallDownTimer(){a.utils.clearInterval(this.fallDownIntervalVar),this.fallDownIntervalVar=a.utils.setInterval(()=>this.fallDown1Row(),1e3*a.configs.fallDownInterval)},resetBallShooter(){a.user.shootRate=a.configs.newUserShootRate*Math.pow(a.configs.shootRateUpgradeRatio,a.user.shootRateLevel),a.user.ballDamage=a.configs.newUserBallDamage*Math.pow(a.configs.ballDamageUpgradeRatio,a.user.ballDamageLevel),this.shootIntervalVar&&a.utils.clearInterval(this.shootIntervalVar),this.shootIntervalVar=a.utils.setInterval(()=>this.spawnNewBall(),1e3/a.user.shootRate)},initPhysics(){this.enablePhysics(),cc.director.getPhysicsManager().enabledAccumulator=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,0)},enablePhysics(){cc.director.getPhysicsManager().enabled=!0},disablePhysics(){cc.director.getPhysicsManager().enabled=!1},resetGame(){a.utils.clearInterval(this.bossTrackTimerVar),this.bossTrackTimerVar=null,this.isBossShowing=!1,this.currentScore=0,a.nodeFactory.clearAllScoreNode(),a.nodeFactory.resetAllNodesInPools(),a.mapRender.reset(),a.rank.addRankIndexLoadedCallback(()=>a.fx.resetWaveProgress())},pause(e=!1){e||this.disablePhysics(),this.isPaused=!0,this.node.children.map(t=>{e&&["sample_ball","label_score_tooltip"].includes(t.name)||t.pauseAllActions()}),cc.find("Canvas/Main Camera").pauseAllActions()},resume(){this.enablePhysics(),this.isPaused=!1,this.node.resumeAllActions(),this.node.children.map(e=>e.resumeAllActions()),cc.find("Canvas/Main Camera").resumeAllActions()},spawnNewBall(){if(this.isPaused)return;let e=a.nodeFactory.getNextAvailableBall();e.getComponent("ball_component").reActiveBall(),e.setPosition(this.rootBallNode.getPosition());const t=a.control.currentAngle;e.getComponent("ball_component").setLinearVelocity(cc.v2(Math.cos(t),Math.sin(t)))},fallDown1Row(e=.3){if(this.isPaused||this.isBossShowing)return;a.analytic.onFallDown1Row(),a.mapRender.onMapFallDown1Row();let t=!1;a.mapRender.showingBrickNodeArr.map(i=>{i.brickComp.rowIndex--,i.runAction(cc.moveBy(e,cc.v2(0,-80))),this.handleGoldBrickOnFallDown1Row(i),i.brickComp.rowIndex<=0&&(t=!0)}),this.isBossWaiting()||a.mapRender.pendingBrickInfoArr.map(e=>e.y--),a.utils.setTimeout(()=>{t?a.gameFlow.handleGameOver():a.mapRender.renderAvailableBricks()},1e3*e)},isBossWaiting(){const e=a.mapRender.pendingBrickInfoArr;return e[0]&&e[0].isBossBrick},handleGoldBrickOnFallDown1Row(e,t=!1){const i=e.brickComp;if(i.isGoldBrick&&!e.isActionRunning&&(i.rowIndex<11||t)){const t=a.configs.fallDownInterval;e.isActionRunning=!0;const i=cc.winSize.width,n=i/2-e.getBoundingBox().width/2,o=-n;e.runAction(cc.sequence(cc.moveBy(t,cc.v2(n-e.x,0)),cc.moveBy(t,cc.v2(o-n,0)),cc.moveBy(t,cc.v2(i+20,0)),cc.callFunc(()=>{this.onBrickBroken(e)})))}},pushBricksUpAfterVideo(){const e=a.configs.rowNumberVideoContinuePushUp;a.mapRender.showingBrickNodeArr.map(t=>{this.isBossShowing||(t.brickComp.rowIndex+=e),t.runAction(cc.moveBy(.5,cc.v2(0,80*e)))}),this.isBossShowing?a.utils.setTimeout(()=>this.startBossTracking(),500):(this.resetFallDownTimer(),a.mapRender.pendingBrickInfoArr.map(t=>t.y+=e))},onBrickBroken(e){if(n.removeArrItem(a.mapRender.showingBrickNodeArr,e)){if(e.brickComp.isGoldBrick)a.nodeFactory.setOldGoldBrick(e);else{const t=a.configs.brickValue2Score(e.brickComp.orgValue);this.addScore(t),a.fx.fxScoreNormal(e,t),a.nodeFactory.setOldBrick(e)}this.isBossShowing||a.fx.updateWaveProgress(),a.mapRender.showingBrickNodeArr.every(e=>e.brickComp.isGoldBrick)&&a.mapRender.showingBrickNodeArr.map(e=>this.handleGoldBrickOnFallDown1Row(e,!0)),this.checkAndShowBoss()}},addScore(e){this.currentScore+=e,a.gameFlow.onScore(),a.ui.updateScore(this.currentScore)},checkAndShowBoss(){this.isBossShowing||!this.isBossWaiting()||a.mapRender.showingBrickNodeArr.length||(this.isBossShowing=!0,a.fx.showBossWarningLine(),a.utils.setTimeout(()=>this.showBoss(),1e3))},showBoss(){const e=a.mapRender.pendingBrickInfoArr;let t=e.findIndex(e=>!e.isBossBrick);-1==t&&(t=e.length-1);const i=e.slice(0,t+1).map(e=>e.y),o=n.min(...i),l=n.max(...i)-o,s=n.max(l,a.mapRender.mapRowCount-1),r=o-a.mapRender.mapRowCount-3;a.mapRender.pendingBrickInfoArr.map(e=>{e.y-=s+r}),a.mapRender.renderAvailableBricks(!0);const c=80*a.mapRender.mapRowCount,u=c/a.configs.bossFallDownSpeed;a.mapRender.showingBrickNodeArr.map(e=>{e.isBossBrick&&(e.y+=80*s,e.runAction(cc.sequence(cc.moveBy(2,cc.v2(0,80*-s)),cc.moveBy(2*u,cc.v2(0,-2*c)))))}),this.startBossTracking(),a.utils.setTimeout(()=>a.fx.shakeCamera(2.3),300)},bossTrackTimerVar:null,startBossTracking(){this.bossTrackTimerVar=a.utils.setInterval(()=>{this.isBossShowing||a.utils.clearInterval(this.bossTrackTimerVar);let e=!0,t=!1;a.mapRender.showingBrickNodeArr.some(i=>{i.isBossBrick&&(e=!1,i.y-i.height/2<a.coreGame.rootBallNode.y&&(t=!0))}),(e||t)&&(a.utils.clearInterval(this.bossTrackTimerVar),this.bossTrackTimerVar=null),e?a.utils.setTimeout(()=>{this.isBossShowing=!1,this.pause(!0),a.leaderboard.updateScore(a.user.bestScore)},1e3):t&&a.gameFlow.handleGameOver()},100)},startTrackEarthWarning(){a.utils.setInterval(()=>{let e;this.isPaused||(e=a.mapRender.showingBrickNodeArr.some(e=>this.isBossShowing?e.y<a.coreGame.rootBallNode.y+100:e.brickComp.rowIndex<=1)),this.isShowingEarthWarning!=e&&(this.isShowingEarthWarning=e,e?a.fx.startEarthWarning():a.fx.stopEarthWarning())},300)},onGoldBrickHitBall(e){if(e.brickComp.curValue<=0)return cc.find("bg/bg_empty",e).active=!0;a.audio.playSound("get_gold",1),e.brickComp.curValue--,a.fx.fxGoldFlyToBar(e,()=>a.user.addGold(1))}},cc._RF.pop()},{"./all_modules":"all_modules",physics_bound:"physics_bound"}],data:[function(e,t,i){"use strict";cc._RF.push(t,"60386/fiqdJw7DWVhURYOAP","data"),Object.defineProperty(i,"__esModule",{value:!0}),i.data=void 0;const a=e("./all_modules"),n=a._;i.data={init:()=>{a.data.isUserReady=!0},saveData(e,t,i){this.saveDataReal(e,t,i)},saveDataReal(e,t,i){window.FBInstant?FBInstant.player.setDataAsync(e).then(()=>{t&&t()}):a.utils.setTimeout(()=>{for(let t in e)try{localStorage.setItem(t,JSON.stringify(e[t]))}catch(i){n.log(i)}t&&t()},500)},loadData(e,t){this.loadDataReal(e,t)},loadDataReal(e,t){window.FBInstant?FBInstant.player.getDataAsync(e).then(e=>{t&&t(e)}):a.utils.setTimeout(()=>{const i={};e.map(e=>{const t=localStorage.getItem(e);if(t)try{i[e]=JSON.parse(t)}catch(a){}}),t&&t(i)},500)},loadEntryPointData(){if(window.FBInstant){const e=FBInstant.getEntryPointData();a.user.entryPointData=e}}},cc._RF.pop()},{"./all_modules":"all_modules"}],free_button_comp:[function(e,t,i){"use strict";cc._RF.push(t,"6eb90nf54FNTralkupRNyFQ","free_button_comp"),Object.defineProperty(i,"__esModule",{value:!0});const a=e("../all_modules");a._,cc.Class({extends:cc.Component,freeHandler(e){e.target.freeButtonHandlerFunc&&(e.target.freeButtonHandlerFunc(e.target),a.audio.playSoundClickButton())}}),cc._RF.pop()},{"../all_modules":"all_modules"}],fx:[function(e,t,i){"use strict";cc._RF.push(t,"1dea3RzBLJB9KCFmazB2GAA","fx"),Object.defineProperty(i,"__esModule",{value:!0}),i.fx=void 0;const a=e("../all_modules"),n=a._;i.fx={init(){},bubblePromo(e){e.children.forEach(e=>{e.stopAllActions(),e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1,1.1),cc.scaleTo(1,1))))})},rotateForever(e){e.runAction(cc.repeatForever(cc.rotateBy(10,360)))},bubbleForever(e,t=.5,i=0,a=1,n=1.2){const o=e.orgScale||e.scale;e.orgScale||(e.orgScale=o),e.stopAllActions(),e.runAction(cc.repeatForever(cc.sequence(cc.delayTime(i),cc.scaleTo(t,o*n),cc.scaleTo(t,o*a),cc.scaleTo(t,o*n),cc.scaleTo(t,o*a))))},bubble(e,t,i=.5,a=0,n=1,o=1.2){const l=e.orgScale||e.scale;e.orgScale||(e.orgScale=l),e.stopAllActions(),e.runAction(cc.sequence(cc.delayTime(a),cc.scaleTo(i,l*o),cc.scaleTo(i,l*n),cc.scaleTo(i,l*o),cc.scaleTo(i,l*n),cc.callFunc(()=>{t&&t()})))},fxScoreNormal(e,t){let i=e.getPosition(),n=e.getContentSize();this.playEffectBrokenBrick(e);let o=a.nodeFactory.getNewScoreLabel();a.nodeFactory.runningScoreLabelArr.push(o),o.opacity=220,o.y=0,a.utils.setLabelText(o,"+"+a.utils.formatNumber(parseInt(t))),o.setPosition(i),o.parent!=a.coreGame.node&&(o.parent=a.coreGame.node);let l=cc.moveBy(1,cc.v2(0,1*n.height)),s=cc.fadeOut(.1);o.runAction(cc.sequence(l,s,cc.callFunc(()=>{o.stopAllActions(),o.removeFromParent(),a.nodeFactory.setOldScoreLabel(o)})))},playEffectBrokenBrick(e){const t=n.ceil(e.brickComp.orgValue/25)-1,i=a.nodeFactory.getBrokenEffectNode(t);i.setPosition(e.getPosition()),i.getComponent(cc.ParticleSystem).resetSystem(),a.utils.setTimeout(()=>i.active=!1,3e3)},playNodeAnim(e,t,i){const a=e.getComponent(cc.Animation);a.play(t||a.defaultClip.name).repeatCount=1,a.on("finished",()=>{a.off("finished"),i&&i()})},shakeCamera(e=.5){const t=cc.find("Canvas/Main Camera");a.utils.setTimeout(()=>{t.stopAllActions(),t.setPosition(0,0)},1e3*e),t.stopAllActions(),t.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.04,cc.v2(-10,0)),cc.moveBy(.04,cc.v2(10,0)),cc.moveBy(.04,cc.v2(8,-5)),cc.moveBy(.04,cc.v2(-8,5)),cc.moveBy(.04,cc.v2(15,0)),cc.moveBy(.04,cc.v2(-15,0)),cc.moveBy(.04,cc.v2(-9,0)),cc.moveBy(.04,cc.v2(9,0)),cc.moveBy(.04,cc.v2(-13,5)),cc.moveBy(.04,cc.v2(13,-5)),cc.moveBy(.04,cc.v2(3,-15)),cc.moveBy(.04,cc.v2(-3,15)),cc.moveBy(.04,cc.v2(14,0)),cc.moveBy(.04,cc.v2(-14,0)),cc.moveBy(.04,cc.v2(-9,0)),cc.moveBy(.04,cc.v2(9,0)))))},showBossWarningLine(){a.audio.playSound("warning");const e=cc.find("Canvas/layer_play_area/warning_line");e.opacity=0,e.active=!0,e.runAction(cc.sequence(cc.sequence(cc.fadeIn(.1),cc.delayTime(.1),cc.fadeOut(.1)).repeat(20),cc.callFunc(()=>{e.active=!1})))},bubbleShow(e){e.active=!0,e.scale=0,e.runAction(cc.sequence(cc.scaleTo(.15,1.2),cc.scaleTo(.2,.9),cc.scaleTo(.2,1)))},flickeringShow(e,t=1.4,i){e.stopAllActions(),e.runAction(cc.repeatForever(cc.sequence(cc.fadeIn(.05),cc.fadeOut(.05)))),a.utils.setTimeout(()=>{e.stopAllActions(),e.opacity=255,i&&i()},1e3*t)},startEarthWarning(){cc.find("Canvas/layer_background/air_cover_earth_alert").runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.5,220),cc.fadeOut(.3)))),a.audio.playSound("warning")},stopEarthWarning(){const e=cc.find("Canvas/layer_background/air_cover_earth_alert");e.stopAllActions(),e.opacity=0},showWaveNComing(){if(!a.rank.currentRankIndex)return;this.hideWaveNIsComing();const e=cc.find("Canvas/layer_play_area/wave_N_coming");a.utils.setLabelText(cc.find("label",e),`WAVE ${a.rank.currentRankIndex+1} IS COMING`),e.runAction(cc.fadeIn(.5)),a.utils.setTimeout(()=>e.runAction(cc.fadeOut(.3)),2e3)},hideWaveNIsComing(){const e=cc.find("Canvas/layer_play_area/wave_N_coming");e.stopAllActions(),e.opacity=0},thisWaveBrickCount:0,brokenBrickCount:0,resetWaveProgress(){this.thisWaveBrickCount=0,this.brokenBrickCount=0;let e=0;a.mapConfig.startMapPart.some(t=>{if(t[0]&&t[0].isBossBrick?e++:e==a.rank.currentRankIndex&&(this.thisWaveBrickCount+=t.length),e>a.rank.currentRankIndex)return!0}),a.utils.setTimeout(()=>this.updateWaveProgress())},updateWaveProgress(){const e=this.brokenBrickCount/this.thisWaveBrickCount,t=cc.find("Canvas/layer_play_area/playing_header_bg/progress_to_boss/done");t.height=720*e,t.parent.opacity=1==e?0:255,this.brokenBrickCount++},showCongratz(e){const t=cc.find("Canvas/layer_congratz");a.utils.setLabelText(cc.find("label_msg",t),e),t.opacity=0,t.active=!0,cc.find("particle_arrow_up",t).getComponent(cc.ParticleSystem).resetSystem(),t.runAction(cc.sequence(cc.fadeIn(.3),cc.delayTime(1),cc.fadeOut(.3),cc.callFunc(()=>t.active=!1))),a.utils.setTimeout(()=>a.audio.playSound("upgraded",2),400)},newRank(e,t=0){cc.find("Canvas/layer_play_area/game_board/focus").active=!1;const i=cc.find("Canvas/layer_new_rank"),o=cc.find("label_new_rank",i),l=cc.find("gold_reward",i);i.stopAllActions(),i.opacity=0,i.active=!0,cc.find("but_continue",i).opacity=0,cc.find("social",i).opacity=0,l.opacity=0,a.utils.setTimeout(()=>{a.audio.playSound("new_rank",1);const s=cc.find("rank_icon",i);s.getComponent(cc.Sprite).spriteFrame=e,s.opacity=0,s.scale=10,s.runAction(cc.sequence(cc.scaleTo(.3,1.6),cc.scaleTo(.2,2.2),cc.scaleTo(.2,1.9))),s.runAction(cc.sequence(cc.fadeIn(.5),cc.delayTime(0)));const r=cc.find("new_rank_glory",i);r.opacity=0,r.runAction(cc.sequence(cc.delayTime(.4),cc.fadeIn(.2))),i.runAction(cc.fadeIn(.1)),a.fx.flickeringShow(o,1.4,()=>{a.fx.flickeringShow(l,1,()=>{for(let e=0;e<15;e++)this.fxGoldFlyToBar(cc.find("label/icon_gold",l),()=>{a.audio.playSound("get_gold",1),a.user.addGold(t/10),e<14||(a.fx.flickeringShow(cc.find("social",i),1),a.social.askShortcut(()=>{a.interAd.checkToShowInterAd("new_rank",()=>{a.utils.setTimeout(()=>{a.fx.flickeringShow(cc.find("but_continue",i),1)},1200)})}),a.analytic.lastFxNewRankTime=n.time())},.1*e)})})},1e3)},continueNextLevel(){cc.find("Canvas/layer_play_area/game_board/focus").active=!0,cc.find("Canvas/shop_layer/hand_touch").active=!1;const e=a.ui.rankSprite[n.max(a.rank.currentRankIndex+1,1)],t=cc.find("Canvas/layer_play_area/playing_header_bg/btn_rank/rank_icon"),i=cc.find("Canvas/layer_new_rank"),o=cc.find("rank_icon",i);i.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(()=>i.active=!1)));const l=a.utils.copyNodeTo(o,i.parent);a.utils.setGlobalPositionToNode(l,o);const s=a.utils.getGlobalPosition(t),r=a.utils.global2LocalPosDiff(l,s.x,s.y);l.runAction(cc.moveBy(.8,r)),l.runAction(cc.sequence(cc.scaleTo(.8,t.scale),cc.callFunc(()=>{a.fx.showWaveNComing(),a.utils.setNodeImg(cc.find("Canvas/layer_play_area/playing_header_bg/btn_rank/rank_icon"),e),l.stopAllActions(),l.removeFromParent()})));const c=n.floor((n.time()-a.analytic.lastFxNewRankTime)/1e3);a.utilsFB.log("ev_continue_after_kill_boss",1,{user_delay_time:c})},fxGoldFlyToBar(e,t,i=0){const o=a.nodeFactory.getNewIconGold(cc.find("Canvas/fx_container"));a.utils.setGlobalPositionToNode(o,e);const l=cc.find("Canvas/shop_layer/gold_bar/icon_gold"),s=a.utils.getGlobalPosition(l),r=a.utils.global2LocalPosDiff(o,s.x,s.y),c=2*n.random()*n.PI,u=cc.v2(60*n.sin(c),60*n.cos(c));u.addSelf(r.div(2)),r.subSelf(u),o.scale=.85,o.opacity=200,o.runAction(cc.sequence(cc.delayTime(i),cc.moveBy(.2,u),cc.moveBy(.4,r),cc.callFunc(()=>{o.active=!1,t&&t()})))}},cc._RF.pop()},{"../all_modules":"all_modules"}],game_flow:[function(e,t,i){"use strict";cc._RF.push(t,"9f23d7iQo5EnLcYGMrVGpaU","game_flow"),Object.defineProperty(i,"__esModule",{value:!0}),i.gameFlow=void 0;const a=e("./all_modules");a._,i.gameFlow={bestScore:0,isVideoContinueWatched:!1,init(){this.startNewGame()},startNewGame(){a.video.isVideoShownLastGame=!1,a.coreGame.resetGame(),a.ui.hideLayer("layer_game_over"),a.ui.hideLayer("layer_pause"),cc.find("Canvas/layer_tut").active||a.coreGame.resume(),this.isVideoContinueWatched=!1},handleGameOver(){if(a.coreGame.pause(),this.isVideoContinueWatched||!a.video.isAvailable)return this.realGameOver();a.audio.playSound("game_over",2),cc.find("Canvas/layer_video_continue").active=!0},realGameOver(){a.coreGame.pause();const e=cc.find("Canvas/layer_game_over/buttonReplay");e.active=!1,a.ui.showLayer("layer_game_over"),a.audio.playSound("game_over",2),a.analytic.logGameOver(),a.rank.isIconRankClicked&&a.shop.check2ShowGuideOpenShop(),a.leaderboard.updateScore(a.user.bestScore),a.social.askShortcut(()=>{e.active=!0})},pause(){a.coreGame.pause(),a.ui.showLayer("layer_pause")},resume(){a.coreGame.resume(),a.ui.hideLayer("layer_pause")},onVideoWatched(){a.ui.hideLayer("layer_video_continue"),this.isVideoContinueWatched=!0,a.coreGame.resume(),a.coreGame.pushBricksUpAfterVideo(),a.video.isVideoShownLastGame=!0},onVideFailed(){a.ui.hideLayer("layer_video_continue"),a.ui.showAlert("Sorry\n\nVideo error",()=>this.realGameOver())},isUpdatedRankFirstTime:!1,updateHighScore(){a.utils.setLabelText(cc.find("Canvas/layer_play_area/playing_header_bg/score_layout/label_best_score"),a.utils.formatNumber(a.user.bestScore)),a.utils.setLabelText(cc.find("Canvas/layer_game_over/label_best_score"),"Best: "+a.utils.formatNumber(a.user.bestScore)),a.utils.setLabelText(cc.find("Canvas/layer_rank_detail/bg_pause_small/label_best"),a.utils.formatNumber(a.user.bestScore)),a.rank.updateRankIcon(this.isUpdatedRankFirstTime),this.isUpdatedRankFirstTime=!0},onScore(){const e=a.coreGame.currentScore;a.user.bestScore<e&&(a.user.bestScore=e,a.data.saveData({bestScore:e}),this.updateHighScore())},resetRank(){a.fx.hideWaveNIsComing(),a.user.initNewUser({}),a.ui.updateScore(0),a.ui.updateGold(),a.rank.currentRankIndex=0,a.rank.updateRankIcon(!1),this.updateHighScore(),a.coreGame.resetBallShooter(),a.shop.renderShop(),a.leaderboard.updateScore(a.user.bestScore),a.leaderboard.renderList(),a.ui.hideLayer("layer_rank_detail"),a.ui.hideLayer("layer_pause"),a.ui.hideLayer("layer_game_over"),a.ui.hideLayer("layer_new_rank"),this.startNewGame(),a.utilsFB.log("ev_confirm_reset_rank")}},cc._RF.pop()},{"./all_modules":"all_modules"}],instant_utils:[function(e,t,i){"use strict";cc._RF.push(t,"dea51EdomZLOI9OjPxOERYn","instant_utils"),Object.defineProperty(i,"__esModule",{value:!0}),i._=void 0,i._={NO_CONSOLE_LOG:!1,isANDROID:cc.sys.os==cc.sys.OS_ANDROID,isIOS:cc.sys.os==cc.sys.OS_IOS,max:Math.max,min:Math.min,round:Math.round,floor:Math.floor,ceil:Math.ceil,sign:Math.sign,abs:Math.abs,random:Math.random,sqrt:Math.sqrt,atan2:Math.atan2,sin:Math.sin,cos:Math.cos,PI:Math.PI,removeArrItem(e,t){const i=e.indexOf(t);if(-1!=i)return e.splice(i,1),!0},time:()=>(new Date).getTime(),isString:e=>"string"==typeof e,isFunction:e=>e&&"[object Function]"==={}.toString.call(e),log(...e){if(!i._.NO_CONSOLE_LOG)try{console.log(...e)}catch(t){}},randomNumberBetween:(e,t)=>e==t?e:Math.floor(Math.random()*(t-e+1))+e},cc._RF.pop()},{}],inter_ad:[function(e,t,i){"use strict";cc._RF.push(t,"7d8c7BBvvtMMqzIQkwP6qt1","inter_ad"),Object.defineProperty(i,"__esModule",{value:!0}),i.interAd=void 0;const a=e("../all_modules"),n=a._;i.interAd={isLoading:!1,init(){this.preloadInterAds()},interAdObj:null,preloadInterAds(){window.FBInstant&&(this.isLoading||(n.log("interAd.preloadInterAds ...  "),this.interAdObj=null,this.isLoading=!0,FBInstant.getInterstitialAdAsync(a.configs.interAdId).then(e=>{e.loadAsync().then(()=>{n.log("interAd.preloadInterAds successfully "),this.interAdObj=e,this.isLoading=!1}).catch(e=>{console.warn(e),this.isLoading=!1})}).catch(e=>{console.warn(e),this.isLoading=!1})))},showInterAds(e,t,i=1){if(n.log(" showInterAds 1111 "),!window.FBInstant)return t&&t();a.utils.waitToRun(()=>{this.interAdObj.showAsync().then(()=>{a.interAd.log(e,1),t&&t(),this.preloadInterAds()}).catch(i=>{n.log("interAd.showInterAds fail ",i),a.interAd.log(e,0,i.code),t&&t(),"RATE_LIMITED"!=i.code&&this.preloadInterAds()})},"interAdObj",this,.1,i,()=>{n.log("interAd.showInterAds fail - LOAD_FAIL "),this.preloadInterAds(),t&&t()})},log(e,t,i=""){a.utilsFB.log("ev_inter_ad",1,{position:e,watched_success:t,err_code:i}),t&&(a.utilsFB.log("Ads-Total-Inter"),a.utilsFB.log("Ads-Total"))},replayCount2ShowAd:0,checkToShowInterAd(e,t){if(a.video.isVideoShownLastGame)return t&&t();this.replayCount2ShowAd++,this.replayCount2ShowAd%a.configs.showInterAdAfterEveryReplayTime==1||a.rank.currentRankIndex>=4?this.showInterAds(e,t):t&&t()}},cc._RF.pop()},{"../all_modules":"all_modules"}],leaderboard:[function(e,t,i){"use strict";cc._RF.push(t,"e52d07z2eVE/pGrFH9hewAg","leaderboard"),Object.defineProperty(i,"__esModule",{value:!0}),i.leaderboard=void 0;const a=e("./all_modules"),n=a._;i.leaderboard={friendArr:null,init(){this.syncFriendListWithPlayFab(),a.rank.addRankIndexLoadedCallback(()=>{this.updateScore(a.user.bestScore)})},getFriendLeaderboard(e){this.callPlayFabAPI("GetFriendLeaderboard",{StatisticName:"score"},t=>{t.Leaderboard.map((e,t)=>{const i=this.friendArr.find(t=>e.PlayFabId==t.playfabId);i&&(i.score=e.StatValue,i.rank=t+1)}),e&&e()})},updateScore(e){this.callPlayFabAPI("UpdatePlayerStatistics",{Statistics:[{StatisticName:"score",Value:e}]},e=>{n.log("leaderboard updated data = ",e)})},syncFriendListWithPlayFab(){window.FBInstant&&this.getFBFriendArr(()=>{this.getFriendsPlayfabIds(()=>{this.addAllFriendsToPlayfab(()=>{this.getFriendLeaderboard(()=>{cc.find("Canvas/top_buttons/leaderboard").active=!0,this.renderList()})})})})},getFBFriendArr(e){FBInstant.player.getConnectedPlayersAsync().then(t=>{this.friendArr=t.map(e=>({fbid:e.getID(),name:e.getName(),photo:e.getPhoto(),score:0})),e&&e()})},getFriendsPlayfabIds(e){this.fbIdArrToPlayfabIdArr(this.friendArr.map(e=>e.fbid),t=>{t.map(e=>{if(!e.PlayFabId)return;const t=this.friendArr.find(t=>e.FacebookInstantGamesId==t.fbid);t&&(t.playfabId=e.PlayFabId)}),e&&e()})},fbIdArrToPlayfabIdArr(e,t){this.callPlayFabAPI("GetPlayFabIDsFromFacebookInstantGamesIds",{FacebookInstantGamesIds:e},e=>{t(e.Data)})},addSingleFriend(e,t){this.callPlayFabAPI("AddFriend",{FriendPlayFabId:e},()=>t&&t())},addAllFriendsToPlayfab(e){let t=this.friendArr.filter(e=>e.playfabId).length;this.friendArr.map(i=>{i.fbid!=a.user.id&&i.playfabId&&this.addSingleFriend(i.playfabId,()=>{!--t&&e&&e()})})},renderList(){if(!this.friendArr)return;const e=cc.find("Canvas/layer_leaderboard/bg_pause_small/list/view/content"),t=cc.find("Canvas/layer_leaderboard/bg_pause_small/list/sample_row");e.removeAllChildren();const i=[{fbid:a.user.id,name:a.user.name,photo:a.user.photo,score:a.user.bestScore},...this.friendArr];i.sort((e,t)=>e.score>t.score?-1:1),i.map((i,o)=>{const l=a.utils.copyNodeTo(t,e);l.active=!0;const s=a.rank.scoreToRankIndex(i.score);a.utils.setNodeImg(cc.find("rank_icon",l),a.ui.rankSprite[s+1]),a.utils.setLabelText(cc.find("label_score",l),""+a.utils.formatNumber(i.score)),a.utils.setLabelText(cc.find("label_user_name",l),i.name),a.utils.setLabelText(cc.find("label_order",l),`#${o+1}`),o<3&&(cc.find(`bg_${o+1}`,l).active=!0),cc.find("trophy",l).active=!o,cc.assetManager.loadRemote(i.photo,(e,t)=>{if(e)return n.log("err loading avatar",e);a.utils.setNodeImg(cc.find("ava_mask/ava",l),new cc.SpriteFrame(t))})});const o=a.utils.copyNodeTo(cc.find("Canvas/layer_leaderboard/bg_pause_small/btn_invite"),e);o.active=!0,a.utils.addButtonComp(o,()=>{a.social.invite()})},callPlayFabAPI(e,t,i){window.FBInstant&&a.utils.waitToRun(()=>{const n=`https://b4239.playfabapi.com/Server/${e}`,o=new XMLHttpRequest;o.open("POST",n,!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("X-SecretKey","8ICHXJ5YO33TPT71DKCO8FACBWUZIAU9HT1347DP48XOSAUFT9"),o.send(JSON.stringify(Object.assign({PlayFabId:a.user.playfabId},t||{}))),o.onload=function(){const e=JSON.parse(this.responseText);i&&i(e.data)}},"playfabId",a.user)}},cc._RF.pop()},{"./all_modules":"all_modules"}],load_optimize:[function(e,t,i){"use strict";cc._RF.push(t,"f5ee7j+3BNGAqSOZyWVtbUr","load_optimize"),Object.defineProperty(i,"__esModule",{value:!0}),i.loadOptimize=void 0;const a=e("./all_modules"),n=a._;i.loadOptimize={init(){a.utils.setTimeout(()=>{cc.resources.load("late_load/game_bg",cc.SpriteFrame,(e,t)=>{if(e)return n.log("error loading img game bg",e);["Canvas/layer_tut/newbie_tut/game_bg","Canvas/layer_background/game_bg"].map(e=>{const i=cc.find(e);a.utils.setNodeImg(i,t),i.runAction(cc.fadeTo(.4,170))})})},1e3),a.utils.setTimeout(()=>{cc.resources.load("social/pic_share",cc.SpriteFrame,(e,t)=>{if(e)return n.log("error loading img share",e);a.utils.setNodeImg(cc.find("Canvas/social/pic_share/pic_share"),t)}),cc.resources.load("social/pic_invite",cc.SpriteFrame,(e,t)=>{if(e)return n.log("error loading img invite",e);a.utils.setNodeImg(cc.find("Canvas/social/pic_invite/pic_invite"),t),a.social.onInviteImageLoaded()})},4e3)}},cc._RF.pop()},{"./all_modules":"all_modules"}],login:[function(e,t,i){"use strict";cc._RF.push(t,"250c3vhvBtM1Yimi4f74bWo","login"),Object.defineProperty(i,"__esModule",{value:!0}),i.login=void 0;const a=e("./all_modules"),n=a._,o=["LoginTime","IsOldUser"],l=[];i.login={loginData:null,init(){a.utils.waitToRun(()=>{a.data.loadEntryPointData(),a.login.getFBData()},"isUserReady",a.data)},addLoginDataField(e){o.includes(e)||o.push(e)},addCallback(e){a.login.loginData?e(a.login.loginData):l.push(e)},getFBData(){a.data.loadData(o,e=>{if(e.isNewUser=!e.IsOldUser,e.isNewUser)return a.utilsFB.log("ev_login_new_user_incoming"),a.user.initNewUser(e),a.login.initLogin(e),a.data.saveData({IsOldUser:!0}),void a.ui.updateGold();a.login.initLogin(e)})},initLogin(e){a.login.isInitLoginCalled||(a.login.isInitLoginCalled=!0,a.login.loginData=e,a.user.lastLoginTime=e.LoginTime||n.time(),l.map(t=>{t(e)}))}},cc._RF.pop()},{"./all_modules":"all_modules"}],map_config:[function(e,t,i){"use strict";cc._RF.push(t,"6633bXzO8pIs77lZyjIdxh0","map_config"),Object.defineProperty(i,"__esModule",{value:!0}),i.mapConfig=void 0;const a=e("./all_modules"),n=a._;i.mapConfig={init(){setTimeout(()=>{const e=[...a.mapConfig.startMapPart];for(let t=0;t<30;t++){let t=e.findIndex(e=>e[0]&&e[0].isBossBrick),i=0;for(let a=0;a<=t;a++){const o=e.shift().map(e=>e.y);a!=t&&(i+=o.length?n.max(...o)-n.min(...o)+1:1)}}})},startMapPart:[a.mapTools.horzLine(2),a.mapTools.horzLine(3),[{initValue:0,isGoldBrick:!0,goldCount:50,x:0,y:0}],a.mapTools.horzLine(4),a.mapTools.horzLine(5),a.mapTools.horzLine(6),[],[{initValue:16,x:8,y:0,shuttle:{speed:300,x1:2,x2:6}}],[{initValue:0,isGoldBrick:!0,goldCount:50,x:0,y:0}],a.mapTools.chessBoardA(10,21,10,21),[],[{initValue:26,x:8,y:0,shuttle:{speed:300,x1:2,x2:6}}],a.mapTools.setMapChunkBoss([...a.mapTools.arrowBottom(27,2),{initValue:40,x:0,y:6},{initValue:40,x:1,y:5},{initValue:40,x:2,y:4},{initValue:40,x:6,y:4},{initValue:40,x:7,y:5},{initValue:40,x:8,y:6}]),a.mapTools.horzLine(16),a.mapTools.chessBoardA(0,8,12,16,20),[{initValue:0,isGoldBrick:!0,goldCount:60,x:0,y:0}],[...a.mapTools.makeChunkShuttle(a.mapTools.horzLine(24,[0,1,7,8]),300)],a.mapTools.wave(35,2,5),[{initValue:0,isGoldBrick:!0,goldCount:60,x:0,y:0}],a.mapTools.wave(25,0,5),a.mapTools.setMapChunkBoss([...a.mapTools.dollarSign(30,2),{initValue:60,x:0,y:8},{initValue:60,x:1,y:8},{initValue:60,x:7,y:8},{initValue:60,x:8,y:8}]),a.mapTools.solidSquare(12,5,5,2),[{initValue:0,isGoldBrick:!0,goldCount:60,x:0,y:0}],[...a.mapTools.makeChunkShuttle(a.mapTools.horzLine(35,[0,1,7,8]),300)],[{initValue:30,x:8,y:0,shuttle:{speed:400,x1:0,x2:8}},{initValue:30,x:0,y:1,shuttle:{speed:400,x1:0,x2:8,isReversed:!0}}],[{initValue:0,isGoldBrick:!0,goldCount:100,x:0,y:0}],a.mapTools.wave(22,0,3),a.mapTools.wave(9,1,3),a.mapTools.setMapChunkBoss([{initValue:27,x:1,y:0},{initValue:27,x:7,y:0},{initValue:27,x:2,y:1},{initValue:27,x:6,y:1},{initValue:27,x:3,y:2},{initValue:27,x:5,y:2},...a.mapTools.addChunkOffset(a.mapTools.blankSquare(27,7,5,1),0,3),{initValue:66,x:2.5,y:5},{initValue:66,x:3.5,y:5},{initValue:66,x:4.5,y:5},{initValue:66,x:5.5,y:5}]),a.mapTools.chessBoardA(13,18,33,38),[{initValue:0,isGoldBrick:!0,goldCount:100,x:0,y:0}],[{initValue:40,x:8,y:0,shuttle:{speed:400,x1:0,x2:8}},{initValue:40,x:0,y:1,shuttle:{speed:400,x1:0,x2:8,isReversed:!0}}],[{initValue:0,isGoldBrick:!0,goldCount:100,x:0,y:0}],a.mapTools.vertLines(19,[1,3,5,7],5),[],a.mapTools.setMapChunkBoss([...a.mapTools.smileFace(30),{initValue:72,x:2.5,y:10},{initValue:72,x:3.5,y:10},{initValue:72,x:4.5,y:10},{initValue:72,x:5.5,y:10}]),[{initValue:50,x:8,y:0,shuttle:{speed:400,x1:0,x2:8}},{initValue:50,x:0,y:1,shuttle:{speed:400,x1:0,x2:8,isReversed:!0}}],[],a.mapTools.wave(24,0,3),[{initValue:40,x:5,y:0,shuttle:{speed:500,x1:5,x2:8,isReversed:!0}},{initValue:40,x:3,y:0,shuttle:{speed:500,x1:0,x2:3}}],[{initValue:0,isGoldBrick:!0,goldCount:50,x:0,y:0}],a.mapTools.chessBoardA(33,11,22,11),[],[{initValue:0,isGoldBrick:!0,goldCount:100,x:0,y:0}],a.mapTools.setMapChunkBoss([{initValue:35,x:2,y:0},{initValue:35,x:3,y:1},{initValue:35,x:4,y:2},{initValue:35,x:5,y:1},{initValue:35,x:6,y:0},{initValue:55,x:2,y:3},{initValue:55,x:3,y:4},{initValue:55,x:4,y:5},{initValue:55,x:5,y:4},{initValue:55,x:6,y:3},{initValue:70,x:5,y:5,shuttle:{speed:500,x1:5,x2:8,isReversed:!0}},{initValue:70,x:3,y:5,shuttle:{speed:500,x1:0,x2:3}},{initValue:85,x:2,y:6},{initValue:85,x:3,y:7},{initValue:85,x:4,y:8},{initValue:85,x:5,y:7},{initValue:85,x:6,y:6}]),a.mapTools.arrowLeft(35,1),[{initValue:30,x:5,y:0,shuttle:{speed:500,x1:5,x2:8,isReversed:!0}},{initValue:30,x:5,y:1,shuttle:{speed:500,x1:5,x2:8,isReversed:!0}},{initValue:30,x:3,y:0,shuttle:{speed:500,x1:0,x2:3}},{initValue:30,x:3,y:1,shuttle:{speed:500,x1:0,x2:3}}],[{initValue:0,isGoldBrick:!0,goldCount:150,x:0,y:0}],a.mapTools.horzLine(30),[...a.mapTools.arrowTop(20,0),...a.mapTools.arrowBottom(30,4)],a.mapTools.setMapChunkBoss([...a.mapTools.horzLine(40,[0,1,7,8]),...a.mapTools.addChunkOffset(a.mapTools.letterE(64,2.5),0,2),{initValue:90,x:4,y:3.5},{initValue:90,x:5.5,y:3.5},{initValue:90,x:4,y:6.5},{initValue:90,x:5.5,y:6.5},{initValue:90,x:1,y:5}]),[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],[{initValue:60,x:8,y:0,shuttle:{speed:500,x1:5,x2:8}},{initValue:60,x:3,y:0,shuttle:{speed:500,x1:0,x2:3}}],[{initValue:0,isGoldBrick:!0,goldCount:100,x:0,y:0}],[...a.mapTools.biasLineLeft(12,0,8),...a.mapTools.biasLineLeft(22,0,6),...a.mapTools.biasLineLeft(32,0,4),{initValue:40,x:8,y:6,shuttle:{speed:400,x1:5,x2:8}},{initValue:40,x:7,y:7,shuttle:{speed:400,x1:4,x2:7}},{initValue:40,x:8,y:7,shuttle:{speed:400,x1:5,x2:8}},{initValue:40,x:8,y:8,shuttle:{speed:400,x1:5,x2:8}}],[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],a.mapTools.setMapChunkBoss([{initValue:50,x:2,y:0},{initValue:50,x:6,y:0},...a.mapTools.addChunkOffset(a.mapTools.letterH(70,2),0,2),{initValue:60,x:.5,y:4},{initValue:60,x:7.5,y:4},{initValue:80,x:.5,y:6},{initValue:80,x:7.5,y:6},{initValue:100,x:.5,y:8},{initValue:100,x:7.5,y:8}]),[...a.mapTools.biasLineRight(31,0,8),...a.mapTools.biasLineRight(41,2,8),...a.mapTools.biasLineRight(51,4,8),{initValue:50,x:3,y:6,shuttle:{speed:400,x1:0,x2:3}},{initValue:50,x:4,y:7,shuttle:{speed:400,x1:1,x2:4}},{initValue:50,x:3,y:7,shuttle:{speed:400,x1:0,x2:3}},{initValue:50,x:3,y:8,shuttle:{speed:400,x1:0,x2:3}}],[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],[],a.mapTools.vertLines(13,[0,2,4,6,8],3),a.mapTools.setMapChunkBoss([{initValue:70,x:1,y:0},{initValue:70,x:7,y:0},...a.mapTools.addChunkOffset(a.mapTools.cornerTriangleBottomLeft(50,4),0,2),...a.mapTools.addChunkOffset(a.mapTools.cornerTriangleBottomRight(50,4,5),0,2),{initValue:100,x:1,y:9},{initValue:110,x:2,y:8},{initValue:120,x:3,y:6.5},{initValue:130,x:4,y:5},{initValue:120,x:5,y:6.5},{initValue:110,x:6,y:8},{initValue:100,x:7,y:9}]),a.mapTools.vertLines(60,[1,3,5,7],3),[],[...a.mapTools.blankSquare(25,7,5,1),...a.mapTools.addChunkOffset(a.mapTools.solidSquare(30,3,2,3),0,1.5)],[...a.mapTools.makeChunkShuttle(a.mapTools.solidSquare(30,5,2,0),300)],[{initValue:0,isGoldBrick:!0,goldCount:100,x:0,y:0}],[],a.mapTools.chessBoardA(15,22,30),a.mapTools.setMapChunkBoss([...a.mapTools.angryFace(65,180)]),[...a.mapTools.triangleTop(15,7,1),...a.mapTools.addChunkOffset(a.mapTools.triangleRight(25,7,0),0,2),...a.mapTools.addChunkOffset(a.mapTools.triangleLeft(25,7,5),0,2),...a.mapTools.addChunkOffset(a.mapTools.triangleBottom(35,7,1),0,7)],[],[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],a.mapTools.setMapChunkBoss([...a.mapTools.letterZ(79,1),{initValue:210,x:7,y:2},{initValue:210,x:1,y:4}]),[...a.mapTools.triangleLeft(40,5,2),{initValue:60,x:8,y:2,shuttle:{speed:600,x1:5,x2:8}}],[...a.mapTools.triangleRight(50,5,4),{initValue:70,x:3,y:2,shuttle:{speed:600,x1:0,x2:3}}],[...a.mapTools.triangleLeft(60,5,2),{initValue:80,x:8,y:2,shuttle:{speed:600,x1:5,x2:8}}],[{initValue:0,isGoldBrick:!0,goldCount:300,x:0,y:0}],a.mapTools.setMapChunkBoss([...a.mapTools.letterU(100,2),{initValue:250,x:4,y:2},{initValue:250,x:4,y:4.5}]),[...a.mapTools.letterC(29,1),{initValue:39,x:4,y:2,shuttle:{speed:500,x1:4,x2:7}},{initValue:39,x:3,y:3,shuttle:{speed:500,x1:3,x2:6}},{initValue:39,x:4,y:3,shuttle:{speed:500,x1:4,x2:7}},{initValue:39,x:5,y:3,shuttle:{speed:500,x1:5,x2:8}},{initValue:39,x:4,y:4,shuttle:{speed:500,x1:4,x2:7}}],[...a.mapTools.makeChunkShuttle(a.mapTools.blankSquare(30,3,3))],[{initValue:0,isGoldBrick:!0,goldCount:100,x:0,y:0}],[...a.mapTools.blankSquare(40,3,3,1),...a.mapTools.blankSquare(40,3,3,5),...a.mapTools.vertLines(28,[0,4,8],3)],[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],a.mapTools.setMapChunkBoss([...a.mapTools.questionMark(140,2),{initValue:280,x:1,y:3},{initValue:280,x:7,y:3}]),[...a.mapTools.biasLineLeft(7,0,6),...a.mapTools.biasLineLeft(17,0,8),...a.mapTools.biasLineRight(27,1,8),...a.mapTools.addChunkOffset(a.mapTools.biasLineRight(37,0,8),0,1)],[],[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],[...a.mapTools.blankSquare(45,3,3,1),...a.mapTools.blankSquare(45,3,3,5)],a.mapTools.setMapChunkBoss([...a.mapTools.heart(140),{initValue:400,x:4,y:9}]),[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],[...a.mapTools.blankSquare(20,9,6),...a.mapTools.addChunkOffset(a.mapTools.blankSquare(30,6,3,1.5),0,1.5)],[],a.mapTools.letterM(50,1),a.mapTools.setMapChunkBoss([...a.mapTools.letterX(110,1),{initValue:320,x:4,y:0},{initValue:320,x:.5,y:3},{initValue:320,x:7.5,y:3},{initValue:320,x:4,y:6}]),a.mapTools.blankSquare(55,3,3,3),[{initValue:0,isGoldBrick:!0,goldCount:100,x:0,y:0}],a.mapTools.horzLine(43),a.mapTools.horzLine(34),a.mapTools.letterO(20,2),a.mapTools.setMapChunkBoss([...a.mapTools.number1(100,2),...a.mapTools.vertLines(100,[0,8],7)]),[{initValue:0,isGoldBrick:!0,goldCount:100,x:0,y:0}],[{initValue:0,isGoldBrick:!0,goldCount:100,x:0,y:0}],a.mapTools.letterK(40,2),[{initValue:0,isGoldBrick:!0,goldCount:100,x:0,y:0}],[{initValue:0,isGoldBrick:!0,goldCount:100,x:0,y:0}],[...a.mapTools.plusSign(80,2,2),...a.mapTools.vertLines(50,[0,8],5)],a.mapTools.setMapChunkBoss([...a.mapTools.triangleBottom(120,3,2),...a.mapTools.addChunkOffset(a.mapTools.cornerTriangleBottomLeft(120,3,0),0,3),...a.mapTools.addChunkOffset(a.mapTools.cornerTriangleBottomRight(120,3,6),0,3)]),[{initValue:0,isGoldBrick:!0,goldCount:100,x:0,y:0}],a.mapTools.asterisk(40),[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],a.mapTools.wave(30,0,3),a.mapTools.setMapChunkBoss([...a.mapTools.letterO(150,2),{initValue:280,x:.5,y:3},{initValue:280,x:4,y:3},{initValue:280,x:7.5,y:3}]),a.mapTools.wave(30,0,5),a.mapTools.wave(40,0,5),[{initValue:0,isGoldBrick:!0,goldCount:100,x:0,y:0}],[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],[...a.mapTools.letterI(30,.5),...a.mapTools.letterJ(30,4.5)],a.mapTools.setMapChunkBoss([...a.mapTools.number8(140,2),{initValue:280,x:.5,y:2},{initValue:280,x:.5,y:4},{initValue:280,x:7.5,y:2},{initValue:280,x:7.5,y:4}]),a.mapTools.horzLine(62),[{initValue:0,isGoldBrick:!0,goldCount:300,x:0,y:0}],a.mapTools.chessBoardB(78,88,98,108,98,88,78),[{initValue:0,isGoldBrick:!0,goldCount:100,x:0,y:0}],a.mapTools.setMapChunkBoss([...a.mapTools.number2(190,2)]),a.mapTools.wave(60,2,5),a.mapTools.wave(80,2,5),a.mapTools.chessBoardA(26,36,46,36,26),[{initValue:0,isGoldBrick:!0,goldCount:100,x:0,y:0}],[{initValue:0,isGoldBrick:!0,goldCount:100,x:0,y:0}],[{initValue:0,isGoldBrick:!0,goldCount:100,x:0,y:0}],[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],a.mapTools.setMapChunkBoss([...a.mapTools.makeChunkShuttle(a.mapTools.letterS(140,2))]),a.mapTools.wave(50,0,3),[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],[...a.mapTools.vertLines(16,[0,2,4,6,8],3),...a.mapTools.vertLines(70,[1,3,5,7],3)],[],[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],a.mapTools.letterX(93,1),a.mapTools.setMapChunkBoss([...a.mapTools.letterN(140,1),{initValue:280,x:3,y:0},{initValue:280,x:5,y:6}]),[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],[...a.mapTools.wave(30,0,5),...a.mapTools.addChunkOffset(a.mapTools.wave(40,0,5),0,1),...a.mapTools.addChunkOffset(a.mapTools.wave(50,0,5),0,2),...a.mapTools.addChunkOffset(a.mapTools.wave(70,0,5),0,4)],[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],a.mapTools.letterY(110,1),a.mapTools.setMapChunkBoss([...a.mapTools.makeChunkShuttle(a.mapTools.number6(190,2))]),a.mapTools.chessBoardA(40,70),[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],[...a.mapTools.biasLineRight(20,0,4),...a.mapTools.biasLineRight(80,1,5),...a.mapTools.biasLineRight(20,2,6),...a.mapTools.biasLineRight(80,3,7),...a.mapTools.biasLineRight(20,4,8)],[...a.mapTools.biasLineLeft(20,0,3),...a.mapTools.biasLineLeft(80,1,4),...a.mapTools.biasLineLeft(20,2,5),...a.mapTools.biasLineLeft(80,3,6),...a.mapTools.biasLineLeft(20,4,7)],[{initValue:0,isGoldBrick:!0,goldCount:100,x:0,y:0}],[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],a.mapTools.setMapChunkBoss([...a.mapTools.makeChunkShuttle(a.mapTools.arrowLeft(190,2)),...a.mapTools.makeChunkShuttle(a.mapTools.addChunkOffset(a.mapTools.arrowRight(190,2),0,5))]),a.mapTools.letterR(100,2.2),[{initValue:0,isGoldBrick:!0,goldCount:300,x:0,y:0}],a.mapTools.letterT(100,2.2),[{initValue:0,isGoldBrick:!0,goldCount:300,x:0,y:0}],a.mapTools.setMapChunkBoss([...a.mapTools.cornerTriangleTopRight(140,2,1),...a.mapTools.cornerTriangleTopLeft(140,2,5),...a.mapTools.addChunkOffset(a.mapTools.cornerTriangleBottomRight(140,2,1),0,4),...a.mapTools.addChunkOffset(a.mapTools.cornerTriangleBottomLeft(140,2,5),0,4)]),a.mapTools.horzLine(30,[4]),a.mapTools.horzLine(70,[3,5]),a.mapTools.horzLine(40,[2,6]),[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],[...a.mapTools.blankSquare(40,7,7,1),...a.mapTools.addChunkOffset(a.mapTools.blankSquare(50,5,5,2),0,1),...a.mapTools.addChunkOffset(a.mapTools.blankSquare(80,2,2,3.5),0,2.5)],[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],[...a.mapTools.plusSign(90,1,.5),...a.mapTools.plusSign(90,1,5.5),...a.mapTools.addChunkOffset(a.mapTools.plusSign(100,1,3),0,3)],a.mapTools.setMapChunkBoss([...a.mapTools.blankSquare(100,9,6,0),...a.mapTools.addChunkOffset(a.mapTools.cornerTriangleBottomLeft(100,2,.5),0,6),...a.mapTools.addChunkOffset(a.mapTools.cornerTriangleBottomRight(100,2,5.5),0,6),{initValue:200,x:2,y:3},{initValue:200,x:6,y:3}]),[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],a.mapTools.number3(110,2),[],[{initValue:0,isGoldBrick:!0,goldCount:200,x:0,y:0}],a.mapTools.number4(110,1.5),a.mapTools.setMapChunkBoss([...a.mapTools.rainbow(130),...a.mapTools.addChunkOffset(a.mapTools.rainbow(140),0,2),...a.mapTools.addChunkOffset(a.mapTools.rainbow(150),0,4)])],repeatedMapPart:[a.mapTools.wave(106),[],[],[...a.mapTools.vertLines(27,[1,3,5,7],5),...a.mapTools.vertLines(67,[0,2,4,6,8],5)],[],[],[...a.mapTools.vertLines(47,[1,3,5,7],5),...a.mapTools.vertLines(87,[0,2,4,6,8],5)],[],[],a.mapTools.chessBoardB(60,90,120,150,180,210,240),[],[],[]]},cc._RF.pop()},{"./all_modules":"all_modules"}],map_part_generator:[function(e,t,i){"use strict";cc._RF.push(t,"37af0ws42NGqa6AD9/BG4KU","map_part_generator"),Object.defineProperty(i,"__esModule",{value:!0}),i.mapTools=void 0;const a=e("./all_modules")._;i.mapTools={setMapChunkBoss:e=>(e.map(e=>e.isBossBrick=!0),e),addChunkOffset:(e,t=0,i=0)=>(e.map(e=>(e.x+=t,e.y+=i,e)),e),makeChunkShuttle(e,t=300,i=!1){const n=e.map(e=>e.x),o=a.min(...n),l=8-(a.max(...n)-o)-0,s=n.map(e=>e-o);return e.map((e,a)=>{const n=0+s[a];e.shuttle={speed:t,isReversed:i,x1:n,x2:n+l}}),e},rainbow:e=>[{initValue:e,x:0,y:0},{initValue:e,x:8,y:0},{initValue:e,x:1,y:1},{initValue:e,x:7,y:1},{initValue:e,x:2,y:1.5},{initValue:e,x:6,y:1.5},{initValue:e,x:3,y:2},{initValue:e,x:5,y:2},{initValue:e,x:4,y:2}],heart:e=>[{initValue:e,x:4,y:0},{initValue:e,x:3,y:1},{initValue:e,x:5,y:1},{initValue:e,x:2,y:2},{initValue:e,x:6,y:2},{initValue:e,x:1,y:3},{initValue:e,x:7,y:3},{initValue:e,x:0,y:4},{initValue:e,x:8,y:4},{initValue:e,x:0,y:5},{initValue:e,x:4,y:5},{initValue:e,x:8,y:5},{initValue:e,x:0,y:6},{initValue:e,x:3,y:6},{initValue:e,x:5,y:6},{initValue:e,x:8,y:6},{initValue:e,x:1,y:7},{initValue:e,x:2,y:7},{initValue:e,x:6,y:7},{initValue:e,x:7,y:7}],letterC:(e,t=0)=>[{initValue:e,x:t+1,y:0},{initValue:e,x:t+2,y:0},{initValue:e,x:t+3,y:0},{initValue:e,x:t+0,y:1},{initValue:e,x:t+4,y:1},{initValue:e,x:t+0,y:2},{initValue:e,x:t+0,y:3},{initValue:e,x:t+0,y:4},{initValue:e,x:t+0,y:5},{initValue:e,x:t+4,y:5},{initValue:e,x:t+1,y:6},{initValue:e,x:t+2,y:6},{initValue:e,x:t+3,y:6}],letterE:(e,t=0)=>[{initValue:e,x:t+0,y:0},{initValue:e,x:t+1,y:0},{initValue:e,x:t+2,y:0},{initValue:e,x:t+3,y:0},{initValue:e,x:t+0,y:1},{initValue:e,x:t+0,y:2},{initValue:e,x:t+0,y:3},{initValue:e,x:t+1,y:3},{initValue:e,x:t+2,y:3},{initValue:e,x:t+3,y:3},{initValue:e,x:t+0,y:4},{initValue:e,x:t+0,y:5},{initValue:e,x:t+0,y:6},{initValue:e,x:t+1,y:6},{initValue:e,x:t+2,y:6},{initValue:e,x:t+3,y:6}],letterF:(e,t=0)=>[{initValue:e,x:t+0,y:0},{initValue:e,x:t+0,y:1},{initValue:e,x:t+0,y:2},{initValue:e,x:t+0,y:3},{initValue:e,x:t+1,y:3},{initValue:e,x:t+2,y:3},{initValue:e,x:t+0,y:4},{initValue:e,x:t+0,y:5},{initValue:e,x:t+0,y:6},{initValue:e,x:t+1,y:6},{initValue:e,x:t+2,y:6},{initValue:e,x:t+3,y:6}],letterG:(e,t=0)=>[{initValue:e,x:t+1,y:0},{initValue:e,x:t+2,y:0},{initValue:e,x:t+3,y:0},{initValue:e,x:t+0,y:1},{initValue:e,x:t+4,y:1},{initValue:e,x:t+0,y:2},{initValue:e,x:t+2,y:2},{initValue:e,x:t+3,y:2},{initValue:e,x:t+4,y:2},{initValue:e,x:t+0,y:3},{initValue:e,x:t+0,y:4},{initValue:e,x:t+0,y:5},{initValue:e,x:t+4,y:5},{initValue:e,x:t+1,y:6},{initValue:e,x:t+2,y:6},{initValue:e,x:t+3,y:6}],letterH:(e,t=0)=>[{initValue:e,x:t+0,y:0},{initValue:e,x:t+0,y:1},{initValue:e,x:t+0,y:2},{initValue:e,x:t+0,y:3},{initValue:e,x:t+0,y:4},{initValue:e,x:t+0,y:5},{initValue:e,x:t+0,y:6},{initValue:e,x:t+1,y:3},{initValue:e,x:t+2,y:3},{initValue:e,x:t+3,y:3},{initValue:e,x:t+4,y:0},{initValue:e,x:t+4,y:1},{initValue:e,x:t+4,y:2},{initValue:e,x:t+4,y:3},{initValue:e,x:t+4,y:4},{initValue:e,x:t+4,y:5},{initValue:e,x:t+4,y:6}],letterI:(e,t=0)=>[{initValue:e,x:t+0,y:0},{initValue:e,x:t+2,y:0},{initValue:e,x:t+0,y:6},{initValue:e,x:t+2,y:6},{initValue:e,x:t+1,y:0},{initValue:e,x:t+1,y:1},{initValue:e,x:t+1,y:2},{initValue:e,x:t+1,y:3},{initValue:e,x:t+1,y:4},{initValue:e,x:t+1,y:5},{initValue:e,x:t+1,y:6}],letterJ:(e,t=0)=>[{initValue:e,x:t+1,y:0},{initValue:e,x:t+2,y:0},{initValue:e,x:t+0,y:1},{initValue:e,x:t+3,y:1},{initValue:e,x:t+3,y:1},{initValue:e,x:t+3,y:2},{initValue:e,x:t+3,y:3},{initValue:e,x:t+3,y:4},{initValue:e,x:t+3,y:5},{initValue:e,x:t+0,y:6},{initValue:e,x:t+1,y:6},{initValue:e,x:t+2,y:6},{initValue:e,x:t+3,y:6}],letterK:(e,t=0)=>[{initValue:e,x:t+0,y:0},{initValue:e,x:t+0,y:1},{initValue:e,x:t+0,y:2},{initValue:e,x:t+0,y:3},{initValue:e,x:t+0,y:4},{initValue:e,x:t+0,y:5},{initValue:e,x:t+0,y:6},{initValue:e,x:t+4,y:0},{initValue:e,x:t+3,y:1},{initValue:e,x:t+2,y:2},{initValue:e,x:t+1,y:3},{initValue:e,x:t+2,y:4},{initValue:e,x:t+3,y:5},{initValue:e,x:t+4,y:6}],letterL:(e,t=0)=>[{initValue:e,x:t+0,y:0},{initValue:e,x:t+1,y:0},{initValue:e,x:t+2,y:0},{initValue:e,x:t+3,y:0},{initValue:e,x:t+4,y:0},{initValue:e,x:t+0,y:1},{initValue:e,x:t+0,y:2},{initValue:e,x:t+0,y:3},{initValue:e,x:t+0,y:4},{initValue:e,x:t+0,y:5},{initValue:e,x:t+0,y:6}],letterM:(e,t=0)=>[{initValue:e,x:t+0,y:0},{initValue:e,x:t+0,y:1},{initValue:e,x:t+0,y:2},{initValue:e,x:t+0,y:3},{initValue:e,x:t+0,y:4},{initValue:e,x:t+0,y:5},{initValue:e,x:t+0,y:6},{initValue:e,x:t+1,y:5},{initValue:e,x:t+2,y:4},{initValue:e,x:t+3,y:3},{initValue:e,x:t+4,y:4},{initValue:e,x:t+5,y:5},{initValue:e,x:t+6,y:0},{initValue:e,x:t+6,y:1},{initValue:e,x:t+6,y:2},{initValue:e,x:t+6,y:3},{initValue:e,x:t+6,y:4},{initValue:e,x:t+6,y:5},{initValue:e,x:t+6,y:6}],letterN:(e,t=0)=>[{initValue:e,x:t+0,y:0},{initValue:e,x:t+0,y:1},{initValue:e,x:t+0,y:2},{initValue:e,x:t+0,y:3},{initValue:e,x:t+0,y:4},{initValue:e,x:t+0,y:5},{initValue:e,x:t+0,y:6},{initValue:e,x:t+1,y:5},{initValue:e,x:t+2,y:4},{initValue:e,x:t+3,y:3},{initValue:e,x:t+4,y:2},{initValue:e,x:t+5,y:1},{initValue:e,x:t+6,y:0},{initValue:e,x:t+6,y:1},{initValue:e,x:t+6,y:2},{initValue:e,x:t+6,y:3},{initValue:e,x:t+6,y:4},{initValue:e,x:t+6,y:5},{initValue:e,x:t+6,y:6}],letterO:(e,t=0)=>[{initValue:e,x:t+1,y:0},{initValue:e,x:t+2,y:0},{initValue:e,x:t+3,y:0},{initValue:e,x:t+0,y:1},{initValue:e,x:t+4,y:1},{initValue:e,x:t+0,y:2},{initValue:e,x:t+4,y:2},{initValue:e,x:t+0,y:3},{initValue:e,x:t+4,y:3},{initValue:e,x:t+0,y:4},{initValue:e,x:t+4,y:4},{initValue:e,x:t+0,y:5},{initValue:e,x:t+4,y:5},{initValue:e,x:t+1,y:6},{initValue:e,x:t+2,y:6},{initValue:e,x:t+3,y:6}],letterP:(e,t=0)=>[{initValue:e,x:t+0,y:0},{initValue:e,x:t+0,y:1},{initValue:e,x:t+0,y:2},{initValue:e,x:t+0,y:3},{initValue:e,x:t+0,y:4},{initValue:e,x:t+0,y:5},{initValue:e,x:t+0,y:6},{initValue:e,x:t+1,y:3},{initValue:e,x:t+2,y:3},{initValue:e,x:t+3,y:3},{initValue:e,x:t+1,y:6},{initValue:e,x:t+2,y:6},{initValue:e,x:t+3,y:6},{initValue:e,x:t+4,y:4},{initValue:e,x:t+4,y:5}],letterR:(e,t=0)=>[{initValue:e,x:t+0,y:0},{initValue:e,x:t+0,y:1},{initValue:e,x:t+0,y:2},{initValue:e,x:t+0,y:3},{initValue:e,x:t+0,y:4},{initValue:e,x:t+0,y:5},{initValue:e,x:t+0,y:6},{initValue:e,x:t+1,y:3},{initValue:e,x:t+2,y:3},{initValue:e,x:t+3,y:3},{initValue:e,x:t+1,y:6},{initValue:e,x:t+2,y:6},{initValue:e,x:t+3,y:6},{initValue:e,x:t+4,y:4},{initValue:e,x:t+4,y:5},{initValue:e,x:t+2,y:2},{initValue:e,x:t+3,y:1},{initValue:e,x:t+4,y:0}],letterS:(e,t=0)=>[{initValue:e,x:t+1,y:0},{initValue:e,x:t+2,y:0},{initValue:e,x:t+3,y:0},{initValue:e,x:t+0,y:1},{initValue:e,x:t+4,y:1},{initValue:e,x:t+4,y:2},{initValue:e,x:t+1,y:3},{initValue:e,x:t+2,y:3},{initValue:e,x:t+3,y:3},{initValue:e,x:t+0,y:4},{initValue:e,x:t+0,y:5},{initValue:e,x:t+4,y:5},{initValue:e,x:t+1,y:6},{initValue:e,x:t+2,y:6},{initValue:e,x:t+3,y:6}],letterT:(e,t=0)=>[{initValue:e,x:t+0,y:6},{initValue:e,x:t+1,y:6},{initValue:e,x:t+3,y:6},{initValue:e,x:t+4,y:6},{initValue:e,x:t+2,y:0},{initValue:e,x:t+2,y:1},{initValue:e,x:t+2,y:2},{initValue:e,x:t+2,y:3},{initValue:e,x:t+2,y:4},{initValue:e,x:t+2,y:5},{initValue:e,x:t+2,y:6}],letterU:(e,t=0)=>[{initValue:e,x:t+1,y:0},{initValue:e,x:t+2,y:0},{initValue:e,x:t+3,y:0},{initValue:e,x:t+0,y:1},{initValue:e,x:t+4,y:1},{initValue:e,x:t+0,y:2},{initValue:e,x:t+4,y:2},{initValue:e,x:t+0,y:3},{initValue:e,x:t+4,y:3},{initValue:e,x:t+0,y:4},{initValue:e,x:t+4,y:4},{initValue:e,x:t+0,y:5},{initValue:e,x:t+4,y:5},{initValue:e,x:t+0,y:6},{initValue:e,x:t+4,y:6}],letterX:(e,t=0)=>[{initValue:e,x:t+0,y:0},{initValue:e,x:t+1,y:1},{initValue:e,x:t+2,y:2},{initValue:e,x:t+3,y:3},{initValue:e,x:t+4,y:4},{initValue:e,x:t+5,y:5},{initValue:e,x:t+6,y:6},{initValue:e,x:t+0,y:6},{initValue:e,x:t+1,y:5},{initValue:e,x:t+2,y:4},{initValue:e,x:t+4,y:2},{initValue:e,x:t+5,y:1},{initValue:e,x:t+6,y:0}],letterY:(e,t=0)=>[{initValue:e,x:t+3,y:0},{initValue:e,x:t+3,y:1},{initValue:e,x:t+3,y:2},{initValue:e,x:t+3,y:3},{initValue:e,x:t+4,y:4},{initValue:e,x:t+5,y:5},{initValue:e,x:t+6,y:6},{initValue:e,x:t+0,y:6},{initValue:e,x:t+1,y:5},{initValue:e,x:t+2,y:4}],letterZ:(e,t=0)=>[{initValue:e,x:t+0,y:0},{initValue:e,x:t+1,y:0},{initValue:e,x:t+2,y:0},{initValue:e,x:t+3,y:0},{initValue:e,x:t+4,y:0},{initValue:e,x:t+5,y:0},{initValue:e,x:t+6,y:0},{initValue:e,x:t+1,y:1},{initValue:e,x:t+2,y:2},{initValue:e,x:t+3,y:3},{initValue:e,x:t+4,y:4},{initValue:e,x:t+5,y:5},{initValue:e,x:t+6,y:6},{initValue:e,x:t+0,y:6},{initValue:e,x:t+1,y:6},{initValue:e,x:t+2,y:6},{initValue:e,x:t+3,y:6},{initValue:e,x:t+4,y:6},{initValue:e,x:t+5,y:6}],number1:(e,t=0)=>[{initValue:e,x:t+0,y:0},{initValue:e,x:t+1,y:0},{initValue:e,x:t+2,y:0},{initValue:e,x:t+3,y:0},{initValue:e,x:t+4,y:0},{initValue:e,x:t+2,y:1},{initValue:e,x:t+2,y:2},{initValue:e,x:t+2,y:3},{initValue:e,x:t+0,y:4},{initValue:e,x:t+2,y:4},{initValue:e,x:t+1,y:5},{initValue:e,x:t+2,y:5},{initValue:e,x:t+2,y:6}],number2:(e,t=0)=>[{initValue:e,x:t+0,y:0},{initValue:e,x:t+1,y:0},{initValue:e,x:t+2,y:0},{initValue:e,x:t+3,y:0},{initValue:e,x:t+4,y:0},{initValue:e,x:t+1,y:1},{initValue:e,x:t+2,y:2},{initValue:e,x:t+3,y:3},{initValue:e,x:t+4,y:4},{initValue:e,x:t+0,y:5},{initValue:e,x:t+4,y:5},{initValue:e,x:t+1,y:6},{initValue:e,x:t+2,y:6},{initValue:e,x:t+3,y:6}],number3:(e,t=0)=>[{initValue:e,x:t+1,y:0},{initValue:e,x:t+2,y:0},{initValue:e,x:t+3,y:0},{initValue:e,x:t+0,y:1},{initValue:e,x:t+4,y:1},{initValue:e,x:t+4,y:2},{initValue:e,x:t+3,y:3},{initValue:e,x:t+4,y:4},{initValue:e,x:t+0,y:5},{initValue:e,x:t+4,y:5},{initValue:e,x:t+1,y:6},{initValue:e,x:t+2,y:6},{initValue:e,x:t+3,y:6}],number4:(e,t=0)=>[{initValue:e,x:t+4,y:0},{initValue:e,x:t+4,y:1},{initValue:e,x:t+4,y:2},{initValue:e,x:t+0,y:3},{initValue:e,x:t+1,y:3},{initValue:e,x:t+2,y:3},{initValue:e,x:t+3,y:3},{initValue:e,x:t+4,y:3},{initValue:e,x:t+5,y:3},{initValue:e,x:t+1,y:4},{initValue:e,x:t+4,y:4},{initValue:e,x:t+2,y:5},{initValue:e,x:t+4,y:5},{initValue:e,x:t+3,y:6},{initValue:e,x:t+4,y:6},{initValue:e,x:t+4,y:7}],number5:(e,t=0)=>[{initValue:e,x:t+1,y:0},{initValue:e,x:t+2,y:0},{initValue:e,x:t+3,y:0},{initValue:e,x:t+0,y:1},{initValue:e,x:t+4,y:1},{initValue:e,x:t+4,y:2},{initValue:e,x:t+4,y:3},{initValue:e,x:t+0,y:4},{initValue:e,x:t+1,y:4},{initValue:e,x:t+2,y:4},{initValue:e,x:t+3,y:4},{initValue:e,x:t+0,y:5},{initValue:e,x:t+0,y:6},{initValue:e,x:t+1,y:6},{initValue:e,x:t+2,y:6},{initValue:e,x:t+3,y:6},{initValue:e,x:t+4,y:6}],number6:(e,t=0)=>[{initValue:e,x:t+1,y:0},{initValue:e,x:t+2,y:0},{initValue:e,x:t+3,y:0},{initValue:e,x:t+0,y:1},{initValue:e,x:t+4,y:1},{initValue:e,x:t+0,y:2},{initValue:e,x:t+4,y:2},{initValue:e,x:t+0,y:3},{initValue:e,x:t+1,y:3},{initValue:e,x:t+2,y:3},{initValue:e,x:t+3,y:3},{initValue:e,x:t+0,y:4},{initValue:e,x:t+0,y:5},{initValue:e,x:t+4,y:5},{initValue:e,x:t+1,y:6},{initValue:e,x:t+2,y:6},{initValue:e,x:t+3,y:6}],number8:(e,t=0)=>[{initValue:e,x:t+1,y:0},{initValue:e,x:t+2,y:0},{initValue:e,x:t+3,y:0},{initValue:e,x:t+0,y:1},{initValue:e,x:t+4,y:1},{initValue:e,x:t+0,y:2},{initValue:e,x:t+4,y:2},{initValue:e,x:t+1,y:3},{initValue:e,x:t+2,y:3},{initValue:e,x:t+3,y:3},{initValue:e,x:t+0,y:4},{initValue:e,x:t+4,y:4},{initValue:e,x:t+0,y:5},{initValue:e,x:t+4,y:5},{initValue:e,x:t+1,y:6},{initValue:e,x:t+2,y:6},{initValue:e,x:t+3,y:6}],number9:(e,t=0)=>[{initValue:e,x:t+1,y:0},{initValue:e,x:t+2,y:0},{initValue:e,x:t+3,y:0},{initValue:e,x:t+0,y:1},{initValue:e,x:t+4,y:1},{initValue:e,x:t+4,y:2},{initValue:e,x:t+1,y:3},{initValue:e,x:t+2,y:3},{initValue:e,x:t+3,y:3},{initValue:e,x:t+4,y:3},{initValue:e,x:t+0,y:4},{initValue:e,x:t+4,y:4},{initValue:e,x:t+0,y:5},{initValue:e,x:t+4,y:5},{initValue:e,x:t+1,y:6},{initValue:e,x:t+2,y:6},{initValue:e,x:t+3,y:6}],smileFace:e=>[{initValue:e,x:2,y:0},{initValue:e,x:3,y:0},{initValue:e,x:4,y:0},{initValue:e,x:5,y:0},{initValue:e,x:6,y:0},{initValue:e,x:1,y:1},{initValue:e,x:7,y:1},{initValue:e,x:0,y:2},{initValue:e,x:8,y:2},{initValue:e,x:0,y:3},{initValue:e,x:1,y:3},{initValue:e,x:2,y:3},{initValue:e,x:3,y:3},{initValue:e,x:4,y:3},{initValue:e,x:5,y:3},{initValue:e,x:6,y:3},{initValue:e,x:7,y:3},{initValue:e,x:8,y:3},{initValue:e,x:4,y:5},{initValue:e,x:0,y:6},{initValue:e,x:2,y:6},{initValue:e,x:6,y:6},{initValue:e,x:8,y:6},{initValue:e,x:0,y:7},{initValue:e,x:2,y:7},{initValue:e,x:6,y:7},{initValue:e,x:8,y:7},{initValue:e,x:1,y:8},{initValue:e,x:7,y:8}],angryFace:(e,t)=>[{initValue:e,x:1,y:0},{initValue:e,x:2,y:0},{initValue:e,x:3,y:0},{initValue:e,x:4,y:0},{initValue:e,x:5,y:0},{initValue:e,x:6,y:0},{initValue:e,x:7,y:0},{initValue:e,x:1,y:1},{initValue:e,x:7,y:1},{initValue:e,x:2,y:2},{initValue:e,x:6,y:2},{initValue:e,x:3,y:3},{initValue:e,x:4,y:3},{initValue:e,x:5,y:3},{initValue:t,x:1,y:5},{initValue:t,x:7,y:5},{initValue:e,x:2,y:6},{initValue:e,x:6,y:6},{initValue:e,x:1,y:7},{initValue:e,x:7,y:7},{initValue:e,x:0,y:8},{initValue:e,x:8,y:8}],dollarSign:(e,t)=>[{initValue:e,x:t+2,y:0},{initValue:e,x:t+2,y:1},{initValue:e,x:t+2,y:2},{initValue:e,x:t+2,y:3},{initValue:e,x:t+2,y:4},{initValue:e,x:t+2,y:5},{initValue:e,x:t+2,y:6},{initValue:e,x:t+2,y:7},{initValue:e,x:t+2,y:8},{initValue:e,x:t+3,y:1},{initValue:e,x:t+1,y:1},{initValue:e,x:t+4,y:2},{initValue:e,x:t+0,y:2},{initValue:e,x:t+4,y:3},{initValue:e,x:t+3,y:4},{initValue:e,x:t+1,y:4},{initValue:e,x:t+0,y:5},{initValue:e,x:t+0,y:6},{initValue:e,x:t+4,y:6},{initValue:e,x:t+1,y:7},{initValue:e,x:t+3,y:7}].sort((e,t)=>e.y>t.y?1:-1),questionMark:(e,t)=>[{initValue:e,x:t+2,y:0},{initValue:e,x:t+2,y:2},{initValue:e,x:t+2,y:3},{initValue:e,x:t+3,y:4},{initValue:e,x:t+4,y:5},{initValue:e,x:t+4,y:6},{initValue:e,x:t+3,y:7},{initValue:e,x:t+2,y:7},{initValue:e,x:t+1,y:7},{initValue:e,x:t+0,y:6}].sort((e,t)=>e.y>t.y?1:-1),plusSign(e,t=1,i=0){const a=[],n=2*t+1;for(let o=0;o<n;o++)for(let l=i;l<i+n;l++)l!=i+t&&o!=t||a.push({initValue:e,x:l,y:o});return a},asterisk:e=>[{initValue:e,x:0,y:0},{initValue:e,x:4,y:0},{initValue:e,x:8,y:0},{initValue:e,x:1,y:1},{initValue:e,x:4,y:1},{initValue:e,x:7,y:1},{initValue:e,x:2,y:2},{initValue:e,x:4,y:2},{initValue:e,x:6,y:2},{initValue:e,x:3,y:3},{initValue:e,x:4,y:3},{initValue:e,x:5,y:3},{initValue:e,x:0,y:4},{initValue:e,x:1,y:4},{initValue:e,x:2,y:4},{initValue:e,x:3,y:4},{initValue:e,x:4,y:4},{initValue:e,x:5,y:4},{initValue:e,x:6,y:4},{initValue:e,x:7,y:4},{initValue:e,x:8,y:4},{initValue:e,x:3,y:5},{initValue:e,x:4,y:5},{initValue:e,x:5,y:5},{initValue:e,x:2,y:6},{initValue:e,x:4,y:6},{initValue:e,x:6,y:6},{initValue:e,x:1,y:7},{initValue:e,x:4,y:7},{initValue:e,x:7,y:7},{initValue:e,x:0,y:8},{initValue:e,x:4,y:8},{initValue:e,x:8,y:8}],arrowTop:(e,t=0)=>[{initValue:e,x:t+2,y:0},{initValue:e,x:t+2,y:1},{initValue:e,x:t+2,y:2},{initValue:e,x:t+0,y:3},{initValue:e,x:t+2,y:3},{initValue:e,x:t+4,y:3},{initValue:e,x:t+1,y:4},{initValue:e,x:t+2,y:4},{initValue:e,x:t+3,y:4},{initValue:e,x:t+2,y:5}],arrowBottom:(e,t=0)=>[{initValue:e,x:t+2,y:5},{initValue:e,x:t+2,y:4},{initValue:e,x:t+2,y:3},{initValue:e,x:t+0,y:2},{initValue:e,x:t+2,y:2},{initValue:e,x:t+4,y:2},{initValue:e,x:t+1,y:1},{initValue:e,x:t+2,y:1},{initValue:e,x:t+3,y:1},{initValue:e,x:t+2,y:0}],arrowLeft:(e,t=0)=>[{initValue:e,x:t+2,y:0},{initValue:e,x:t+1,y:1},{initValue:e,x:t+0,y:2},{initValue:e,x:t+1,y:2},{initValue:e,x:t+2,y:2},{initValue:e,x:t+3,y:2},{initValue:e,x:t+4,y:2},{initValue:e,x:t+5,y:2},{initValue:e,x:t+1,y:3},{initValue:e,x:t+2,y:4}],arrowRight:(e,t=0)=>[{initValue:e,x:t+3,y:0},{initValue:e,x:t+4,y:1},{initValue:e,x:t+0,y:2},{initValue:e,x:t+1,y:2},{initValue:e,x:t+2,y:2},{initValue:e,x:t+3,y:2},{initValue:e,x:t+4,y:2},{initValue:e,x:t+5,y:2},{initValue:e,x:t+4,y:3},{initValue:e,x:t+3,y:4}],triangleTop(e,t=5,i=0){t%2||t--;const n=((t=a.max(t,5))+1)/2,o=[];for(let a=0;a<n;a++)for(let n=i;n<i+t;n++)n<i+a||n>i+t-a-1||o.push({initValue:e,x:n,y:a});return o},triangleBottom(e,t=5,i=0){t%2||t--;const n=[],o=((t=a.max(t,5))+1)/2;for(let a=0;a<o;a++)for(let l=i;l<i+t;l++)l<i+a||l>i+t-a-1||n.push({initValue:e,x:l,y:o-a-1});return n},triangleLeft(e,t=5,i=0){i*=-1,t%2||t--;const n=[],o=((t=a.max(t,5))+1)/2;for(let a=0;a<t;a++)for(let l=i;l<i+o;l++)a<l-i||a>t-(l-i)-1||n.push({initValue:e,x:o-l-1,y:a});return n},triangleRight(e,t=5,i=0){t%2||t--;const n=[],o=((t=a.max(t,5))+1)/2;for(let a=0;a<t;a++)for(let l=i;l<i+o;l++)a<l-i||a>t-(l-i)-1||n.push({initValue:e,x:l,y:a});return n},cornerTriangleBottomLeft(e,t=3,i=0){t=a.max(t,3);const n=[];for(let a=0;a<t;a++)for(let o=i;o<i+t;o++)o-i+a>t-1||n.push({initValue:e,x:o,y:a});return n},cornerTriangleBottomRight(e,t=3,i=0){t=a.max(t,3);const n=[];for(let a=0;a<t;a++)for(let o=i;o<i+t;o++)o-i+a>t-1||n.push({initValue:e,x:2*i+t-o-1,y:a});return n},cornerTriangleTopLeft(e,t=3,i=0){t=a.max(t,3);const n=[];for(let a=0;a<t;a++)for(let o=i;o<i+t;o++)o-i+a>t-1||n.push({initValue:e,x:o,y:t-a-1});return n},cornerTriangleTopRight(e,t=3,i=0){t=a.max(t,3);const n=[];for(let a=0;a<t;a++)for(let o=i;o<i+t;o++)o-i+a>t-1||n.push({initValue:e,x:2*i+t-o-1,y:t-a-1});return n},chessBoardA(...e){const t=[{initValue:14,x:1,y:0},{initValue:14,x:3,y:0},{initValue:14,x:5,y:0},{initValue:14,x:7,y:0}],i=[{initValue:16,x:0,y:1},{initValue:16,x:2,y:1},{initValue:16,x:4,y:1},{initValue:16,x:6,y:1},{initValue:16,x:8,y:1}],a=[];let n=0;return e.map((e,o)=>{if(!e)return;const l=JSON.parse(JSON.stringify(o%2?t:i));l.map(t=>{t.initValue=e,t.y=n}),n++,a.push(...l)}),a},chessBoardB(...e){const t=[{initValue:14,x:1,y:0},{initValue:14,x:3,y:0},{initValue:14,x:5,y:0},{initValue:14,x:7,y:0}],i=[{initValue:16,x:0,y:1},{initValue:16,x:2,y:1},{initValue:16,x:4,y:1},{initValue:16,x:6,y:1},{initValue:16,x:8,y:1}],a=[];let n=0;return e.map((e,o)=>{if(!e)return;const l=JSON.parse(JSON.stringify(o%2?t:i));l.map(t=>{t.initValue=e,t.y=n}),n+=2,a.push(...l)}),a},wave(e,t=0,i=5){i%2||i--;const n=((i=a.max(i,3))+1)/2,o=[];for(let a=0;a<n;a++)for(let n=0;n<9;n++){const l=!((n-a-t-(i-1)+2*a)%(i-1));(!((n-a-t)%(i-1))||l)&&o.push({initValue:e,x:n,y:a})}return o},horzLine(e,t){const i=[{initValue:1,x:0,y:0},{initValue:1,x:1,y:0},{initValue:1,x:2,y:0},{initValue:1,x:3,y:0},{initValue:1,x:4,y:0},{initValue:1,x:5,y:0},{initValue:1,x:6,y:0},{initValue:1,x:7,y:0},{initValue:1,x:8,y:0}].filter(e=>!(t||[]).includes(e.x));return i.map(t=>t.initValue=e),i},vertLines(e,t=[0],i=4){const a=[];for(let n=0;n<i;n++)t.map(t=>{a.push({initValue:e,x:t,y:n})});return a},biasLineRight(e,t=0,i=8){const a=[];let n=0;for(let o=t;o<=i;o++)a.push({initValue:e,x:o,y:n++});return a},biasLineLeft(e,t=0,i=8){const a=[];let n=0;for(let o=i;o>=t;o--)a.push({initValue:e,x:o,y:n++});return a},solidSquare(e,t,i,a=0){const n=[];for(let o=0;o<i;o++)for(let i=a;i<a+t;i++)n.push({initValue:e,x:i,y:o});return n},blankSquare(e,t,i,a=0){const n=[];for(let o=0;o<i;o++)for(let l=a;l<a+t;l++){const s=a-l&&t+a-l-1;o&&i-o-1&&s||n.push({initValue:e,x:l,y:o})}return n}},cc._RF.pop()},{"./all_modules":"all_modules"}],map_render:[function(e,t,i){"use strict";cc._RF.push(t,"f5445R88iBLEa9oZJMUI0V/","map_render"),Object.defineProperty(i,"__esModule",{value:!0}),i.mapRender=void 0;const a=e("./all_modules"),n=a._;i.mapRender={tmpMapPart:[],centerPos:null,isBrickCached:!1,currentMapRepeatCount:0,mapRowCount:11,repetedBrickInfoArr:[],showingBrickNodeArr:[],pendingBrickInfoArr:[],brickVal2GlobalScale:[{brickVal:100,gScale:1},{brickVal:120,gScale:.95},{brickVal:140,gScale:.9},{brickVal:160,gScale:.86},{brickVal:180,gScale:.82},{brickVal:200,gScale:.79},{brickVal:220,gScale:.77},{brickVal:240,gScale:.76},{brickVal:260,gScale:.75},{brickVal:280,gScale:.74},{brickVal:300,gScale:.73},{brickVal:1/0,gScale:.7}],globalBrickScale:.92,currentMaxBrickValue:0,init(){const e=cc.find("Canvas/layer_play_area/game_board");this.centerPos=cc.v2(e.getContentSize().width/2,e.height/2)},updateGlobalBrickScale(e){},reset(){cc.find("Canvas/shop_layer/hand_touch").active=!1,a.analytic.onResetMap(),this.currentMaxBrickValue=0,this.updateGlobalBrickScale(0),this.showingBrickNodeArr.map(e=>{e.active=!1,e.brickComp.isGoldBrick?a.nodeFactory.setOldGoldBrick(e):a.nodeFactory.setOldBrick(e)}),this.showingBrickNodeArr=[],this.pendingBrickInfoArr=[],this.repetedBrickInfoArr=JSON.parse(JSON.stringify(a.mapConfig.repeatedMapPart)),this.mapRowCount=n.ceil(a.coreGame.node.height/80),this.repetedBrickInfoArr.map(e=>{e.map(e=>{e.y+=this.mapRowCount+3})}),a.rank.addRankIndexLoadedCallback(()=>{let e=[...a.mapConfig.startMapPart];const t=a.rank.currentRankIndex;if(t>=a.configs.rankIndexByScore.length-1)e=[...a.mapConfig.repeatedMapPart];else{e=[...a.mapConfig.startMapPart];for(let i=0;i<t;i++){let t=e.findIndex(e=>e[0]&&e[0].isBossBrick);for(let i=0;i<=t;i++)e.shift()}}this.addMapPart([[],[],[],[],[],[],[],...e]);const i=a.configs.rankIndexByScore[t-1]||-1;a.coreGame.addScore(i+1)})},onMapFallDown1Row(){this.pendingBrickInfoArr.length||(this.addMapPart(this.repetedBrickInfoArr),this.repetedBrickInfoArr.map(e=>{e.map(e=>{e.initValue=a.configs.inflateBrickValueEachRepeat(e.initValue)})}),this.currentMapRepeatCount++)},addMapPart(e){n.log(`${e.length}`);const t=e=>{const t=a.nodeFactory.createNewBrick(e);this.renderBrick(t,e),this.showingBrickNodeArr.push(t)};let i=0;e.map((e,a)=>{let o=!1;const l=e.some(e=>(o=e.shuttle)&&e.y+i<this.mapRowCount+2),s=o?a+1:0;e.map(e=>{const a=Object.assign(Object.assign({},e),{shuttleChunkId:s});a.y+=i,l||a.y<this.mapRowCount+2?t(a):this.pendingBrickInfoArr.push(a)});const r=e.map(e=>e.y),c=e.length?n.max(...r)-n.min(...r):0;i+=1+n.floor(c)}),this.pendingBrickInfoArr.sort((e,t)=>e.y>t.y?1:-1),this.isBrickCached=!0},renderAvailableBricks(e=!1){let t=0;const i=[];let o=null;this.pendingBrickInfoArr.some(n=>{if(e&&!n.isBossBrick||n.y>this.mapRowCount+2&&(!o||n.shuttleChunkId!=o))return!0;o=n.shuttleChunkId;const l=a.nodeFactory.createNewBrick(n);this.renderBrick(l,n),this.showingBrickNodeArr.push(l),i.push(n),t++});const l=n.max(...i.map(e=>e.initValue));this.updateGlobalBrickScale(l);let s=100;for(;t--&&s--;)this.pendingBrickInfoArr.shift()},renderBrick(e,t){const i=e.brickComp;if(t){const a=cc.v2(80*(t.x+.5),80*(t.y+.5));a.addSelf(cc.v2(-this.centerPos.x,-this.centerPos.y)),e.setPosition(a),i.curValue=t.initValue,i.orgValue=t.initValue,i.rowIndex=t.y,i.bgHilight.active=!1,e.isBossBrick=t.isBossBrick,e.active=!0}if(t&&t.isGoldBrick)this.handleGoldBrick(e,t);else{const t=a.brickStyles.value2Scale(n.min(i.orgValue,i.curValue));e.scale=t*this.globalBrickScale,i.labelComp.string=n.ceil(i.curValue);const o=a.brickStyles.value2BackgroundStyle(i.curValue);i.bgNode.color=o.color||cc.Color.WHITE,o.textureName&&a.utils.setNodeImg(i.bgNode,a.brickStyles.brickBackgroundSprites[o.textureName]);const l=a.brickStyles.value2BorderStyle(i.curValue);i.borderNode.active=l,l&&(i.borderNode.color=l.color||cc.Color.WHITE,l.textureName&&a.utils.setNodeImg(i.borderNode,a.brickStyles.brickBorderSprites[l.textureName]));const s=a.brickStyles.value2LabelStyle(i.curValue);i.labelNode.scale=s.scale,i.labelComp.enableBold=!0}this.handleShuttleBrick(e,t)},handleGoldBrick(e,t){const i=e.brickComp;i.isGoldBrick=!0,i.curValue=t.goldCount,e.x=-cc.winSize.width/2-e.getBoundingBox().width/2-20},handleShuttleBrick(e,t){if(!t||!t.shuttle)return;const{speed:i,x1:a,x2:o,isReversed:l}=t.shuttle,s=cc.winSize.width,r=n.max(80*(a+.5),0),c=n.min(80*(o+.5),s-0),u=(c-r)/i,d=cc.tween().to(u,{x:r-s/2}).to(u,{x:c-s/2}),p=cc.tween().to(u,{x:c-s/2}).to(u,{x:r-s/2});cc.tween(e).repeatForever(l?d:p).start()}},cc._RF.pop()},{"./all_modules":"all_modules"}],md5:[function(e,t){"use strict";cc._RF.push(t,"f56881LwI9JXqqJ22wclO8B","md5"),t.exports={MD5(e){function t(e,t){return e<<t|e>>>32-t}function i(e,t){let i,a,n,o,l;return n=2147483648&e,o=2147483648&t,l=(1073741823&e)+(1073741823&t),(i=1073741824&e)&(a=1073741824&t)?2147483648^l^n^o:i|a?1073741824&l?3221225472^l^n^o:1073741824^l^n^o:l^n^o}function a(e,t,i){return e&t|~e&i}function n(e,t,i){return e&i|t&~i}function o(e,t,i){return e^t^i}function l(e,t,i){return t^(e|~i)}function s(e,n,o,l,s,r,c){return e=i(e,i(i(a(n,o,l),s),c)),i(t(e,r),n)}function r(e,a,o,l,s,r,c){return e=i(e,i(i(n(a,o,l),s),c)),i(t(e,r),a)}function c(e,a,n,l,s,r,c){return e=i(e,i(i(o(a,n,l),s),c)),i(t(e,r),a)}function u(e,a,n,o,s,r,c){return e=i(e,i(i(l(a,n,o),s),c)),i(t(e,r),a)}function d(e){let t,i,a="",n="";for(i=0;i<=3;i++)a+=(n="0"+(t=e>>>8*i&255).toString(16)).substr(n.length-2,2);return a}let p,y,h,m,g,_,f,x,V,v=Array();for(v=function(e){let t,i=e.length,a=i+8,n=16*((a-a%64)/64+1),o=Array(n-1),l=0,s=0;for(;s<i;)l=s%4*8,o[t=(s-s%4)/4]=o[t]|e.charCodeAt(s)<<l,s++;return l=s%4*8,o[t=(s-s%4)/4]=o[t]|128<<l,o[n-2]=i<<3,o[n-1]=i>>>29,o}(e=function(e){e=e.replace(/\r\n/g,"\n");let t="";for(let i=0;i<e.length;i++){let a=e.charCodeAt(i);a<128?t+=String.fromCharCode(a):a>127&&a<2048?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t}(e)),_=1732584193,f=4023233417,x=2562383102,V=271733878,p=0;p<v.length;p+=16)y=_,h=f,m=x,g=V,_=s(_,f,x,V,v[p+0],7,3614090360),V=s(V,_,f,x,v[p+1],12,3905402710),x=s(x,V,_,f,v[p+2],17,606105819),f=s(f,x,V,_,v[p+3],22,3250441966),_=s(_,f,x,V,v[p+4],7,4118548399),V=s(V,_,f,x,v[p+5],12,1200080426),x=s(x,V,_,f,v[p+6],17,2821735955),f=s(f,x,V,_,v[p+7],22,4249261313),_=s(_,f,x,V,v[p+8],7,1770035416),V=s(V,_,f,x,v[p+9],12,2336552879),x=s(x,V,_,f,v[p+10],17,4294925233),f=s(f,x,V,_,v[p+11],22,2304563134),_=s(_,f,x,V,v[p+12],7,1804603682),V=s(V,_,f,x,v[p+13],12,4254626195),x=s(x,V,_,f,v[p+14],17,2792965006),_=r(_,f=s(f,x,V,_,v[p+15],22,1236535329),x,V,v[p+1],5,4129170786),V=r(V,_,f,x,v[p+6],9,3225465664),x=r(x,V,_,f,v[p+11],14,643717713),f=r(f,x,V,_,v[p+0],20,3921069994),_=r(_,f,x,V,v[p+5],5,3593408605),V=r(V,_,f,x,v[p+10],9,38016083),x=r(x,V,_,f,v[p+15],14,3634488961),f=r(f,x,V,_,v[p+4],20,3889429448),_=r(_,f,x,V,v[p+9],5,568446438),V=r(V,_,f,x,v[p+14],9,3275163606),x=r(x,V,_,f,v[p+3],14,4107603335),f=r(f,x,V,_,v[p+8],20,1163531501),_=r(_,f,x,V,v[p+13],5,2850285829),V=r(V,_,f,x,v[p+2],9,4243563512),x=r(x,V,_,f,v[p+7],14,1735328473),_=c(_,f=r(f,x,V,_,v[p+12],20,2368359562),x,V,v[p+5],4,4294588738),V=c(V,_,f,x,v[p+8],11,2272392833),x=c(x,V,_,f,v[p+11],16,1839030562),f=c(f,x,V,_,v[p+14],23,4259657740),_=c(_,f,x,V,v[p+1],4,2763975236),V=c(V,_,f,x,v[p+4],11,1272893353),x=c(x,V,_,f,v[p+7],16,4139469664),f=c(f,x,V,_,v[p+10],23,3200236656),_=c(_,f,x,V,v[p+13],4,681279174),V=c(V,_,f,x,v[p+0],11,3936430074),x=c(x,V,_,f,v[p+3],16,3572445317),f=c(f,x,V,_,v[p+6],23,76029189),_=c(_,f,x,V,v[p+9],4,3654602809),V=c(V,_,f,x,v[p+12],11,3873151461),x=c(x,V,_,f,v[p+15],16,530742520),_=u(_,f=c(f,x,V,_,v[p+2],23,3299628645),x,V,v[p+0],6,4096336452),V=u(V,_,f,x,v[p+7],10,1126891415),x=u(x,V,_,f,v[p+14],15,2878612391),f=u(f,x,V,_,v[p+5],21,4237533241),_=u(_,f,x,V,v[p+12],6,1700485571),V=u(V,_,f,x,v[p+3],10,2399980690),x=u(x,V,_,f,v[p+10],15,4293915773),f=u(f,x,V,_,v[p+1],21,2240044497),_=u(_,f,x,V,v[p+8],6,1873313359),V=u(V,_,f,x,v[p+15],10,4264355552),x=u(x,V,_,f,v[p+6],15,2734768916),f=u(f,x,V,_,v[p+13],21,1309151649),_=u(_,f,x,V,v[p+4],6,4149444226),V=u(V,_,f,x,v[p+11],10,3174756917),x=u(x,V,_,f,v[p+2],15,718787259),f=u(f,x,V,_,v[p+9],21,3951481745),_=i(_,y),f=i(f,h),x=i(x,m),V=i(V,g);return(d(_)+d(f)+d(x)+d(V)).toLowerCase()}},cc._RF.pop()},{}],message:[function(e,t,i){"use strict";cc._RF.push(t,"1dd4fAJa5hBrp2u108bTQpR","message");var a=this&&this.__decorate||function(e,t,i,a){var n,o=arguments.length,l=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(l=(o<3?n(l):o>3?n(t,i,l):n(t,i))||l);return o>3&&l&&Object.defineProperty(t,i,l),l},n=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))(function(n,o){function l(e){try{r(a.next(e))}catch(t){o(t)}}function s(e){try{r(a.throw(e))}catch(t){o(t)}}function r(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(l,s)}r((a=a.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../all_modules"),l=o._,{ccclass:s,property:r}=cc._decorator;let c=class extends cc.Component{constructor(){super(...arguments),this.Play_with_message=null}initBase64Picture(e){return n(this,void 0,void 0,function*(){e.activeInHierarchy||(e.parent.active=!0,e.parent.parent.active=!0);const t=new cc.Node;e.addChild(t),t.position=e.position;let i=t.addComponent(cc.Camera);i.cullingMask=4294967295;let a=new cc.RenderTexture;a.initWithSize(e.width,e.height),i.targetTexture=a,i.zoomRatio=3.27;let n=a.width,o=a.height,l=document.createElement("canvas");l.width=n,l.height=o;let s=l.getContext("2d");i.render(e);let r=a.readPixels(),c=4*n;for(let e=0;e<o;e++){let t=o-1-e,i=new Uint8ClampedArray(r.buffer,t*n*4,c),a=new ImageData(i,n,1);s.putImageData(a,0,e)}let u=l.toDataURL();return setTimeout(()=>e.parent.active=!1,2e3),u})}initPayload(e,t,i,a){return n(this,void 0,void 0,function*(){try{const o=yield this.initBase64Picture(e);return{action:"CUSTOM",text:t,cta:i,image:o,template:"play_turn",strategy:"LAST",data:Object.assign(Object.assign({},a),{isPlayedFromMessage:1}),notification:"PUSH"}}catch(n){throw n}})}sendMessageScore(){return n(this,void 0,void 0,function*(){try{const t=`${o.user.name} has just played. It's your turn now!`,i="PLAY NOW",a=yield this.initPayload(cc.find("Canvas/social/pic_invite"),t,i);yield FBInstant.updateAsync(a)}catch(e){l.log("sendMessageScore",e)}})}};a([r(cc.Node)],c.prototype,"Play_with_message",void 0),c=a([s],c),i.default=c,cc._RF.pop()},{"../all_modules":"all_modules"}],node_factory:[function(e,t,i){"use strict";cc._RF.push(t,"e4209Zd0CFDQJHMNGEguATT","node_factory"),Object.defineProperty(i,"__esModule",{value:!0}),i.nodeFactory=void 0;const a=e("./all_modules"),n=a._;i.nodeFactory={containerNode:null,sampleBallNode:null,sampleBrickNode:null,sampleGoldBrickNode:null,sampleBrokenNodeArr:null,sampleScoreLabelTooltipNode:null,sampleIconGold:null,ballPool:[],brickPool:[],goldBrickPool:[],scoreLabelPool:[],runningScoreLabelArr:[],iconGoldPool:[],listPlayingBallPool:[],listBrokenBrickEffectPoolArr:[[],[],[],[],[],[],[],[],[],[]],init(){this.containerNode=cc.find("Canvas/layer_play_area/game_board"),this.sampleBallNode=cc.find("Canvas/sample_nodes/sample_ball"),this.sampleBrickNode=cc.find("Canvas/sample_nodes/sample_brick"),this.sampleGoldBrickNode=cc.find("Canvas/sample_nodes/sample_gold_brick"),this.sampleIconGold=cc.find("Canvas/sample_nodes/sample_gold"),this.sampleBrokenNodeArr=[cc.find("Canvas/sample_nodes/fx_broken_1"),cc.find("Canvas/sample_nodes/fx_broken_2"),cc.find("Canvas/sample_nodes/fx_broken_3"),cc.find("Canvas/sample_nodes/fx_broken_4"),cc.find("Canvas/sample_nodes/fx_broken_5"),cc.find("Canvas/sample_nodes/fx_broken_6")],this.sampleScoreLabelTooltipNode=cc.find("Canvas/sample_nodes/label_score_tooltip"),a.nodeFactory.spawnBallForPlayingPools(),a.nodeFactory.spawnBrokenEffectForPool()},createNewBrick(e){let t=e.isGoldBrick?this.getNewGoldBrick():this.getNewBrick();return t||(t=cc.instantiate(e.isGoldBrick?this.sampleGoldBrickNode:this.sampleBrickNode),this.containerNode.addChild(t)),t.stopAllActions(),t.scale=t.children[0].scale=1,t},getNewBrick(){const e=this.brickPool.pop();if(e)return e.stopAllActions(),e.scale=1,e},getNewGoldBrick(){const e=this.goldBrickPool.pop();if(e)return e.stopAllActions(),e.scale=1,e},setOldBrick(e){e.stopAllActions(),e.scale=1,e.active=!1,this.brickPool.unshift(e)},setOldGoldBrick(e){e.stopAllActions(),e.isActionRunning=!1,e.scale=1,e.active=!1,cc.find("bg/bg_empty",e).active=!1,this.goldBrickPool.unshift(e)},spawnBallForPlayingPools(){let e;const t=()=>{if(this.listPlayingBallPool.length<100){let e=cc.instantiate(this.sampleBallNode);e.active=!1,e.setPosition(a.coreGame.rootBallNode.getPosition()),this.listPlayingBallPool.push(e)}else a.utils.clearInterval(e),e=null};e=a.utils.setInterval(()=>t(),200)},getNextAvailableBall(){let e=a.nodeFactory.getNewBall();return e||(e=cc.instantiate(this.sampleBallNode),this.containerNode.addChild(e),this.listPlayingBallPool.push(e)),e.color=cc.color(a.configs.ballColorByDamageLevel[a.user.ballDamageLevel]),e},getNewBall(){const e=this.ballPool.pop();if(e)return e.active=!0,e},setOldBall(e){e.active=!1,this.ballPool.unshift(e)},clearAllScoreNode(){this.runningScoreLabelArr.map(e=>{e.stopAllActions(),e.removeFromParent(),a.utils.setTimeout(()=>a.nodeFactory.setOldScoreLabel(e))})},getNewScoreLabel(){let e=this.scoreLabelPool.pop();return e||(e=a.utils.copyNodeTo(this.sampleScoreLabelTooltipNode,this.containerNode)),e.active=!0,e},setOldScoreLabel(e){e.active=!1,this.scoreLabelPool.unshift(e),n.removeArrItem(this.runningScoreLabelArr,e)},spawnBrokenEffectForPool(){this.sampleBrokenNodeArr.map((e,t)=>{for(let i=0;i<10;i++)a.utils.setTimeout(()=>{let i=cc.instantiate(e);i.active=!1,this.containerNode.addChild(i),this.listBrokenBrickEffectPoolArr[t].push(i)},250*i)})},getBrokenEffectNode(e=0){e=n.min(e,this.sampleBrokenNodeArr.length-1);let t=this.listBrokenBrickEffectPoolArr[e].find(e=>!e.active);return t||(t=cc.instantiate(this.sampleBrokenNodeArr[e]),this.containerNode.addChild(t),this.listBrokenBrickEffectPoolArr[e].push(t)),t.active=!0,t.color=cc.color("#cccccc"),t},getNewIconGold(e){let t=this.iconGoldPool.find(e=>!e.active);return t||(t=a.utils.copyNodeTo(this.sampleIconGold,e||this.containerNode),this.iconGoldPool.push(t)),t.stopAllActions(),t.scale=1,t.opacity=255,t.active=!0,t},resetAllNodesInPools(){this.listBrokenBrickEffectPoolArr.map(e=>{e.map(e=>{e.stopAllActions(),e.active=!1})}),this.listPlayingBallPool.map(e=>{e.stopAllActions(),e.getComponent("ball_component").makeBallInActive(),e.active=!1})}},cc._RF.pop()},{"./all_modules":"all_modules"}],physics_bound:[function(e,t){"use strict";cc._RF.push(t,"f27542etPZBvpc1q40tY798","physics_bound");var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(void 0);if(t&&t.has(e))return t.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=n?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(i,o,l):i[o]=e[o]}return i.default=e,t&&t.set(e,i),i}(e("./all_modules"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(a=function(e){return e?i:t})(e)}i._,t.exports={createPhysicBound:function(){var e=i.coreGame.node,t=e.width,a=e.height,n=85-i.utils.getGlobalPosition(e).y,o=new cc.Node;o.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static,i.coreGame.isDesktop?this.addBound(o,0,n+e.height+80,t,20):this.addBound(o,0,a/2+10-e.y,t,20),e.addChild(o);var l=new cc.Node,s=l.addComponent(cc.RigidBody);s.tagName=2,s.type=cc.RigidBodyType.Static,i.coreGame.isDesktop?this.addBound(l,t/2+10,n+e.height/2+40,20,a+500):this.addBound(l,t/2+10,0,20,a+500),e.addChild(l);var r=new cc.Node,c=r.addComponent(cc.RigidBody);c.tagName=3,c.type=cc.RigidBodyType.Static,i.coreGame.isDesktop?this.addBound(r,-t/2-10,n+e.height/2+40,20,a+500):this.addBound(r,-t/2-10,0,20,a+500),e.addChild(r);var u=new cc.Node,d=u.addComponent(cc.RigidBody);d.tagName=1,d.type=cc.RigidBodyType.Static,this.addBound(u,0,n,t,20,!0),e.addChild(u)},addBound:function(e,t,i,a,n){var o=e.addComponent(cc.PhysicsBoxCollider);o.offset.x=t,o.offset.y=i,o.size.width=a,o.size.height=n}},cc._RF.pop()},{"./all_modules":"all_modules"}],promo:[function(e,t,i){"use strict";cc._RF.push(t,"393b1BPwJRCxJoyyNB5dut2","promo"),Object.defineProperty(i,"__esModule",{value:!0}),i.promo=void 0;const a=e("../all_modules");a._,i.promo={isPromoAvailable:!1,init(){},shufflePromoList(){[cc.find("Canvas/layer_game_over/promo_panel/ScrollView/view/content"),cc.find("Canvas/layer_challenge_friend/promo_panel/ScrollView/view/content")].map(e=>{const t=e.children.slice(0);for(e.removeAllChildren();t.length;)e.addChild(a.utils.randomArrItem(t,!0));a.fx.bubblePromo(e)})},renderButtonByIcon(e){e&&a.configs.listIdPromoGame&&e.children.map((e,t)=>{const i=a.configs.listIdPromoGame[t];a.utils.setLabelText(e.getChildByName("label_name"),i.name),a.utils.addButtonComp(e,()=>{a.utilsFB.log("ev_click_button_promo_game",1,{Position:t}),a.promo.switchPromoGame(i.id)})})},switchPromoGame(e,t){FBInstant.switchGameAsync(e).then(()=>{},()=>{t&&t()}).catch(function(e){console("switchPromoGame: ",e),t&&t()})}},cc._RF.pop()},{"../all_modules":"all_modules"}],rank:[function(e,t,i){"use strict";cc._RF.push(t,"06e027EOc5AX6VlmFL0KWgf","rank"),Object.defineProperty(i,"__esModule",{value:!0}),i.rank=void 0;const a=e("./all_modules"),n=a._;i.rank={isRankIndexLoaded:!1,rankIndexLoadedCallbackArr:[],currentRankIndex:0,lastRankIndex:0,rankIconSprite:null,bestScore:0,init(){this.getRankScoreFromMap(),a.login.addLoginDataField("bestScore"),a.login.addCallback(e=>{a.user.bestScore=e.bestScore||0,a.gameFlow.updateHighScore(),this.currentRankIndex=this.scoreToRankIndex(a.user.bestScore),this.isRankIndexLoaded=!0,this.rankIndexLoadedCallbackArr.map(e=>e())}),a.utils.setLabelText(cc.find("Canvas/layer_rank_detail/bg_pause_small/label_user_name"),a.user.name),a.utils.waitToRun(()=>{cc.assetManager.loadRemote(a.user.photo,(e,t)=>{if(e)return n.log("err loading avatar",e);a.user.avatarSpriteFrame=new cc.SpriteFrame(t),cc.find("Canvas/layer_rank_detail/bg_pause_small/ava_mask/ava").getComponent(cc.Sprite).spriteFrame=a.user.avatarSpriteFrame})},"photo",a.user),this.initClickRankIconGuide();const e=e=>{e.runAction(cc.repeatForever(cc.sequence(cc.spawn(cc.scaleTo(3,10),cc.fadeOut(2.7)),cc.spawn(cc.scaleTo(0,0),cc.fadeTo(0,80)))))},t=cc.find("Canvas/layer_new_rank/glory_light_mask");e(t.children[0]),a.utils.setTimeout(()=>{e(t.children[1])},1500)},addRankIndexLoadedCallback(e){if(this.isRankIndexLoaded)return e();this.rankIndexLoadedCallbackArr.push(e)},getRankScoreFromMap(){let e=0;const t=a.configs.rankIndexByScore;t.length=0,a.mapConfig.startMapPart.map(i=>{i.map(t=>{e+=a.configs.brickValue2Score(t.initValue)}),i[0]&&i[0].isBossBrick&&t.push(e-1)}),t.push(1/0)},scoreToRankIndex(e){const t=[0,...a.configs.rankIndexByScore];let i=t.findIndex((i,a)=>i<=e&&t[a+1]>e);return-1==i&&(i=0),i},updateRankIcon(e=!1){a.configs.rankIndexByScore.some((t,i)=>{if(t<a.user.bestScore+1)return;this.currentRankIndex=i,e||(this.lastRankIndex=i);const o=a.ui.rankSprite[n.max(i+1,1)];this.rankIconSprite=o;const l=cc.find("Canvas/layer_play_area/playing_header_bg/btn_rank/rank_icon");return e||(l.getComponent(cc.Sprite).spriteFrame=o),l.opacity=255,cc.find("Canvas/layer_pause/bg_pause_small/rank_icon").getComponent(cc.Sprite).spriteFrame=o,cc.find("Canvas/layer_game_over/rank_icon").getComponent(cc.Sprite).spriteFrame=o,cc.find("Canvas/layer_rank_detail/bg_pause_small/rank_icon").getComponent(cc.Sprite).spriteFrame=o,this.renderRankList(),e&&this.showLayerNewRank(o),!0})},showLayerNewRank(e){if(this.lastRankIndex==this.currentRankIndex)return;a.leaderboard.renderList(),a.analytic.logGetNewRank(),this.lastRankIndex=this.currentRankIndex;const t=cc.find("Canvas/layer_new_rank/gold_reward/label"),i=a.configs.levelUpRewardGoldArr[a.rank.currentRankIndex];a.utils.setLabelText(t,"+"+a.utils.formatNumber(i)),a.fx.newRank(e,i),a.utils.setTimeout(()=>a.shop.check2ShowGuideOpenShop(),5e3)},renderRankList(){const e=cc.find("Canvas/layer_rank_detail/bg_pause_small/list/view/content"),t=cc.find("Canvas/layer_rank_detail/bg_pause_small/list/rank_list_row");e.removeAllChildren();const i=a.configs.rankIndexByScore.length,n=[...a.configs.rankIndexByScore.slice(0).reverse(),0];let o=0;n.map((l,s)=>{if(!s)return;const r=a.utils.copyNodeTo(t,e);let c=r.getChildByName("locked");l>a.user.bestScore||(n[s-1]<a.user.bestScore+1?c=r.getChildByName("unlocked"):(c=r.getChildByName("unlocked_top"),o=s)),cc.find("rank_icon",c).getComponent(cc.Sprite).spriteFrame=a.ui.rankSprite[i-s+1],c.active=!0,a.utils.setLabelText(cc.find("label_score",c),""+a.utils.formatNumber(l+1))}),a.utils.setTimeout(()=>{e.y=e.children.length*t.height*(o+2)/i},100)},isIconRankClicked:!1,initClickRankIconGuide(){const e=[cc.find("Canvas/layer_pause/bg_pause_small/hand_touch"),cc.find("Canvas/layer_game_over/hand_touch")];a.login.addLoginDataField("isIconRankClicked"),a.login.addCallback(t=>{this.isIconRankClicked=t.isIconRankClicked,e.map(e=>{e.active=!this.isIconRankClicked,this.isIconRankClicked||e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(0,1.1),cc.spawn(cc.scaleTo(.1,.9),cc.moveBy(.1,0,20)),cc.spawn(cc.scaleTo(.4,1.1),cc.moveBy(.4,0,-20)),cc.delayTime(1))))})})},onRankDetailShow(){a.data.saveData({isIconRankClicked:1}),cc.find("Canvas/layer_pause/bg_pause_small/hand_touch").active=!1,cc.find("Canvas/layer_game_over/hand_touch").active=!1}},cc._RF.pop()},{"./all_modules":"all_modules"}],share:[function(e,t,i){"use strict";cc._RF.push(t,"05b19F+OTxFs7xzUslTe1Qp","share");var a=this&&this.__decorate||function(e,t,i,a){var n,o=arguments.length,l=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(l=(o<3?n(l):o>3?n(t,i,l):n(t,i))||l);return o>3&&l&&Object.defineProperty(t,i,l),l},n=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))(function(n,o){function l(e){try{r(a.next(e))}catch(t){o(t)}}function s(e){try{r(a.throw(e))}catch(t){o(t)}}function r(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(l,s)}r((a=a.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../all_modules")._,{ccclass:l,property:s}=cc._decorator;let r=class extends cc.Component{initBase64Picture(e){return n(this,void 0,void 0,function*(){e.activeInHierarchy||(e.parent.active=!0,e.parent.parent.active=!0);const t=new cc.Node;e.addChild(t),t.position=e.position;let i=t.addComponent(cc.Camera);i.cullingMask=4294967295;let a=new cc.RenderTexture;a.initWithSize(e.width,e.height),i.targetTexture=a,i.zoomRatio=2.5;let n=a.width,o=a.height,l=document.createElement("canvas");l.width=n,l.height=o;let s=l.getContext("2d");i.render(e);let r=a.readPixels(),c=4*n;for(let e=0;e<o;e++){let t=o-1-e,i=new Uint8ClampedArray(r.buffer,t*n*4,c),a=new ImageData(i,n,1);s.putImageData(a,0,e)}let u=l.toDataURL();return setTimeout(()=>e.parent.active=!1,2e3),u})}initPayload(e,t,i){return n(this,void 0,void 0,function*(){try{return{intent:"SHARE",image:yield this.initBase64Picture(e),text:t,data:i}}catch(a){throw a}})}sharePostNormal(){return n(this,void 0,void 0,function*(){try{const t=yield this.initPayload(cc.find("Canvas/social/pic_share"),"",{isFromSharedPos:!0});yield FBInstant.shareAsync(t)}catch(e){o.log(e)}})}};r=a([l],r),i.default=r,cc._RF.pop()},{"../all_modules":"all_modules"}],shop:[function(e,t,i){"use strict";cc._RF.push(t,"849473l+qlMQLNL8h1e3btb","shop"),Object.defineProperty(i,"__esModule",{value:!0}),i.shop=void 0;const a=e("./all_modules");a._,i.shop={init(){a.utils.addButtonComp(cc.find("Canvas/shop_layer/shop_UI/prod_list/add_ball_damage/btn_buy"),()=>{this.upgradeBallDamage()}),a.utils.addButtonComp(cc.find("Canvas/shop_layer/shop_UI/prod_list/add_shoot_rate/btn_buy"),()=>{this.upgradeShootRate()}),a.login.addLoginDataField("isIconShopClicked"),a.login.addLoginDataField("isBtnUpgradeClicked"),a.login.addCallback(e=>{e.isNewUser||a.ui.showLayer("shop_layer"),a.utils.setTimeout(()=>this.renderShop()),this.isIconShopClicked=e.isIconShopClicked,this.isBtnUpgradeClicked=e.isBtnUpgradeClicked})},isShowing:()=>cc.find("Canvas/shop_layer/shop_UI").active,show(){a.utilsFB.log("ev_show_shop"),cc.find("Canvas/shop_layer/shop_UI").active=!0,a.coreGame.isPaused||a.coreGame.pause(),cc.find("Canvas/shop_layer/hand_touch").active=!1,!this.isIconShopClicked&&this.isGoldEnoughFirstUpgrade()&&(this.isIconShopClicked=!0,a.data.saveData({isIconShopClicked:1}),this.check2ShowGuideUpgradeBall())},hide(){cc.find("Canvas/shop_layer/shop_UI").active=!1,a.ui.isAllLayersHidden()&&a.gameFlow.resume()},renderShop(){const e=cc.find("Canvas/shop_layer/shop_UI/prod_list/add_ball_damage/label_curent_value"),t=(100*a.user.ballDamage).toFixed(0);a.utils.setLabelText(e,t);const i=cc.find("Canvas/shop_layer/shop_UI/prod_list/add_ball_damage/label_detail"),n=`${t}  to  ${(a.user.ballDamage*a.configs.ballDamageUpgradeRatio*100).toFixed(0)}  points`;a.utils.setLabelText(i,n);const o=cc.find("Canvas/shop_layer/shop_UI/prod_list/add_ball_damage/icon_gold/label_price"),l=a.utils.formatNumber(a.configs.ballDamageUpgradePrice[a.user.ballDamageLevel]);a.utils.setLabelText(o,l);const s=cc.find("Canvas/shop_layer/shop_UI/prod_list/add_shoot_rate/label_curent_value"),r=a.user.shootRate.toFixed(1);a.utils.setLabelText(s,r);const c=cc.find("Canvas/shop_layer/shop_UI/prod_list/add_shoot_rate/label_detail"),u=`${r}  to  ${(a.user.shootRate*a.configs.shootRateUpgradeRatio).toFixed(1)}  balls/s`;a.utils.setLabelText(c,u);const d=cc.find("Canvas/shop_layer/shop_UI/prod_list/add_shoot_rate/icon_gold/label_price"),p=a.utils.formatNumber(a.configs.shootRateUpgradePrice[a.user.shootRateLevel]);a.utils.setLabelText(d,p)},upgradeBallDamage(){a.utilsFB.log("ev_shop_click_damage");const e=a.configs.ballDamageUpgradePrice[a.user.ballDamageLevel];if(a.user.gold<e)return a.ui.showAlert("OOPS!\n\nNot enough gold");a.user.addGold(-e),a.user.ballDamageLevel++,a.data.saveData({ballDamageLevel:a.user.ballDamageLevel}),a.coreGame.resetBallShooter(),this.renderShop(),a.fx.showCongratz("Upgraded successfully!"),a.utilsFB.log("ev_shop_upgraded_damage",1,{newLevel:a.user.ballDamageLevel}),this.onBtnUpgradeClick()},upgradeShootRate(){a.utilsFB.log("ev_shop_click_shootrate");const e=a.configs.shootRateUpgradePrice[a.user.shootRateLevel];if(a.user.gold<e)return a.ui.showAlert("OOPS!\n\nNot enough gold");a.user.addGold(-e),a.user.shootRateLevel++,a.data.saveData({shootRateLevel:a.user.shootRateLevel}),a.coreGame.resetBallShooter(),this.renderShop(),a.fx.showCongratz("Upgraded successfully!"),a.utilsFB.log("ev_shop_upgraded_shootrate",1,{newLevel:a.user.shootRateLevel}),this.onBtnUpgradeClick()},isGoldEnoughFirstUpgrade:()=>a.user.gold>=a.configs.ballDamageUpgradePrice[0],isIconShopClicked:!1,check2ShowGuideOpenShop(){if(!a.coreGame.isPaused||this.isIconShopClicked||!this.isGoldEnoughFirstUpgrade())return;const e=cc.find("Canvas/shop_layer/hand_touch");e.stopAllActions(),e.active=!0,e.orgPosY||(e.orgPosY=e.y),e.y=e.orgPosY,e.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.4,0,-40),cc.moveBy(.4,0,40))))},isBtnUpgradeClicked:!1,check2ShowGuideUpgradeBall(){if(this.isBtnUpgradeClicked||!this.isGoldEnoughFirstUpgrade())return;const e=cc.find("Canvas/shop_layer/shop_UI/hand_touch");e.stopAllActions(),e.active=!0,e.orgPosY||(e.orgPosY=e.y),e.y=e.orgPosY,e.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.4,0,-40),cc.moveBy(.4,0,40))))},onBtnUpgradeClick(){this.isBtnUpgradeClicked||(this.isBtnUpgradeClicked=!0,a.data.saveData({isBtnUpgradeClicked:1})),cc.find("Canvas/shop_layer/shop_UI/hand_touch").active=!1}},cc._RF.pop()},{"./all_modules":"all_modules"}],social:[function(e,t,i){"use strict";cc._RF.push(t,"2fc8daS0+9LkoZznqdK+UUs","social"),Object.defineProperty(i,"__esModule",{value:!0}),i.social=void 0;const a=e("../all_modules"),n=a._,o=e("../social/share"),l=e("../social/message");i.social={subscribeInfo:null,shortcutInfo:null,currentInviteSource:"",init(){a.login.addLoginDataField("subscribeInfo")},onInviteImageLoaded(){window.FBInstant&&"THREAD"==FBInstant.context.getType()&&a.utils.setTimeout(()=>this.sendMessageAfterQuit(a.rank.rankIconSprite),1e3)},share(e){cc.find("Canvas/social/pic_share").active=!0,setTimeout(()=>{a.utils.setLabelText(cc.find("Canvas/social/pic_share/label_intro"),`Rank of ${a.user.name}`),cc.find("Canvas/social/pic_share/rank_icon").getComponent(cc.Sprite).spriteFrame=e,cc.find("Canvas/social/pic_share/ava").getComponent(cc.Sprite).spriteFrame=a.user.avatarSpriteFrame,cc.find("Canvas/social/pic_share").getComponent(o.default).sharePostNormal()})},sendMessageAfterQuit(e){cc.find("Canvas/social/pic_invite").active=!0,setTimeout(()=>{a.utils.setLabelText(cc.find("Canvas/social/pic_invite/label_intro"),`${a.user.name} challenges you!`),cc.find("Canvas/social/pic_invite/rank_icon").getComponent(cc.Sprite).spriteFrame=e,cc.find("Canvas/social/pic_invite/ava").getComponent(cc.Sprite).spriteFrame=a.user.avatarSpriteFrame,cc.find("Canvas/social/pic_invite").getComponent(l.default).sendMessageScore()})},askBotSubscribe(e){const t=()=>e&&e();if(!window.FBInstant)return t();a.utilsFB.isSupportedAPI("player.canSubscribeBotAsync")&&a.utilsFB.isSupportedAPI("player.subscribeBotAsync")?a.login.addCallback(e=>{if(this.subscribeInfo=e.hasOwnProperty("subscribeInfo")?e.subscribeInfo:2,"accepted"==this.subscribeInfo||this.subscribeInfo<=0)return t();this.subscribeInfo--,a.data.saveData({subscribeInfo:this.subscribeInfo}),FBInstant.player.canSubscribeBotAsync().then(e=>{e?FBInstant.player.subscribeBotAsync().then(()=>{this.subscribeInfo="accepted",a.data.saveData({subscribeInfo:this.subscribeInfo}),t(),a.utilsFB.log("ev_subcribe_bot",1,{result:"success"})}).catch(()=>{t(),a.utilsFB.log("ev_subcribe_bot",1,{result:"fail"})}):t()}).catch(()=>{t()})}):t()},askShortcut(e){const t=()=>e&&e();return window.FBInstant&&n.isANDROID&&a.utilsFB.isSupportedAPI("canCreateShortcutAsync")&&a.utilsFB.isSupportedAPI("createShortcutAsync")?void a.data.loadData(["shortcutInfo"],e=>{if(this.shortcutInfo=e.hasOwnProperty("shortcutInfo")?e.shortcutInfo:2,"accepted"==this.shortcutInfo||this.shortcutInfo<=0)return t();this.shortcutInfo--,a.data.saveData({shortcutInfo:this.shortcutInfo}),FBInstant.canCreateShortcutAsync().then(e=>{if(!e)return t();FBInstant.createShortcutAsync().then(()=>{this.shortcutInfo="accepted",t(),a.utilsFB.log("ev_shortcut",1,{result:"success"})}).catch(()=>{t(),a.utilsFB.log("ev_shortcut",1,{result:"fail"})})}).catch(()=>{t()})}):t()},postSessionScore(){window.FBInstant&&(a.user.score&&FBInstant.postSessionScore(a.user.score),a.user.score>(a.game.bestSessionScore||0)&&(a.game.bestSessionScore=a.user.score))},createContext(e,t,i){if(!window.FBInstant)return t&&t();FBInstant.context.createAsync(e).then(()=>{t&&t()},e=>{i&&i(e)})},invite(e){try{FBInstant.context.chooseAsync().then(()=>{this.sendMessageAfterQuit(a.rank.rankIconSprite),a.utilsFB.log("ev_invite_success",1,{source:a.social.currentInviteSource}),e&&e(FBInstant.context.getID())}).catch(t=>{n.log(t),e&&e()})}catch(t){n.log(t),e&&e()}}},cc._RF.pop()},{"../all_modules":"all_modules","../social/message":"message","../social/share":"share"}],spine_utils:[function(e,t,i){"use strict";cc._RF.push(t,"016beB4YllGD6Fgtk5VlY0g","spine_utils"),Object.defineProperty(i,"__esModule",{value:!0}),i.spineUtils=void 0;const a=e("../all_modules"),n=a._;i.spineUtils={runSpineNodeAnim(e,t,i=!1,n){const o=e.getComponentsInChildren("sp.Skeleton")[0];if(!o)return n&&n();const l=t+(e.animSuffix||"");o.setAnimation(0,l,i),n&&!i&&(e.spineAnimCallbackTimerVar&&a.utils.clearTimeout(e.spineAnimCallbackTimerVar),e.spineAnimCallbackTimerlet=a.utils.setTimeout(()=>{n&&e.active&&e.parent&&n()},1e3*o.findAnimation(l).duration))},runSpineNodeAnimArr(e,t,i){n.log(`runSpineNodeAnimArr >> animNameArr=${t}// charNode.animSuffix  = ${e.animSuffix} `);const o=e.getComponentsInChildren("sp.Skeleton")[0];if(!o)return i&&i();o.setAnimation(0,t[0]+(e.animSuffix||""),!1);const l=[];let s=0;return t.map((t,i)=>{const a=t+(e.animSuffix||"");i&&o.addAnimation(0,a);const n=o.findAnimation(a).duration;s+=n,l.push(n)}),e.spineAnimCallbackTimerVar&&a.utils.clearTimeout(e.spineAnimCallbackTimerVar),e.spineAnimCallbackTimerlet=a.utils.setTimeout(()=>{i&&e.active&&e.parent&&i()},1e3*s),l}},cc._RF.pop()},{"../all_modules":"all_modules"}],tut:[function(e,t,i){"use strict";cc._RF.push(t,"50c98uSMRZFxJoqcQSk+V70","tut"),Object.defineProperty(i,"__esModule",{value:!0}),i.tut=void 0;const a=e("./all_modules"),n=a._,o=[{initValue:3,x:0,y:0},{initValue:10,x:0,y:1},{initValue:2,x:12,y:1},{initValue:10,x:11,y:1},{initValue:3,x:1,y:2},{initValue:30,x:4,y:2},{initValue:18,x:7,y:2},{initValue:3,x:9,y:2},{initValue:10,x:11,y:2},{initValue:13,x:0,y:3},{initValue:30,x:2,y:3},{initValue:18,x:3,y:3},{initValue:2,x:6,y:3},{initValue:1,x:10,y:3},{initValue:16,x:0,y:4},{initValue:30,x:1,y:4},{initValue:10,x:2,y:4},{initValue:12,x:4,y:4},{initValue:30,x:7,y:4},{initValue:30,x:9,y:4},{initValue:14,x:11,y:4},{initValue:21,x:1,y:5},{initValue:34,x:2,y:5},{initValue:10,x:3,y:5},{initValue:34,x:4,y:5},{initValue:10,x:5,y:5},{initValue:21,x:7,y:5},{initValue:34,x:9,y:5},{initValue:34,x:10,y:5},{initValue:10,x:0,y:6},{initValue:14,x:1,y:6},{initValue:18,x:3,y:6},{initValue:21,x:4,y:6},{initValue:16,x:5,y:6},{initValue:14,x:6,y:6},{initValue:17,x:7,y:6},{initValue:18,x:8,y:6},{initValue:14,x:9,y:6},{initValue:22,x:10,y:6},{initValue:14,x:11,y:6},{initValue:35,x:0,y:7},{initValue:44,x:2,y:7},{initValue:26,x:3,y:7},{initValue:14,x:4,y:7},{initValue:16,x:5,y:7},{initValue:10,x:6,y:7},{initValue:18,x:7,y:7},{initValue:5,x:8,y:7},{initValue:8,x:9,y:7},{initValue:3,x:10,y:7},{initValue:30,x:11,y:7}];i.tut={isTutDone_EndlessBrickBall:!1,init(){a.utils.setTimeout(()=>this.drawFakeMap()),a.login.addCallback(e=>{if(e.isNewUser)this.startIntro();else{const e=cc.find("Canvas/layer_tut/newbie_tut");e.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(()=>e.active=!1)))}a.utils.setTimeout(()=>this.startHandMove(),1e3)}),a.utils.addButtonComp(cc.find("Canvas/layer_tut/newbie_tut/but_continue"),()=>this.handleTut())},drawFakeMap(){const e=cc.find("Canvas/layer_tut/newbie_tut/fake_game_board");o.map(t=>{t.y+=(a.mapRender.mapRowCount-13)/2;const i=a.nodeFactory.createNewBrick(t);a.utils.moveNodeTo(i,e),a.mapRender.renderBrick(i,t),i.opacity=n.min(220,20*t.y+50)})},startIntro(){cc.find("Canvas/layer_tut/newbie_tut/fake_game_board").runAction(cc.fadeIn(.3)),cc.find("Canvas/layer_tut/newbie_tut/grayLayer").runAction(cc.fadeOut(.3));const e=cc.find("Canvas/layer_tut/newbie_tut");["label_inrto_0","label_inrto_1","label_inrto_2","but_continue"].map((t,i)=>{a.utils.setTimeout(()=>{const i=cc.find(t,e);i.active||(i.active=!0),i.runAction(cc.fadeIn(.3))},2e3*i)})},startHandMove(){const e=cc.find("Canvas/layer_tut/hand_touch");e.runAction(cc.fadeIn(.4)),cc.tween(e).repeatForever(cc.tween().to(1.8,{x:-e.x}).to(1.8,{x:e.x})).start()},handleTut(){if(!cc.find("Canvas/layer_tut").active)return;const e=cc.find("Canvas/layer_tut/newbie_tut");e.active?e.runAction(cc.sequence(cc.fadeOut(.3),cc.callFunc(()=>e.active=!1))):(cc.find("Canvas/layer_tut").active=!1,a.ui.showLayer("shop_layer"),this.isTutDone_EndlessBrickBall=!0,a.gameFlow.resume(),a.fx.showWaveNComing())}},cc._RF.pop()},{"./all_modules":"all_modules"}],ui:[function(e,t,i){"use strict";cc._RF.push(t,"5c6e5hkCBNNPpCSzl/5UV94","ui"),Object.defineProperty(i,"__esModule",{value:!0}),i.ui=void 0;const a=e("../all_modules"),n=a._;i.ui={hideNagTimer:null,hideLoadingRealServerTimer:null,rankSprite:null,alertOKCallback:null,alertCancelCallback:null,init(){this.rankSprite=cc.find("Canvas").getComponent("canvas_init").rankSprite,a.ui.initButtonHandler()},adjustAllLayerSizes(){const e=["sample_nodes"];cc.find("Canvas").children.map(t=>{e.includes(t.name)||(t.width=cc.winSize.width,t.height=cc.winSize.height)})},isAllLayersHidden:()=>["layer_alert","layer_game_over","layer_pause","layer_rank_detail","layer_leaderboard","layer_new_rank"].every(e=>!cc.find(`Canvas/${e}`).active),initButtonHandler(){a.utils.addButtonComp(cc.find("Canvas/shop_layer/btn_shop"),()=>{a.shop.isShowing()?a.shop.hide():a.shop.show()}),a.utils.addButtonComp(cc.find("Canvas/shop_layer/shop_UI/btn_close"),()=>{a.shop.hide()}),a.utils.addButtonComp(cc.find("Canvas/layer_new_rank/but_continue"),()=>{a.fx.continueNextLevel(),a.coreGame.resume(),a.coreGame.fallDown1Row(.2),a.fx.resetWaveProgress(),a.gameFlow.isVideoContinueWatched=!1,a.video.isVideoShownLastGame=!1}),a.utils.addButtonComp(cc.find("Canvas/layer_alert/buttons/button_ok"),()=>{a.ui.hideLayer("layer_alert"),a.ui.alertOKCallback&&(a.ui.alertOKCallback(),a.ui.alertOKCallback=null)}),a.utils.addButtonComp(cc.find("Canvas/layer_alert/buttons/button_cancel"),()=>{a.ui.hideLayer("layer_alert"),a.ui.alertCancelCallback&&(a.ui.alertCancelCallback(),a.ui.alertCancelCallback=null)});const e=()=>{this.showConfirm("Are you sure to delete all your data and start like\na new player?",()=>a.gameFlow.resetRank()),a.utilsFB.log("ev_click_reset_rank")};a.utils.addButtonComp(cc.find("Canvas/layer_pause/bg_pause_small/button_reset_rank"),e),a.utils.addButtonComp(cc.find("Canvas/layer_rank_detail/bg_pause_small/button_reset_rank"),e),a.utils.addButtonComp(cc.find("Canvas/layer_game_over/button_reset_rank"),e),a.utils.addButtonComp(cc.find("Canvas/layer_video_continue/button_video"),()=>{a.video.showVideo(()=>a.gameFlow.onVideoWatched(),()=>a.gameFlow.onVideFailed())}),a.utils.addButtonComp(cc.find("Canvas/layer_video_continue/btn_cancel"),()=>{cc.find("Canvas/layer_video_continue").active=!1,a.gameFlow.realGameOver()}),a.utils.addButtonComp(cc.find("Canvas/layer_game_over/buttonReplay"),()=>{a.gameFlow.startNewGame(),a.utilsFB.log("ev_replay_game",1,{source:"game_over",rankIndex:a.rank.currentRankIndex}),a.fx.showWaveNComing(),a.audio.playSoundClickButton()},!1),a.utils.addButtonComp(cc.find("Canvas/layer_pause/bg_pause_small/buttonRestart"),()=>{a.gameFlow.startNewGame();const e=a.analytic.isPausedFromClick?"click_btn_pause":"app_inactive";a.utilsFB.log("ev_replay_game",1,{source:e,rankIndex:a.rank.currentRankIndex}),a.fx.showWaveNComing(),a.audio.playSoundClickButton()},!1),a.utils.addButtonComp(cc.find("Canvas/layer_pause/bg_pause_small/buttonContinue"),()=>{a.gameFlow.resume(),a.audio.playSoundClickButton(),a.utilsFB.log("ev_resume_game",1,{pause_source:a.analytic.isPausedFromClick?"click_btn_pause":"app_inactive"})},!1),a.utils.addButtonComp(cc.find("Canvas/layer_play_area/playing_header_bg/playing_header_white/buttonPause"),()=>{a.gameFlow.pause(),a.audio.playSoundClickButton(),a.utilsFB.log("ev_pause_game",1,{source:"click_btn_pause"}),a.analytic.isPausedFromClick=!0},!1);const t=()=>{this.hideLayer("layer_rank_detail"),this.isAllLayersHidden()&&a.gameFlow.resume(),a.shop.check2ShowGuideOpenShop()};a.utils.addButtonComp(cc.find("Canvas/layer_rank_detail/bg_pause_small/btn_close"),()=>t()),a.utils.addButtonComp(cc.find("Canvas/layer_rank_detail/grayLayer"),()=>t()),["Canvas/layer_play_area/playing_header_bg/btn_rank","Canvas/layer_pause/bg_pause_small/red_bg","Canvas/layer_game_over/red_bg"].map(e=>{const t=cc.find(e);a.utils.addButtonComp(t,()=>{let e="layer_game_over"==t.parent.name?"game_over":"pause";"layer_play_area"==t.parent.parent.name&&(e="play_area"),a.utilsFB.log("ev_click_rank_icon",1,{source:e}),a.coreGame.isPaused||a.coreGame.pause(),cc.find("Canvas/layer_rank_detail").active=!0,a.rank.onRankDetailShow(),a.rank.isIconRankClicked=!0})});const i=()=>{this.hideLayer("layer_leaderboard"),this.isAllLayersHidden()&&a.gameFlow.resume()};a.utils.addButtonComp(cc.find("Canvas/layer_leaderboard/bg_pause_small/btn_close"),()=>i()),a.utils.addButtonComp(cc.find("Canvas/layer_leaderboard/grayLayer"),()=>i()),a.utils.addButtonComp(cc.find("Canvas/top_buttons/leaderboard"),()=>{a.coreGame.isPaused||a.coreGame.pause(),cc.find("Canvas/layer_leaderboard").active=!0}),["Canvas/layer_game_over/social/btn_share","Canvas/layer_pause/bg_pause_small/social/btn_share","Canvas/layer_rank_detail/bg_pause_small/social/btn_share","Canvas/layer_new_rank/social/btn_share"].map(e=>{const t=cc.find(e);a.utils.addButtonComp(t,()=>{a.social.share(a.rank.rankIconSprite)})}),["Canvas/layer_game_over/social/btn_invite","Canvas/layer_pause/bg_pause_small/social/btn_invite","Canvas/layer_rank_detail/bg_pause_small/social/btn_invite","Canvas/layer_new_rank/social/btn_invite"].map(e=>{const t=cc.find(e);a.utils.addButtonComp(t,()=>{a.social.invite()})})},showLayer(e){const t=cc.find(`Canvas/${e}`);t&&(t.active=!0)},hideLayer(e){const t=cc.find(`Canvas/${e}`);t&&(t.active=!1)},showAlert(e,t){a.ui.showLayer("layer_alert"),a.utils.setLabelText(cc.find("Canvas/layer_alert/bg_msg/label_msg"),e),cc.find("Canvas/layer_alert/buttons/button_cancel").active=!1,a.ui.alertOKCallback=t},showConfirm(e,t,i){a.ui.showLayer("layer_alert"),a.utils.setLabelText(cc.find("Canvas/layer_alert/bg_msg/label_msg"),e),cc.find("Canvas/layer_alert/buttons/button_cancel").active=!0,a.ui.alertOKCallback=t,a.ui.alertCancelCallback=i},hideLoadingTimer:null,showLoading(){a.ui.showLayer("layer_loading"),a.ui.hideLoadingTimer&&clearTimeout(a.ui.hideLoadingTimer),a.ui.hideLoadingTimer=setTimeout(()=>a.ui.hideLoading(),1e4)},hideLoading(){a.ui.hideLayer("layer_loading"),a.ui.hideLoadingTimer&&clearTimeout(a.ui.hideLoadingTimer)},showNagScreen(e){cc.find("Canvas/nag_screen").active=!0,a.ui.hideNagTimer&&clearTimeout(a.ui.hideNagTimer),a.ui.hideNagTimer=setTimeout(()=>a.ui.hideNagScreen(),1e4)},hideNagScreen(e){cc.find("Canvas/nag_screen").active=!1,a.ui.hideNagTimer&&clearTimeout(a.ui.hideNagTimer)},disableButton(e){e.getComponent(cc.Button)||n.log("KHoong ton tai button component"),e.getComponent(cc.Button)&&(e.getComponent(cc.Button).enabled=!1),e.opacity=parseInt(76.5)},enableButton(e){e.getComponent(cc.Button)&&(e.getComponent(cc.Button).enabled=!0),e.opacity=255},updateButtonOnStartGame(){this.enableButton(cc.find("Canvas/play_area/btn_reset"))},updateButtonOnWin(){this.disableButton(cc.find("Canvas/play_area/btn_reset"))},showCompliment(e){const t=cc.find("Canvas/play_area/labels/compliment"),i=t.getChildByName("label");a.language.setLabelDataAndRender(i,e),t.stopAllActions(),t.scale=0,t.runAction(cc.sequence(cc.scaleTo(.2,1.15).easing(cc.easeOut(3)),cc.scaleTo(.1,1).easing(cc.easeIn(1)),cc.delayTime(2),cc.scaleTo(.1,1.15).easing(cc.easeOut(1)),cc.scaleTo(.2,0).easing(cc.easeIn(3))))},updateScore(e){a.utils.setLabelText(cc.find("Canvas/layer_play_area/playing_header_bg/labelScore"),a.utils.formatNumber(e)),cc.find("Canvas/layer_game_over/label_score").getComponent(cc.Label).string=a.utils.formatNumber(e),cc.find("Canvas/layer_video_continue/label_score").getComponent(cc.Label).string=a.utils.formatNumber(e)},updateGold(){a.utils.setLabelText(cc.find("Canvas/shop_layer/gold_bar/label_gold"),a.utils.formatNumber(a.user.gold))}},cc._RF.pop()},{"../all_modules":"all_modules"}],"use_v2.0.x_cc.Toggle_event":[function(e,t){"use strict";cc._RF.push(t,"6ee58ZeF+ZEO4i4/oL+tcbR","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}],user:[function(e,t,i){"use strict";cc._RF.push(t,"8c97an3CIlFUqVWJUTdMtIG","user"),Object.defineProperty(i,"__esModule",{value:!0}),i.user=void 0;const a=e("./all_modules");a._,i.user={id:"",playfabId:"",name:"",score:0,gold:0,shootRate:0,shootRateLevel:0,ballDamage:0,ballDamageLevel:0,bestScore:0,lifeCount:3,entryPointData:null,photo:null,avatarSpriteFrame:null,init(){window.FBInstant?(a.user.id=FBInstant.player.getID(),a.user.name=FBInstant.player.getName(),a.user.photo=FBInstant.player.getPhoto()):(a.user.id="xxxxaa111",a.user.name="Dung",a.user.photo="https://developer.mozilla.org/static/img/opengraph-logo.72382e605ce3.png"),a.utils.setLabelText(cc.find("Canvas/layer_play_area/playing_header_bg/btn_rank/label_user_name"),a.user.name),a.utils.setLabelText(cc.find("Canvas/layer_pause/bg_pause_small/label_user_name"),a.user.name),a.utils.setLabelText(cc.find("Canvas/layer_game_over/label_user_name"),a.user.name),a.login.addLoginDataField("gold"),a.login.addCallback(e=>{this.gold=e.gold||0,a.ui.updateGold()})},initNewUser(e){const t={LoginTime:0,bestScore:0,rankIndex:0,gold:a.configs.newUserGold,shootRateLevel:0,ballDamageLevel:0};Object.assign(e,t),Object.assign(this,t),a.data.saveData(e)},addGold(e=1){this.gold+=e,a.data.saveData({gold:this.gold}),a.ui.updateGold()}},cc._RF.pop()},{"./all_modules":"all_modules"}],utils_facebook:[function(e,t,i){"use strict";cc._RF.push(t,"bc462QLp09F46eLNPaWUe3t","utils_facebook"),Object.defineProperty(i,"__esModule",{value:!0}),i.utilsFB=void 0;const a=e("../all_modules");a._,i.utilsFB={init(){window.FBInstant&&(window.fbSupportedAPIs=FBInstant.getSupportedAPIs()),a.utilsFB.startLogSessionTime(),a.utils.setTimeout(()=>{window.FBInstant&&FBInstant.onPause(()=>{cc.find("Canvas/layer_tut").active||a.coreGame.isPaused||(a.gameFlow.pause(),a.utilsFB.log("ev_pause_game",1,{source:"app_inactive"}),a.analytic.isPausedFromClick=!1)})},8e3)},log(e,t=1,i){window.FBInstant&&FBInstant.logEvent(e,t,i)},setSessionId(e){window.FBInstant&&FBInstant.setSessionData({player_id:e})},isSupportedAPI:e=>!!window.FBInstant&&-1!=FBInstant.getSupportedAPIs().indexOf(e),startLogSessionTime(){const e=e=>{a.utilsFB.log("ev_session_time",1,{timePassed:e})};e(0);let t=0;a.utils.setInterval(()=>{e(t+=30)},3e4)}},cc._RF.pop()},{"../all_modules":"all_modules"}],utils:[function(e,t,i){"use strict";cc._RF.push(t,"d293dKXeb5J7r7yOabUnbih","utils"),Object.defineProperty(i,"__esModule",{value:!0}),i.utils=void 0;const a=e("../all_modules"),n=a._;let o=1e5;i.utils={textureCaches:{},init(){},setTimeout(e,t=0){const i={_id:o++,__instanceId:o,callback:()=>{e(i)}};return cc.director.getScheduler().schedule(i.callback,i,t/1e3,0,0,!1),i},clearTimeout(e){e&&e._id&&e.callback&&cc.director.getScheduler().unschedule(e.callback,e)},setInterval(e,t=0){const i={_id:o++,__instanceId:o,callback:()=>{e(i)}};return cc.director.getScheduler().schedule(i.callback,i,t/1e3,cc.macro.REPEAT_FOREVER,0,!1),i},clearInterval(e){e&&e._id&&e.callback&&cc.director.getScheduler().unschedule(e.callback,e)},addButtonComp(e,t,i=!0,n=!0){setTimeout(()=>{e.getComponent("free_button_comp")||e.addComponent("free_button_comp");const n=e.addComponent(cc.Button);n.transition=i?cc.Button.Transition.SCALE:null;const o=new cc.Component.EventHandler;o.target=e,o.component="free_button_comp",o.handler="freeHandler",n.clickEvents.push(o),e.freeButtonHandlerFunc=()=>{t(),a.audio.playSoundClickButton()}})},getNodePath(e){let t=[e.name],i=e.parent,a=0;for(;i&&a++<50&&i.parent;)t.push(i.name),i=i.parent;return t.reverse().join("/")},getComponentName:e=>e.split("<")[1].replace(">",""),getPhysicsComponent:e=>e.getComponent(cc.PhysicsCollider),setOrgPos(e){e&&(e.orgPos||(e.orgPos=e.getPosition()),e.setPosition(e.orgPos))},getGlobalPosition:e=>e.convertToWorldSpaceAR(cc.Vec2.ZERO),global2LocalPosDiff(e,t,i){const a=this.getGlobalPosition(e);return cc.v2(t-a.x,i-a.y)},setGlobalPosition(e,t){const i=a.utils.global2LocalPosDiff(e,t.x,t.y);return e.x+=i.x,e.y+=i.y,t},setGlobalPositionToNode(e,t){const i=a.utils.getGlobalPosition(t),n=a.utils.global2LocalPosDiff(e,i.x,i.y);return e.x+=n.x,e.y+=n.y,i},random0ToX:e=>n.floor(n.random()*e),randomArrItem(e,t=!1){let i=n.floor(n.random()*e.length);return t?e.splice(i,1)[0]:e[i]},randomObjectProp:(e,t=!1)=>{let i=Array.from(Object.keys(e)),n=a.utils.randomArrItem(i),o=e[n];return t&&delete e[n],o},randomItemFromRatioSet(e){let t=0;const i=[];e.map(e=>{t+=e.ratio,i.push(t)});const a=n.floor(n.random()*t);let o=0;return i.some((e,t)=>{if(a<e)return o=t,!0}),e[o]},secondsToTime:e=>({days:n.floor(e/86400),hours:n.floor(e%86400/3600),minutes:n.floor(e%3600/60),seconds:e%60}),secondsToTimeString(e){const{days:t,hours:i,minutes:a,seconds:n}=this.secondsToTime(e);return t>0?t+" day"+(t>1?"s":""):i>0?i+" hr"+(i>1?"s":""):a>0?a+" min"+(a>1?"s":""):(n||0)+" sec"+(n>1?"s":"")},secondsToTimeCountdown(e){if(e<=0)return"00:00";const{days:t,hours:i,minutes:a,seconds:n}=this.secondsToTime(e);if(t>0)return t+" day"+(t>1?"s":"");let o="";return i>0&&(o=("0"+i).slice(-2)+":"),(o+=("0"+a).slice(-2)+":")+("0"+n).slice(-2)},setLabelCountDownTimer(e,t,i,o){let l=e;n.isString(l)&&(l=cc.find(l)),l.countDownTimerVar&&clearInterval(l.countDownTimerVar);const s=()=>{if(!l.parent)return void clearInterval(l.countDownTimerVar);const e=n.time(),s=t-e,r=a.utils.secondsToTimeCountdown(n.floor(s/1e3)),c=(o||"xxx").replace("xxx",r);a.utils.setLabelText(l,c),s<=0&&(clearInterval(l.countDownTimerVar),i&&i())};l.countDownTimerlet=setInterval(s,500),s()},waitToRun(e,t,i=window,n=.1,o,l){let s=!1;const r=setInterval(()=>{if(t.includes("()")){if(!i[t.replace("()","")]())return}else if(!i[t])return;clearInterval(r),s=!0,e()},1e3*n);o&&a.utils.setTimeout(()=>{clearInterval(r),l&&!s&&l()},1e3*o)},extendObj:(e,t,i)=>{i.map(i=>{t[i]=e[i]})},setNodeProps(e,t,i,a,n,o){t&&(e.width=t),i&&(e.height=i),a&&(e.x=a),n&&(e.y=n),o&&(e.scale=o)},preloadImage(e,t){if(a.utils.textureCaches[e])return t&&t(a.utils.textureCaches[e]);cc.loader.loadRes(e,cc.SpriteFrame,(i,n)=>{i?t&&t(!1):(a.utils.textureCaches[e]=n,t&&t(n))})},copyTexture(e,t){(t.getComponent(cc.Sprite)||t.addComponent(cc.Sprite)).spriteFrame=e.getComponent(cc.Sprite).spriteFrame},setNodeImg(e,t){e.getComponent(cc.Sprite).spriteFrame=t},setLabelText(e,t){e&&(e.getComponent(cc.Label).string=t)},setLabelTextBigNumber(e,t){e&&(isNaN(t)&&(t=0),e.getComponent(cc.Label).string=a.utils.formatCurrency(t,999999999999999))},setLabelTextPrice(e,t,i){if(!e)return;const o=n.isString(t)&&t.startsWith("+"),l=o?parseInt(t.replace("+","")):t;let s=a.utils.formatCurrency(l,i);e.getComponent(cc.Label).string=(o?"+":"")+s},setLabelTextShotcut(e,t){if(e){if(!t.length)return;let i=t.length>6?t.slice(0,6):t;e.getComponent(cc.Label).string=i+"..."}},moveNodeTo(e,t,i=!1){let a=i?cc.instantiate(e):e;return t&&a.parent!=t&&(a.removeFromParent(!1),t.addChild(a)),a},copyNodeTo:(e,t)=>{let i=a.utils.moveNodeTo(e,t,!0),n=e.getComponentsInChildren(cc.Sprite),o=i.getComponentsInChildren(cc.Sprite);return n.map((e,t)=>{let i=e.node,n=o[t].node;a.utils.extendObj(i,n,["width","height"]),i.onTouchEnd&&n.on("touchend",i.onTouchEnd)}),i},prefabToNode:e=>cc.instantiate(a.prefabList[e]),preloadPrefabToNode(e,t,i){const n=a.utils.prefabToNode(e);n.name=t,n.parent=i,n.setPosition(0,0),n.active=!1},formatNumber:e=>(e=n.round(e)).toLocaleString("en"),formatCurrency(e,t){const i=["K","M","B","T","aa","ab","ad","ae","af"];let a=n.floor(e),o="";if(a>t)for(let n of i)if((a/=1e3)<t){o=n;break}return a.toFixed(0).replace(",",".").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+o},isURL:e=>!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e),singleTouchSet(e,t,i,a){const n=(e,t)=>{e(t.touch.getLocation(),t)};e.on("touchstart",i=>{e.touchingID||(e.touchingID=i.touch._id+1,t&&n(t,i))}),i&&e.on("touchmove",t=>{t.touch._id+1==e.touchingID&&i&&n(i,t)});let o=t=>{t.touch._id+1==e.touchingID&&(e.touchingID=null,a&&n(a,t))};e.on("touchend",o),e.on("touchcancel",o)},removeTouchHandler(e){e.isDraggable=!1,e.touchStartHandlerArr=e.touchMoveHandlerArr=e.touchEndHandlerArr=null,e.off("touchstart"),e.off("touchend"),e.off("touchmove"),e.off("touchcancel")},localizeNumber:e=>{let t="",i=".";switch(t=window.FBInstant?FBInstant.getLocale():"en_US"){case"en_US":case"en_GB":case"th_TH":i=",";break;case"fr_FR":case"fr_CA":case"ru_RU":i=" ";break;case"pl_PL":case"it_IT":case"hu_HU":i=""}let a="",n=e,o=0,l="";for(;n>=10;){o>0&&o%3==0&&(a=i+a);let e=n%10;a=(l=e+"")+a,n=(n-e)/10,o++}return o>0&&o%3==0&&(a=i+a),(l=n+"")+a}},cc._RF.pop()},{"../all_modules":"all_modules"}],video:[function(e,t,i){"use strict";cc._RF.push(t,"73340lQ/NJNwpBu0slbtu6L","video"),Object.defineProperty(i,"__esModule",{value:!0}),i.video=void 0;const a=e("../all_modules");a._,i.video={isAvailable:!1,loadingVideo:!1,rewardedVideo:null,isVideoShownLastGame:!1,init(){window.FBInstant?this.isAvailable=a.utilsFB.isSupportedAPI("getRewardedVideoAsync"):this.isAvailable=!0,console.log(`VIDEO.isAvailable = ${this.isAvailable} `),a.video.preloadVideo(()=>{console.log("VIDEO.PRELOAD SUCCESS")},e=>{console.log("VIDEO.PRELOAD ERROR",e)})},preloadVideo(e,t){window.FBInstant?a.utilsFB.isSupportedAPI("getRewardedVideoAsync")?a.video.loadingVideo?t&&t({code:"LOADING"}):(a.video.loadingVideo=!0,FBInstant.getRewardedVideoAsync(a.configs.videoRewardId).then(i=>{i.loadAsync().then(()=>{a.video.rewardedVideo=i,a.video.loadingVideo=!1,e&&e()}).catch(e=>{a.video.rewardedVideo=null,a.video.loadingVideo=!1,t&&t(e)})}).catch(e=>{a.video.rewardedVideo=null,a.video.loadingVideo=!1,t&&t(e)})):t&&t({code:"NOT_SUPPORTED"}):t&&t({code:"OFFLINE"})},showVideo(e,t,i=""){console.log(`VIDEO.showVideo() calling ... videoObject = ${!!a.video.rewardedVideo} `);const n=()=>{a.ui.hideLoading(),e&&e()},o=e=>{a.ui.hideLoading(),t&&t(e)};if(a.ui.showLoading(),!window.FBInstant)return n();a.video.rewardedVideo?(a.utilsFB.log("ev_video_click_show"),a.video.rewardedVideo.showAsync().then(()=>{console.log("VIDEO.showVideo success"),a.utilsFB.log("ev_watch_video_success",1,{}),a.utilsFB.log("Ads-Total-Video",1,{videoPos:i}),a.utilsFB.log("Ads-Total"),n(),a.video.preloadVideo()}).catch(e=>{console.warn("VIDEO.showVideo error ",e),a.video.isErrRewardNotCompleted(e)?a.utilsFB.log("ev_video_err_reward_not_completed"):a.utilsFB.log("ev_video_err_other"),a.video.preloadVideo(),o(e)})):(o({code:"VIDEO_IS_NULL"}),a.video.preloadVideo())},isErrRewardNotCompleted:e=>"USER_INPUT"==e.code&&"Reward not completed"==e.message},cc._RF.pop()},{"../all_modules":"all_modules"}]},{},["use_v2.0.x_cc.Toggle_event","all_modules","analytic","brick_styles","canvas_init","ball_component","brick_component","configs","control","core_game","data","game_flow","leaderboard","load_optimize","login","map_config","map_part_generator","map_render","node_factory","physics_bound","rank","shop","big_promo","challenge","message","promo","share","social","tut","fx","ui","user","audio","free_button_comp","instant_utils","md5","spine_utils","utils","utils_facebook","inter_ad","video"]);