window.__require=function e(t,o,n){function i(c,r){if(!o[c]){if(!t[c]){var s=c.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!r&&l)return l(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var u=o[c]={exports:{}};t[c][0].call(u.exports,function(e){return i(t[c][1][e]||e)},u,u.exports,e,t,o,n)}return o[c].exports}for(var a="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({all_modules:[function(e,t,o){"use strict";cc._RF.push(t,"090e8xDLQRAgKX2HKPophnx","all_modules");var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__exportStar||function(e,t){for(var o in e)"default"===o||Object.prototype.hasOwnProperty.call(t,o)||n(t,e,o)};Object.defineProperty(o,"__esModule",{value:!0}),i(e("../services/utils/utils_common"),o),i(e("./configurations/config_game"),o),i(e("../services/utils/utils_data"),o),i(e("../services/utils/utils_ui"),o),i(e("../services/utils/utils_anim_fx"),o),i(e("../services/audio"),o),i(e("../system/app_events"),o),i(e("../system/ui-fx/core_fx"),o),i(e("../system/ui-fx/core_ui"),o),i(e("../core-game/settings"),o),i(e("../core-game/game_mechanic"),o),i(e("../core-game/map_visual"),o),i(e("../core-game/tutorial"),o),i(e("../core-game/game_flow"),o),i(e("../core-game/qr_code"),o),i(e("../control/control"),o),cc._RF.pop()},{"../control/control":"control","../core-game/game_flow":"game_flow","../core-game/game_mechanic":"game_mechanic","../core-game/map_visual":"map_visual","../core-game/qr_code":"qr_code","../core-game/settings":"settings","../core-game/tutorial":"tutorial","../services/audio":"audio","../services/utils/utils_anim_fx":"utils_anim_fx","../services/utils/utils_common":"utils_common","../services/utils/utils_data":"utils_data","../services/utils/utils_ui":"utils_ui","../system/app_events":"app_events","../system/ui-fx/core_fx":"core_fx","../system/ui-fx/core_ui":"core_ui","./configurations/config_game":"config_game"}],app_events:[function(e,t,o){"use strict";cc._RF.push(t,"10990IZBkRJQLreM2+T4aIH","app_events"),Object.defineProperty(o,"__esModule",{value:!0}),o.appEvents=void 0;var n=e("../system/all_modules");n._,n.$,o.appEvents={isAppHidden:!1,onAppShowCallbackArr:[],onAppHideCallbackArr:[],onAppShow:function(){this.isAppHidden=!1,this.onAppShowCallbackArr.map(function(e){return e()})},addAppShowCallback:function(e){this.onAppShowCallbackArr.push(e)},onAppHide:function(){this.isAppHidden=!0,this.onAppHideCallbackArr.map(function(e){return e()})},addAppHideCallback:function(e){this.onAppHideCallbackArr.push(e)}},cc._RF.pop()},{"../system/all_modules":"all_modules"}],audio:[function(e,t,o){"use strict";cc._RF.push(t,"57d370T3gNMWJXIo0x1feW9","audio"),Object.defineProperty(o,"__esModule",{value:!0}),o.audio=void 0;var n=e("../system/all_modules"),i=n._;n.$,o.audio={audioList:{},playingIdList:{},init:function(){var e=this;i.setTimeout(function(){return e.loadAudioFiles()},200)},updateVolume:function(){cc.audioEngine.setEffectsVolume(n.settings.soundVolume),cc.audioEngine.setMusicVolume(n.settings.musicVolume)},loadAudioFiles:function(){var e=this;cc.resources.loadDir("audios",cc.AudioClip,function(t,o){if(t)return i.log(t);for(var a=0,c=o;a<c.length;a++){var r=c[a];e.audioList[r.name]=r}i.log("audio.js >> all audio loaded !"),i.waitToRun(function(){return e.playBgMusic(n.settings.musicVolume)},"isInitialized",n.settings)})},playSound:function(e,t){if(this.audioList[e])try{this.playingIdList[e]=cc.audioEngine.play(this.audioList[e],!1,t||n.settings.soundVolume)}catch(o){}},stopSound:function(e){this.playingIdList[e]&&cc.audioEngine.stopEffect(this.playingIdList[e])},playBgMusic:function(e){if(void 0===e&&(e=1),!cc.audioEngine.isMusicPlaying())try{this.playingIdList.bg_music=cc.audioEngine.playMusic(this.audioList.bg_music,!0),cc.audioEngine.setMusicVolume(e)}catch(t){i.log("playMusic err ",t)}},stopBgMusic:function(){cc.audioEngine.isMusicPlaying()&&cc.audioEngine.stopMusic()},playSoundClickButton:function(){n.settings.soundVolume&&this.playSound("button_click",1)}},cc._RF.pop()},{"../system/all_modules":"all_modules"}],bind_button_handlers:[function(e,t,o){"use strict";cc._RF.push(t,"9c123Lu5L1HWKu7kgQRu2Dk","bind_button_handlers"),Object.defineProperty(o,"__esModule",{value:!0}),o.bindButtonHandlers=void 0;var n=e("../../system/all_modules");n._,o.bindButtonHandlers={run:function(){n.utilsUI.makeBubbleButton("Canvas/screen/layout_home/tap_to_start/btn_tap-to_start",function(){cc.find("Canvas/screen/layout_home/tap_to_start").active=!1}),n.utilsUI.makeBubbleButton("Canvas/screen/layout_tutorial/btn_done",function(){n.coreUI.hideLayout("layout_tutorial")}),n.utilsUI.makeBubbleButton("Canvas/screen/layout_home/btn_play",function(){n.coreUI.hideLayout("layout_home"),n.coreUI.showLayout("play_area"),n.tutorial.checkToShow(),n.gameMechanic.startGame()}),n.utilsUI.makeBubbleButton("Canvas/screen/layout_home/btn_settings",function(){n.coreUI.showLayout("layout_settings")}),n.utilsUI.makeBubbleButton("Canvas/screen/layout_home/btn_full_screen",function(){cc.screen.fullScreen()?cc.screen.exitFullScreen(document.getElementById("Cocos2dGameContainer")):cc.screen.requestFullScreen(document.getElementById("Cocos2dGameContainer"))}),n.utilsUI.makeBubbleButton("Canvas/screen/layout_lose/btn_replay",function(){n.coreUI.hideLayout("layout_lose"),n.gameMechanic.replay()}),n.utilsUI.makeBubbleButton("Canvas/screen/layout_lose/btn_home",function(){n.coreUI.hideLayout("layout_lose"),n.coreUI.hideLayout("play_area"),n.coreUI.showLayout("layout_home")}),n.utilsUI.makeBubbleButton("Canvas/screen/play_area/btn_pause",function(){n.coreUI.showLayout("layout_pause"),cc.director.pause()}),n.utilsUI.makeBubbleButton("Canvas/screen/layout_pause/btn_replay",function(){n.coreUI.hideLayout("layout_pause"),n.gameMechanic.replay(),cc.director.resume()}),n.utilsUI.makeBubbleButton("Canvas/screen/layout_pause/btn_resume",function(){n.coreUI.hideLayout("layout_pause"),cc.director.resume()}),n.utilsUI.makeBubbleButton("Canvas/screen/layout_pause/btn_home",function(){n.coreUI.hideLayout("layout_pause"),n.coreUI.hideLayout("play_area"),n.coreUI.showLayout("layout_home"),cc.director.resume()}),n.utilsUI.makeBubbleButton("Canvas/screen/layout_settings/btn_home",function(){n.coreUI.hideLayout("layout_settings"),n.coreUI.showLayout("layout_home")})}},cc._RF.pop()},{"../../system/all_modules":"all_modules"}],config_game:[function(e,t,o){"use strict";cc._RF.push(t,"e2516totLFCXanAqceflU53","config_game"),Object.defineProperty(o,"__esModule",{value:!0}),o.configGame=void 0;var n=e("../all_modules");n._,n.$,o.configGame={toastScore2Arr:["Copy of ToastPunk 968 copy","Copy of ToastPunk 971 copy","Copy of ToastPunk 974 copy","Copy of ToastPunk 980 copy","Copy of ToastPunk 997 copy","Copy of ToastPunk 999 copy"]},cc._RF.pop()},{"../all_modules":"all_modules"}],control:[function(e,t,o){"use strict";cc._RF.push(t,"1ddf8FW8cNGapuroxBoKhVq","control"),Object.defineProperty(o,"__esModule",{value:!0}),o.control=void 0;var n=e("../system/all_modules"),i=n._;n.$,o.control={selectedCellNode:null,init:function(){var e,t=cc.find("Canvas/screen/play_area/draggable_toast"),o=t.position;n.utilsUI.singleTouchSet(t,function(o){e=o,t.zIndex=i.getNewUuid(),cc.tween(t).to(.15,{angle:0}).start()},function(i){var a=i.sub(e);t.setPosition(o.add(a.div(n.mapVisual.gameCameraComp.zoomRatio)))},function(){t.zIndex=-1,t.stopAllActions(),t.angle=45,n.gameMechanic.onDropElem(),n.audio.playSoundClickButton()})}},cc._RF.pop()},{"../system/all_modules":"all_modules"}],core_fx:[function(e,t,o){"use strict";cc._RF.push(t,"58583JUlBRDj43pXro2UfkX","core_fx"),Object.defineProperty(o,"__esModule",{value:!0}),o.coreFX=void 0;var n=e("../../system/all_modules");n._,n.$,o.coreFX={fxContainer:null,init:function(){},playAnimNewElemAppear:function(){n.coreUI.showNagScreen();var e=n.gameMechanic,t=e.draggableElemNode,o=e.draggableElemNodeOrgPos;e.setRandomDraggableElemSprite(),t.stopAllActions(),t.setPosition(o),t.y+=cc.winSize.height,cc.tween(e.draggableElemNode).to(.4,{y:o.y-t.height*t.scale+25}).to(0,{opacity:0}).call(this.shakeToaster).delay(.6).to(0,{opacity:255}).to(.01,{opacity:255}).to(.2,{y:o.y+30}).to(.2,{y:o.y}).call(function(){n.coreUI.hideNagScreen()}).start()},shakeToaster:function(){var e=cc.find("Canvas/screen/play_area/toaster");cc.tween(e).to(.05,{angle:-14},{easing:"sineOut"}).to(.1,{angle:14},{easing:"sineOut"}).to(.1,{angle:-14},{easing:"sineOut"}).to(.1,{angle:14},{easing:"sineOut"}).to(.1,{angle:-14},{easing:"sineOut"}).to(.05,{angle:0},{easing:"sineOut"}).call(function(){n.utilsAnimFx.replayParticle(cc.find("smoke",e))}).start()}},cc._RF.pop()},{"../../system/all_modules":"all_modules"}],core_ui:[function(e,t,o){"use strict";cc._RF.push(t,"b15554JuJ1HfrbLWDvHND0f","core_ui"),Object.defineProperty(o,"__esModule",{value:!0}),o.coreUI=void 0;var n=e("../../system/all_modules"),i=n._,a=e("./bind_button_handlers");o.coreUI={isMobile:!1,alertOKCallback:null,init:function(){a.bindButtonHandlers.run();var e=["layout_tutorial","play_area","layout_lose","layout_pause","layout_settings"];i.setTimeout(function(){return e.map(function(e){return n.coreUI.hideLayout(e)})})},updateScore:function(){n.utilsUI.fillLabel(cc.find("Canvas/screen/play_area/status/label_status"),""+n.gameMechanic.currentScore),n.utilsUI.fillLabel(cc.find("Canvas/screen/layout_lose/ellipse_dialog/label_stack"),""+n.gameMechanic.currentScore)},updateHighscore:function(){n.utilsUI.fillLabel(cc.find("Canvas/screen/layout_lose/ellipse_dialog/label_high_score"),""+n.gameFlow.highscore)},showLayout:function(e){var t=i.isString(e)?cc.find("Canvas/screen/"+e):e;t.active=!0,t.opacity=255},hideLayout:function(e){(i.isString(e)?cc.find("Canvas/screen/"+e):e).active=!1},showAlert:function(e,t){this.showLayout("layer_alert"),n.utilsUI.fillLabel(cc.find("Canvas/screen/layer_alert/bg_msg/label_msg"),e),this.alertOKCallback=t},hideLoadingTimer:null,showLoading:function(){var e=this;this.showLayout("layer_loading"),this.hideLoadingTimer&&clearTimeout(this.hideLoadingTimer),this.hideLoadingTimer=setTimeout(function(){return e.hideLoading()},1e4)},hideLoading:function(){this.hideLayout("layer_loading"),this.hideLoadingTimer&&clearTimeout(this.hideLoadingTimer)},showNagScreen:function(e){var t=this;cc.find("Canvas/screen/nag_screen").active=!0,e&&i.setTimeout(function(){return t.hideNagScreen()},1e3*e)},hideNagScreen:function(){cc.find("Canvas/screen/nag_screen").active=!1},updateUserStats:function(e){void 0===e&&(e=!1)}},cc._RF.pop()},{"../../system/all_modules":"all_modules","./bind_button_handlers":"bind_button_handlers"}],elem_collision_comp:[function(e,t,o){"use strict";cc._RF.push(t,"3e2efOkwEBNM6tF/YM3aeja","elem_collision_comp");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,c=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(c=(a<3?i(c):a>3?i(t,o,c):i(t,o))||c);return a>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../system/all_modules"),r=(c._,c.$,cc._decorator),s=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onBeginContact=function(e,t,o){o.node.name.startsWith("physical_toast")?c.gameMechanic.onElemCollision(t.node,o.node):"table"===o.node.name&&c.gameMechanic.onElemCollideTable(t.node)},t.prototype.onEndContact=function(){},a([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../system/all_modules":"all_modules"}],free_button_comp:[function(e,t,o){"use strict";cc._RF.push(t,"ee307OeX0lMvqRwlJoeXArM","free_button_comp");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,c=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(c=(a<3?i(c):a>3?i(t,o,c):i(t,o))||c);return a>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../system/all_modules"),r=(c._,c.$,cc._decorator),s=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.freeHandler=function(e){e.target.freeButtonHandlerFunc&&e.target.freeButtonHandlerFunc(e.target)},a([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../system/all_modules":"all_modules"}],game_flow:[function(e,t,o){"use strict";cc._RF.push(t,"133e2EyA7BEH6xD94DPj2u1","game_flow"),Object.defineProperty(o,"__esModule",{value:!0}),o.gameFlow=void 0;var n=e("../system/all_modules");n._,n.$,o.gameFlow={highscore:0,init:function(){var e=this;n.utilsData.load(["highscore"],function(t){e.highscore=t.highscore||0,n.coreUI.updateHighscore()})}},cc._RF.pop()},{"../system/all_modules":"all_modules"}],game_mechanic:[function(e,t,o){"use strict";cc._RF.push(t,"438ea0dqARKwKWtyk/Ae8uA","game_mechanic"),Object.defineProperty(o,"__esModule",{value:!0}),o.gameMechanic=void 0;var n=e("../system/all_modules"),i=n._;n.$,o.gameMechanic={draggableElemNode:null,draggableElemNodeOrgPos:null,currentElemSprite:null,currentPhysicalElemNode:null,lastPhysicalElemNode:null,currentScore:0,init:function(){this.draggableElemNode=cc.find("Canvas/screen/play_area/draggable_toast"),this.draggableElemNodeOrgPos=this.draggableElemNode.position;var e=cc.director.getPhysicsManager();e.enabled=!0,e.gravity=cc.v2(0,-640),cc.find("Canvas/screen/play_area").getComponentsInChildren(cc.RigidBody).map(function(e){return e.node.active=!0}),this.setRandomDraggableElemSprite()},startGame:function(){n.mapVisual.clearMap(),this.currentScore=0,n.coreUI.updateScore()},replay:function(){this.startGame(),cc.find("Canvas/screen/layout_lose").active=!1},onLose:function(){this.currentScore>n.gameFlow.highscore&&(n.gameFlow.highscore=this.currentScore,n.utilsData.save({highscore:n.gameFlow.highscore}),n.coreUI.updateHighscore()),n.coreUI.showLayout("layout_lose");var e=new Date,t=e.getUTCHours()+":"+e.getUTCMinutes()+":"+e.getUTCSeconds()+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getUTCMonth()]+" "+e.getUTCDate()+" "+e.getUTCFullYear()+" UTC";n.qrCode.setQrCodeStr("score="+this.currentScore+",highscore="+n.gameFlow.highscore+",time="+t)},isDroppingElem:!1,onDropElem:function(){var e=this;this.isDroppingElem=!0,i.setTimeout(function(){return e.isDroppingElem=!1},200),this.newPhysicalElem(),n.coreFX.playAnimNewElemAppear()},isHandlingMiddleStackCase:!1,onElemCollision:function(e,t){var o=this;if(e==this.currentPhysicalElemNode){var a=function(){if(o.isDroppingElem){var e=o.currentPhysicalElemNode;e.active=!1,o.currentPhysicalElemNode=i.copyNode(e,e.parent),o.currentPhysicalElemNode.y=o.lastPhysicalElemNode.y+30,e.removeFromParent(),o.currentPhysicalElemNode.active=!0,o.currentPhysicalElemNode.zIndex=i.getNewUuid()}};if(t!=this.lastPhysicalElemNode){if(this.isHandlingMiddleStackCase)return;return this.isHandlingMiddleStackCase=!0,i.setTimeout(function(){return o.isHandlingMiddleStackCase=!1},100),void a()}this.currentPhysicalElemNode.y<this.lastPhysicalElemNode.y&&a(),n.mapVisual.checkAdjustCameraZoom(e)}},onElemCollideTable:function(){this.onLose()},setRandomDraggableElemSprite:function(){var e=cc.find("Canvas/screen/toast_sprites").children;this.currentElemSprite=i.randomArrItem(e).getComponent(cc.Sprite).spriteFrame,n.utilsUI.setNodeSprite(this.draggableElemNode,this.currentElemSprite)},newPhysicalElem:function(){var e=this.currentElemSprite.name.startsWith("genesis_"),t=cc.find("Canvas/screen/sample_nodes/physical_toast"+(e?"_genesis":"")),o=i.copyNode(t,cc.find("Canvas/screen/play_area/elem_container"));i.setGlobalPosToNode(o,this.draggableElemNode),n.utilsUI.setNodeSprite(cc.find("visual",o),this.currentElemSprite),o.active=!0,o.zIndex=i.getNewUuid(),this.lastPhysicalElemNode=this.currentPhysicalElemNode,this.currentPhysicalElemNode=o;var a=n.configGame.toastScore2Arr.includes(this.currentElemSprite.name);this.currentScore+=a?2:1,n.coreUI.updateScore()}},cc._RF.pop()},{"../system/all_modules":"all_modules"}],map_visual:[function(e,t,o){"use strict";cc._RF.push(t,"8e0baH2ZLtGQb52+gG4oZRe","map_visual"),Object.defineProperty(o,"__esModule",{value:!0}),o.mapVisual=void 0;var n=e("../system/all_modules"),i=n._;n.$,o.mapVisual={gameCameraComp:null,orgPlatePos:null,orgPlateGPosY:0,maxToastHeightRatio:.6,maxViewHeight:0,init:function(){this.gameCameraComp=cc.find("Canvas/screen/Game Camera").getComponent(cc.Camera);var e=cc.find("Canvas/screen/play_area/plate");this.orgPlatePos=e.position,this.orgPlateGPosY=i.getGlobalPos(e).y,this.maxViewHeight=this.maxToastHeightRatio*cc.winSize.height-this.orgPlateGPosY},clearMap:function(){this.gameCameraComp.zoomRatio=1,this.gameCameraComp.node.setPosition(0,0),cc.find("Canvas/screen/play_area/elem_container").removeAllChildren()},checkAdjustCameraZoom:function(e){var t=n.mapVisual.gameCameraComp,o=i.getGlobalPos(e).y-this.orgPlateGPosY;if(!(o<=this.maxViewHeight)){var a=this.maxViewHeight/o,c=this.orgPlatePos.mul(1-1/a);cc.tween(n.mapVisual.gameCameraComp).to(.4,{zoomRatio:a}).start(),cc.tween(t.node).to(.4,{position:c}).start()}}},cc._RF.pop()},{"../system/all_modules":"all_modules"}],project_init_comp:[function(e,t,o){"use strict";cc._RF.push(t,"6a573g+HCdKnYr0iab16Em0","project_init_comp");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,c=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(c=(a<3?i(c):a>3?i(t,o,c):i(t,o))||c);return a>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../system/all_modules"),r=c._,s=(c.$,cc._decorator),l=s.ccclass,u=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.start=function(){window._G=c},t.prototype.onLoad=function(){cc.game.on(cc.game.EVENT_SHOW,function(){return c.appEvents.onAppShow()}),cc.game.on(cc.game.EVENT_HIDE,function(){return c.appEvents.onAppHide()}),this.adjustScreenAspectRatio(function(){for(var e in c)c[e].init&&c[e].init()})},t.prototype.adjustScreenAspectRatio=function(e){var t=this,o=cc.find("Canvas/screen"),n=cc.find("bg/bg_desktop",o),i=cc.find("bg/bg_mobile",o);n.orgRatio=n.width/n.height,i.orgRatio=i.width/i.height,o.width=n.width=cc.winSize.width,o.height=i.height=cc.winSize.height;var a=["layout_tutorial","layout_pause","layout_lose","layout_settings"];cc.winSize.height<720?a.map(function(e){var t=cc.find("Canvas/screen/"+e);t.removeComponent(cc.Widget),t.children.map(function(e){return e.removeComponent(cc.Widget)}),r.setTimeout(function(){return t.scale=cc.winSize.height/720})}):a.map(function(e){cc.find("Canvas/screen/"+e).children.map(function(e){var t=e.getComponent(cc.Widget);t&&(t.enabled=!0)})});var s=c.coreUI.isMobile=cc.winSize.width/cc.winSize.height<=.75;n.height=n.width/n.orgRatio,i.width=i.height*i.orgRatio,n.active=!s,i.active=s,r.setTimeout(function(){t.adjustLayouts(),r.setTimeout(function(){return e&&e()})})},t.prototype.adjustLayouts=function(){c.coreUI.isMobile&&(this.adjustGamePlay(),this.adjustLayoutHome(),this.adjustLayoutLose(),this.adjustLayoutPause(),this.adjustLayoutSettings(),this.adjustLayoutTutorial())},t.prototype.adjustGamePlay=function(){var e=cc.find("Canvas/screen/play_area/plate"),t=cc.find("Canvas/screen/play_area/table"),o=cc.find("Canvas/screen/play_area/toaster"),n=cc.find("Canvas/screen/play_area/draggable_toast");t.y+=30,e.setPosition(212,-181),e.scale*=1.62/.89,o.scale*=1.46/.89,o.setPosition(-291,185),n.scale*=1.46/.89,cc.find("Canvas/screen/sample_nodes/physical_toast").scale*=1.46/.89,cc.find("Canvas/screen/sample_nodes/physical_toast_genesis").scale*=1.46/.89,n.setPosition(-326,393);var i=cc.find("Canvas/screen/play_area/btn_pause"),a=cc.find("Canvas/screen/play_area/status"),c=i.getComponent(cc.Widget);c.top=87,c.right=51,i.scale*=2.4/.9,cc.find("blank_toast",a).scale*=1.5/.9,cc.find("blank_toast",a).setPosition(99,-85),cc.find("round_rect",a).scale*=2/.89,cc.find("round_rect",a).setPosition(97,-300),cc.find("round_rect",a).width=146,cc.find("round_rect",a).height=102,cc.find("label_toast",a).active=!1,cc.find("label_status",a).scale*=3.5,cc.find("label_status",a).setPosition(93,-295),cc.find("label_status",a).getComponent(cc.LabelOutline).width=2},t.prototype.adjustLayoutHome=function(){var e=cc.find("Canvas/screen/layout_home"),t=cc.find("logo",e),o=cc.find("btn_play",e),n=cc.find("btn_settings",e),i=cc.find("btn_full_screen",e),a=cc.find("tap_to_start",e);a.scale*=1.9,a.getComponent(cc.Widget).enabled=!0,a.getComponent(cc.Widget).bottom=1138,i.active=!1,t.scale*=2,t.getComponent(cc.Widget).bottom=1224,n.scale*=2.8/1.5,n.getComponent(cc.Widget).bottom=654,n.x=-262,o.scale*=1.7/.9,o.getComponent(cc.Widget).bottom=615,o.x=211},t.prototype.adjustLayoutLose=function(){var e=cc.find("Canvas/screen/layout_lose"),t=cc.find("ellipse_dialog",e),o=cc.find("label_header",e),n=cc.find("btn_replay",e),i=cc.find("btn_home",e),a=cc.find("qr_code",e);a.scale*=2.3,a.getComponent(cc.Widget).bottom=150,t.scale*=1.8/.89,t.getComponent(cc.Widget).bottom=954,o.scale*=1.8,o.getComponent(cc.Widget).bottom=1643,n.scale*=2,n.getComponent(cc.Widget).bottom=673,n.x=169,i.scale*=2,i.getComponent(cc.Widget).bottom=670,i.x=-173},t.prototype.adjustLayoutPause=function(){var e=cc.find("Canvas/screen/layout_pause"),t=cc.find("ellipse_dialog",e),o=cc.find("label_header",e),n=cc.find("btn_replay",e),i=cc.find("btn_home",e),a=cc.find("btn_resume",e);t.scale*=1.8/.89,t.getComponent(cc.Widget).bottom=954,o.scale*=1.8,o.getComponent(cc.Widget).bottom=1643,n.scale*=2,n.getComponent(cc.Widget).bottom=673,n.x=0,i.scale*=2,i.getComponent(cc.Widget).bottom=670,i.x=-335,a.scale*=2,a.getComponent(cc.Widget).bottom=670,a.x=335},t.prototype.adjustLayoutSettings=function(){var e=cc.find("Canvas/screen/layout_settings"),t=cc.find("ellipse_dialog",e),o=cc.find("label_header",e),n=cc.find("btn_home",e);t.getComponent(cc.Widget).bottom=954,t.scale*=1.8/.89,o.getComponent(cc.Widget).bottom=1643,o.scale*=1.8,n.getComponent(cc.Widget).bottom=670,n.scale*=2},t.prototype.adjustLayoutTutorial=function(){var e=cc.find("Canvas/screen/layout_tutorial"),t=cc.find("ellipse_dialog",e),o=cc.find("btn_done",e);t.scale*=2.3/1.11,t.getComponent(cc.Widget).bottom=688,t.width=528,t.height=526,o.scale*=2,o.getComponent(cc.Widget).bottom=595},a([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../system/all_modules":"all_modules"}],qr_code:[function(e,t,o){"use strict";cc._RF.push(t,"b7621UgkEhCn6GXpe0Im6Z1","qr_code");var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.qrCode=void 0;var i=e("../system/all_modules"),a=i._;i.$,o.qrCode={qrNode:null,init:function(){var e=this;this.qrNode=cc.find("Canvas/screen/layout_lose/qr_code"),a.setTimeout(function(){e.setQrCodeStr("12345")},300)},setQrCodeStr:function(e){var t=this;this.qrNode.orgScale=this.qrNode.orgScale||this.qrNode.scale,this.qrNode.scale=0,this.qrNode.getComponent(cc.Sprite).spriteFrame=null,this.generateQrCode(e,function(e){t.base64ToSpriteFrame(e,function(e){i.utilsUI.setNodeSprite(t.qrNode,e),a.setTimeout(function(){cc.tween(t.qrNode).to(.3,{scale:t.qrNode.orgScale}).start()},200)})})},base64ToSpriteFrame:function(e,t){var o=new Image;o.onload=function(){var e=new cc.Texture2D;e.initWithElement(o),e.handleLoadedTexture();var n=new cc.SpriteFrame(e);t&&t(n)}.bind(o),o.src=e},generateQrCode:function(e,t){if(window.QRCodeStyling){var o=document.createElement("div");o.id="qrcode",o.style.display="none",document.body.appendChild(o);var i=new QRCodeStyling(n(n({},this.qrOption),{data:e}));i.append(document.getElementById("qrcode")),i.getRawData("png").then(function(e){var o=new FileReader;o.readAsDataURL(e),o.onloadend=function(){var e=o.result;t&&t(e)}})}},qrOption:{width:300,height:300,data:"123",margin:10,qrOptions:{typeNumber:"0",mode:"Byte",errorCorrectionLevel:"Q"},imageOptions:{hideBackgroundDots:!0,imageSize:.5,margin:10},dotsOptions:{type:"square",color:"#000000"},backgroundOptions:{color:"#FFC580"},image:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",dotsOptionsHelper:{colorType:{single:!0,gradient:!1},gradient:{linear:!0,radial:!1,color1:"#6a1a4c",color2:"#6a1a4c",rotation:"0"}},cornersSquareOptions:{type:"",color:"#000000"},cornersSquareOptionsHelper:{colorType:{single:!0,gradient:!1},gradient:{linear:!0,radial:!1,color1:"#000000",color2:"#000000",rotation:"0"}},cornersDotOptions:{type:"",color:"#000000"},cornersDotOptionsHelper:{colorType:{single:!0,gradient:!1},gradient:{linear:!0,radial:!1,color1:"#000000",color2:"#000000",rotation:"0"}},backgroundOptionsHelper:{colorType:{single:!0,gradient:!1},gradient:{linear:!0,radial:!1,color1:"#ffffff",color2:"#ffffff",rotation:"0"}}}},cc._RF.pop()},{"../system/all_modules":"all_modules"}],settings:[function(e,t,o){"use strict";cc._RF.push(t,"47b954QQ/RNPrn+v8nMvQ+H","settings"),Object.defineProperty(o,"__esModule",{value:!0}),o.settings=void 0;var n=e("../system/all_modules");n._,n.$,o.settings={node:null,soundVolume:1,musicVolume:1,isInitialized:!1,init:function(){var e=this;this.node=cc.find("Canvas/screen/layout_settings"),n.utilsData.load(["soundVolume","musicVolume"],function(t){e.soundVolume=0===t.soundVolume?t.soundVolume:t.soundVolume||1,e.musicVolume=0===t.musicVolume?t.musicVolume:t.musicVolume||1,e.updateAllSliders(),e.isInitialized=!0})},onSliderSlide:function(e,t){this[e]=t,this.updateAllSliders(),this.onSliderTouchEnd()},onSliderTouchEnd:function(){n.utilsData.save({soundVolume:this.soundVolume,musicVolume:this.musicVolume})},updateAllSliders:function(){n.audio.updateVolume();var e=cc.find("Canvas/screen/layout_pause/ellipse_dialog"),t=cc.find("Canvas/screen/layout_settings/ellipse_dialog"),o=cc.find("slider_music",e),i=cc.find("slider_sound",e),a=cc.find("slider_music",t),c=cc.find("slider_sound",t);o.getComponent(cc.Slider).progress=this.musicVolume,a.getComponent(cc.Slider).progress=this.musicVolume,i.getComponent(cc.Slider).progress=this.soundVolume,c.getComponent(cc.Slider).progress=this.soundVolume,[o,a,i,c].map(function(e){var t=cc.find("slider_progress",e),o=t.orgWidth=t.orgWidth||t.width;t.width=e.getComponent(cc.Slider).progress*o})}},cc._RF.pop()},{"../system/all_modules":"all_modules"}],slider_comp:[function(e,t,o){"use strict";cc._RF.push(t,"0e249NqAVtKgq+oKkbhPTtK","slider_comp");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,c=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(c=(a<3?i(c):a>3?i(t,o,c):i(t,o))||c);return a>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../system/all_modules"),r=(c._,c.$,cc._decorator),s=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){},t.prototype.onSliderSlide=function(){c.settings.onSliderSlide(this.node.name.replace("slider_","")+"Volume",this.node.getComponent(cc.Slider).progress)},a([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../system/all_modules":"all_modules"}],tutorial:[function(e,t,o){"use strict";cc._RF.push(t,"9fa024zMbVB+Lq+UeHKKCS8","tutorial"),Object.defineProperty(o,"__esModule",{value:!0}),o.tutorial=void 0;var n=e("../system/all_modules");n._,n.$,o.tutorial={node:null,isShown:!1,init:function(){this.node=cc.find("Canvas/screen/layout_tutorial")},checkToShow:function(){this.isShown||(this.isShown=!0,n.coreUI.showLayout(this.node))}},cc._RF.pop()},{"../system/all_modules":"all_modules"}],utils_anim_fx:[function(e,t,o){"use strict";cc._RF.push(t,"e273ec92dRLKKGQF99UI9/D","utils_anim_fx");var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var a=arguments[t],c=0,r=a.length;c<r;c++,i++)n[i]=a[c];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.utilsAnimFx=void 0;var i=e("../../system/all_modules"),a=i._;o.utilsAnimFx={fxNodePool:{},init:function(){},replayParticle:function(e){e&&e.getComponent(cc.ParticleSystem)&&(e.active=!0,e.getComponent(cc.ParticleSystem).resetSystem())},playNodeAnim:function(e,t,o,n,i){void 0===n&&(n=!1);var a=e.getComponent(cc.Animation);if(e.activeInHierarchy&&a&&(t=t||(a.defaultClip?a.defaultClip.name:""))){var c=a[n?"playAdditive":"play"](t);if(c)return c.repeatCount=(-1==o?1/0:o)||1,i&&a.on("finished",function(){a.off("finished"),i()}),c}},playNodeAnimAsSoonAsNodeActive:function(e,t,o,n){var i=this;void 0===o&&(o=1),void 0===n&&(n=!0);var c="waitInterval2PlayAnimWhenActive";e[c]=a.waitToRun(function(){e[c]&&clearInterval(e[c]),i.playNodeAnim(e,t,o,n)},"activeInHierarchy",e)},playNodeAnimArr:function(e,t,o,i){var a=this;if(void 0===o&&(o=!1),e.activeInHierarchy){var c=e.getComponent(cc.Animation);if(e.activeInHierarchy&&c){var r=n(t);c.on("finished",function(){r.length?a.playNodeAnim(e,r.shift(),1,o):(c.off("finished"),i&&i())}),this.playNodeAnim(e,r.shift(),1,o)}}},stopAllNodeAnims:function(e){var t=e.getComponent(cc.Animation);t&&(t.stop(),t.off("finished"))},stopAnimAtFrame0:function(e){var t=this,o=e.getComponent(cc.Animation);o.play("ufo_ring_fx"),a.setTimeout(function(){o.setCurrentTime(0),t.stopAllNodeAnims(e)})},playIncreasingNumberLabel:function(e,t,o,n,i,c,r){void 0===n&&(n=5),void 0===i&&(i=.5),void 0===c&&(c=0),void 0===r&&(r="xxx");var s=e.getComponent(cc.Label),l=o/n,u=i/n;cc.tween(e).delay(c).repeat(n,cc.tween().call(function(){t+=l;var e=a.formatMoney(a.round(t));s.string=r.replace(/xxx/g,e)}).delay(u)).start()},getNewFxNode:function(e,t){e.nodePoolId||(e.nodePoolId=a.getNewUuid()),this.fxNodePool[e.nodePoolId]||(this.fxNodePool[e.nodePoolId]=[]);var o=this.fxNodePool[e.nodePoolId].pop()||a.copyNode(e);return o.nodePoolId=e.nodePoolId,o.parent=t||i.coreFX.fxContainer,o},saveFxNodeToPool:function(e){e.stopAllActions(),e.active=!1,this.fxNodePool[e.nodePoolId].unshift(e)},particlesFlyFromA2B:function(e,t,o,n,i){for(var c=this,r=n||{numberOfNode:20,delayStartTime:.05,flyDuration:1,randomBezierPointRange:{x:200,y:200}},s=r.numberOfNode,l=r.flyDuration,u=r.delayStartTime,d=r.randomBezierPointRange,m=a.getGlobalPosDiff(t,o),p=function(o){var n=f.getNewFxNode(e,i);n.active=!0,n.opacity=255,a.setGlobalPosToNode(n,t);var r=f.getRandomPointInRage(d),s=f.getRandomPointInRage(d);cc.tween(n).delay(o*u).bezierBy(l,r,s,m).call(function(){c.saveFxNodeToPool(n)}).start()},f=this,_=0;_<s;_++)p(_)},getRandomPointInRage:function(e){return cc.v2(a.randomNumber(2*e.x)-e.x,a.randomNumber(2*e.y)-e.y)},nodeFlyFromAtoB:function(e,t,o,n){void 0===o&&(o=.3);var i=a.getGlobalPosDiff(e,t);cc.tween(e).by(o,{position:i}).call(function(){return n&&n()}).start()},captureNodeToTexture:function(e){e.activeInHierarchy||(e.active=!0);var t=new cc.Node;e.addChild(t);var o=t.addComponent(cc.Camera),n=new cc.RenderTexture,i=cc.game._renderContext;n.initWithSize(e.width,e.height,i.STENCIL_INDEX8),o.targetTexture=n,o.zoomRatio=1.3,o.backgroundColor=cc.Color.WHITE,o.clearFlags=cc.Camera.ClearFlags.DEPTH|cc.Camera.ClearFlags.STENCIL|cc.Camera.ClearFlags.COLOR;var a=n.width,c=n.height,r=document.createElement("canvas");r.width=a,r.height=c;var s=r.getContext("2d");o.render(e);for(var l=n.readPixels(),u=4*a,d=0;d<c;d++){var m=c-1-d,p=new Uint8ClampedArray(l.buffer,m*a*4,u),f=new ImageData(p,a,1);s.putImageData(f,0,d)}var _=r.toDataURL("image/jpeg");return setTimeout(function(){e.active=!1,t.removeFromParent()},1e3),_}},cc._RF.pop()},{"../../system/all_modules":"all_modules"}],utils_common:[function(e,t,o){"use strict";cc._RF.push(t,"38328hs45lM85Ud0D0XUutA","utils_common");var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var a=arguments[t],c=0,r=a.length;c<r;c++,i++)n[i]=a[c];return n};Object.defineProperty(o,"__esModule",{value:!0}),o._=o.$=void 0;var a=e("../../system/all_modules"),c=e("./utils_time"),r=e("./utils_coordinate"),s=100;o.$=function(e,t){void 0===t&&(t=0),o._.$callCount=(o._.$callCount||0)+1,e.name!=a.types.elem.card&&(t=0);var n=e["props_"+t]||{};return e["props_"+t]=n},o.$.clean=function(e,t){void 0===t&&(t=0),0!=t&&delete e["props_"+t]},o._=n(n({NO_CONSOLE_LOG:!1,isANDROID:cc.sys.os==cc.sys.OS_ANDROID,isIOS:cc.sys.os==cc.sys.OS_IOS,max:Math.max,min:Math.min,round:Math.round,floor:Math.floor,ceil:Math.ceil,sign:Math.sign,abs:Math.abs,pow:Math.pow,random:Math.random,sqrt:Math.sqrt,sin:Math.sin,cos:Math.cos,tan:Math.tan,atan:Math.atan,atan2:Math.atan2,log10:Math.log10,PI:Math.PI,randomArrItem:function(e,t){void 0===t&&(t=!1);var o=Math.floor(Math.random()*e.length);return t?e.splice(o,1)[0]:e[o]},isString:function(e){return"string"==typeof e},isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!this.NO_CONSOLE_LOG)try{console.log.apply(console,e)}catch(o){}},getNewUuid:function(){return s++},removeArrayItem:function(e,t){var o=e.indexOf(t);-1!=o&&e.splice(o,1)},addUniqueElemToArr:function(e,t){e.includes(t)||e.push(t)},randomNumber:function(e){return o._.floor(o._.random()*e)},shuffleArray:function(e,t){var o=this;void 0===t&&(t=!1);var n=t?i(e):e;return n.sort(function(){return o.random()>.5?1:-1}),n},directionVec2:function(){return{top:cc.v2(0,1),bottom:cc.v2(0,-1),left:cc.v2(-1,0),right:cc.v2(1,0)}},reservedDir:function(e){return{top:"bottom",bottom:"top",left:"right",right:"left"}[e]},getGlobalPos:function(e){return e.convertToWorldSpaceAR(cc.Vec2.ZERO)},getGlobalPosDiff:function(e,t){return this.getGlobalPos(t).sub(this.getGlobalPos(e))},setGlobalPosToNode:function(e,t){var o=this.getGlobalPos(t),n=e.parent.convertToNodeSpaceAR(o);e.setPosition(n)},setGlobalPos:function(e,t){var o=e.parent.convertToNodeSpaceAR(t);e.setPosition(o)},moveToNewParentKeepPosition:function(e,t){var o=t.convertToNodeSpaceAR(this.getGlobalPos(e));e.parent=t,e.setPosition(o)},isGlobalOverlapping:function(e,t){return cc.Intersection.rectRect(e.getBoundingBoxToWorld(),t.getBoundingBoxToWorld())},getBezierPointFunc:function(e){return function(t){for(var o=e;o.length>1;o=a)for(var n,i=0,a=[];i<o.length-1;i++)for(a[i]=[],n=0;n<o[i].length;n++)a[i][n]=o[i][n]*(1-t)+o[i+1][n]*t;return o[0]}},copyNode:function(e,t){var o=cc.instantiate(e);return t&&(o.parent=t),o},setOrgProp:function(e,t){var o=this,n=["x","y","width","height","opacity"];if(t&&this.addUniqueElemToArr(n,t),n.map(function(t){var n="org"+o.capitalize(t);e[n]=e.hasOwnProperty(n)?e[n]:e[t]}),t)return e["org"+this.capitalize(t)]},getNodePath:function(e){for(var t=[e.name],o=e.parent,n=0;o&&n++<50&&o.parent;)t.push(o.name),o=o.parent;return t.reverse().join("/")},nodeConnect2Points:function(e,t,n){var i=n.sub(t);e.height=i.mag(),e.setPosition(t.add(i.mul(.5))),e.angle=90+o._.radianToDegrees(o._.atan2(i.y,i.x))},getNodeDistance:function(e,t){return this.getGlobalPosDiff(e,t).mag()},radianToDegrees:function(e){return 180*e/Math.PI},degreesToRadian:function(e){return e*Math.PI/180},vec2ToAngle:function(e){return o._.radianToDegrees(o._.atan2(e.y,e.x))},formatTime:function(e){var t=o._.floor(e/3600),n=o._.floor(e%3600/60),i=e%3600%60;return t<10&&(t="0"+t),n<10&&(n="0"+n),i<10&&(i="0"+i),t+":"+n+":"+i},formatMoney:function(e){var t=o._.floor(Math.log10(e))+1;if(t<=6)return e.toLocaleString();var n,i=o._.floor((t-1)/3);return n=i-2<=3?["K","M","B","T"][i-2]:String.fromCharCode((i-6)/26+"a".charCodeAt(0))+String.fromCharCode((i-6)%26+"a".charCodeAt(0)),o._.round(e/o._.pow(10,3*(i-1))).toLocaleString()+n},capitalize:function(e){var t=i(e);return t[0]=t[0].toUpperCase(),t.join("")},getInRange:function(e,t,n){return o._.min(o._.max(e,t),n)}},c.default),r.default),cc._RF.pop()},{"../../system/all_modules":"all_modules","./utils_coordinate":"utils_coordinate","./utils_time":"utils_time"}],utils_coordinate:[function(e,t,o){"use strict";cc._RF.push(t,"5df86zHog5HcqIKMKzmLV+k","utils_coordinate"),Object.defineProperty(o,"__esModule",{value:!0}),e("../../system/all_modules").$;var n=e("./utils_common");o.default={isVecHorz:function(e){return n._.abs(e.x)>n._.abs(e.y)},getPointRanges:function(e){var t=99999999,o=99999999,i=-99999999,a=-99999999;return e.map(function(e){t=n._.min(t,e.x),o=n._.min(o,e.y),i=n._.max(i,e.x),a=n._.max(a,e.y)}),{minX:t,minY:o,maxX:i,maxY:a}},distance2polygon:function(e,t){function o(e,t,o){var n,i,a=e.x,c=e.y,r=t.x,s=t.y,l=o.x,u=o.y,d=l-r,m=u-s,p=d*d+m*m,f=-1;0!=p&&(f=((a-r)*d+(c-s)*m)/p),f<0?(n=r,i=s):f>1?(n=l,i=u):(n=r+f*d,i=s+f*m);var _=a-n,h=c-i;return Math.sqrt(_*_+h*h)}return t.map(function(n,i){var a=t[i+1]||t[0];return o(e,n,a)}).sort(function(e,t){return e>t?1:-1})[0]}},cc._RF.pop()},{"../../system/all_modules":"all_modules","./utils_common":"utils_common"}],utils_data:[function(e,t,o){"use strict";cc._RF.push(t,"55e17+IhfZAOKUumwaKfgIH","utils_data"),Object.defineProperty(o,"__esModule",{value:!0}),o.utilsData=void 0;var n=e("../../system/all_modules");n._,n.$,o.utilsData={save:function(e,t){for(var o in e)localStorage.setItem(o,JSON.stringify(e[o]));setTimeout(function(){t&&t()},300)},load:function(e,t){var o={};e.map(function(e){if(null!==localStorage.getItem(e))try{o[e]=JSON.parse(localStorage.getItem(e))}catch(t){console.warn(" utilsData.load() >> Error  data key = "+e+" ",t)}}),t&&setTimeout(function(){return t(o)},100)}},cc._RF.pop()},{"../../system/all_modules":"all_modules"}],utils_time:[function(e,t,o){"use strict";cc._RF.push(t,"f9b241Zt2BFFa5XMWEu3uey","utils_time"),Object.defineProperty(o,"__esModule",{value:!0}),e("../../system/all_modules").$;var n=1e5;o.default={getMsPassedUTC:function(){return(new Date).getTime()},getMsPassedPT:function(){var e=this.getPacificTimeOffset();return this.getMsPassedUTC()+36e5*e},getTimePT:function(e){void 0===e&&(e=new Date);var t=this.getPacificTimeOffset(e),o=e.getHours()+e.getTimezoneOffset()/60;return e.setHours(o+t),e},isSameDate:function(e,t){return e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()},getTotalMsToMidnightPT:function(){return 864e5-this.getMsPassedPT()%864e5},getDSTStartEndDate:function(e){var t=(e||new Date).getFullYear(),o=new Date(t,2,1),n=(7-o.getDay())%7,i=o.getDate()+n+7,a=new Date(t,2,i),c=new Date(t,10,1),r=(7-c.getDay())%7,s=c.getDate()+r;return[a,new Date(t,10,s)]},getPacificTimeOffset:function(e){var t=e||new Date,o=this.getDSTStartEndDate(),n=o[0],i=o[1];return t>n&&t<i?-7:-8},setTimeout:function(e,t){void 0===t&&(t=0);var o={_id:n++,__instanceId:n,callback:null};return o.callback=function(){e(o)},cc.director.getScheduler().schedule(o.callback,o,t/1e3,0,0,!1),o},clearTimeout:function(e){e&&e._id&&e.callback&&cc.director.getScheduler().unschedule(e.callback,e)},setInterval:function(e,t){void 0===t&&(t=0);var o={_id:n++,__instanceId:n,callback:null};return o.callback=function(){e(o)},cc.director.getScheduler().schedule(o.callback,o,t/1e3,cc.macro.REPEAT_FOREVER,0,!1),o},clearInterval:function(e){e&&e._id&&e.callback&&cc.director.getScheduler().unschedule(e.callback,e)},addPseudoUpdateFunc:function(e){var t=this,o=this.getMsPassedUTC();return this.setInterval(function(){var n=t.getMsPassedUTC(),i=n-o;o=n,e(i)},.01)},secondsToTimeCountdown:function(e){if(void 0===e&&(e=0),e<=0)return"0:00";var t=Math.floor(e/86400),o=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),i=e%60;if(t>2)return t+" days";if(1==t)return"1 day";var a="";return o>0&&(a=o+":"),(a+=n+":")+(i>=10?i:"0"+i)},waitToRun:function(e,t,o,n,i,a){void 0===o&&(o=window),void 0===n&&(n=.1);var c=!1,r=t.startsWith("!"),s=t.endsWith("()");t=t.replace("!","").replace("()","");var l,u=s?function(){return o[t]()}:null,d=function(){if(r){if(s){if(u())return}else if(o[t])return}else if(s){if(!u())return}else if(!o[t])return;return clearInterval(l),c=!0,e(o[t]),!0};return d()?l:(l=setInterval(d,1e3*n),i&&this.setTimeout(function(){clearInterval(l),a&&!c&&a()},1e3*i),l)}},cc._RF.pop()},{"../../system/all_modules":"all_modules"}],utils_ui:[function(e,t,o){"use strict";cc._RF.push(t,"fac22cBTNdDypWs3FUVCI/a","utils_ui"),Object.defineProperty(o,"__esModule",{value:!0}),o.utilsUI=void 0;var n=e("../../system/all_modules"),i=n._,a=(n.$,{touchstart:[],touchmove:[],touchend:[]});o.utilsUI={init:function(){},fillLabel:function(e,t){(e.getComponent(cc.Label)||e.getComponent(cc.RichText)).string=t},fillChildLabelByPath:function(e,t,o){var n=cc.find(t,e);n&&this.fillLabel(n,o)},showOnlyChildNodeWithNameAs:function(e,t,o){var n;return void 0===o&&(o=!1),e.children.map(function(e){var i=e.name==t;i&&(n=e),e.active=i,o&&(e.opacity=i?255:0)}),n},setLabelCountDownTimer:function(e,t,o){"string"==typeof e&&(e=cc.find(e)),e.countDownTimerVar&&clearInterval(e.countDownTimerVar);var a=function(){if(!e.parent)return clearInterval(e.countDownTimerVar);var a=t-i.getMsPassedUTC(),c=i.secondsToTimeCountdown(i.floor(a/1e3));n.utilsUI.fillLabel(e,c),a<=0&&(clearInterval(e.countDownTimerVar),o&&o())};e.countDownTimerVar=setInterval(a,500),a()},setNodeSprite:function(e,t){e&&e.getComponent(cc.Sprite)&&(e.getComponent(cc.Sprite).spriteFrame=t)},setNodeSpriteFromUrl:function(e,t,o){var n=this;e&&e.getComponent(cc.Sprite)&&cc.assetManager.loadRemote(t,function(t,i){return t||n.setNodeSprite(e,new cc.SpriteFrame(i)),o&&o(i)})},setNodeSpriteFillRange:function(e,t){e&&e.getComponent(cc.Sprite)&&(e.getComponent(cc.Sprite).fillRange=t)},makeButton:function(e,t,o,c){var r=i.isString(e)?cc.find(e):e;i.setTimeout(function(){r||i.log("undefined node path = "+e),r.getComponent("free_button_comp")||r.addComponent("free_button_comp");var s=r.addComponent(cc.Button);s.transition=o?cc.Button.Transition.SCALE:null,s.zoomScale=e.buttonCompZoomScale||1.2;var l=new cc.Component.EventHandler;l.target=r,l.component="free_button_comp",l.handler="freeHandler",s.clickEvents.push(l),r.freeButtonHandlerFunc=function(){t(),c||n.audio.playSound("button_click"),a.touchstart.map(function(e){return e()})}})},makeBubbleButton:function(e,t){return this.makeButton(e,t,!0)},singleTouchSet:function(e,t,o,n){var i=function(e,t,o){e(t.touch.getLocation(),t,o)};e.on("touchstart",function(o){e._customTouchId||(e._customTouchId=o.touch._id+1,t&&i(t,o,e._customTouchId))}),o&&e.on("touchmove",function(t){var n=t.touch._id+1;n==e._customTouchId&&o&&i(o,t,n)});var a=function(t){var o=t.touch._id+1;o==e._customTouchId&&(e._customTouchId=null,n&&i(n,t,o))};e.on("touchend",a),e.on("touchcancel",a)},bindCanvasTouchHandler:function(){var e=cc.find("Canvas");this.singleTouchSet(e,function(e){a.touchstart.map(function(t){return t(e)})},function(e){a.touchmove.map(function(t){return t(e)})},function(e){a.touchend.map(function(t){return t(e)})})},addCanvasTouchHandler:function(e,t){var o=a[e];o&&o.push(t)}},cc._RF.pop()},{"../../system/all_modules":"all_modules"}]},{},["control","elem_collision_comp","game_flow","game_mechanic","map_visual","qr_code","settings","slider_comp","tutorial","audio","free_button_comp","utils_anim_fx","utils_common","utils_coordinate","utils_data","utils_time","utils_ui","all_modules","app_events","config_game","project_init_comp","bind_button_handlers","core_fx","core_ui"]);